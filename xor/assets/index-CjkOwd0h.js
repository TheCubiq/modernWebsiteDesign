var Pn=Object.defineProperty;var In=(s,e,t)=>e in s?Pn(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var pe=(s,e,t)=>(In(s,typeof e!="symbol"?e+"":e,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}})();function U(){}const ze=s=>s;function R(s,e){for(const t in e)s[t]=e[t];return s}function nn(s){return s()}function mt(){return Object.create(null)}function ae(s){s.forEach(nn)}function ke(s){return typeof s=="function"}function M(s,e){return s!=s?e==e:s!==e||s&&typeof s=="object"||typeof s=="function"}function En(s){return Object.keys(s).length===0}function st(s,...e){if(s==null){for(const n of e)n(void 0);return U}const t=s.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function Fe(s,e,t){s.$$.on_destroy.push(st(e,t))}function ue(s,e,t,n){if(s){const i=sn(s,e,t,n);return s[0](i)}}function sn(s,e,t,n){return s[1]&&n?R(t.ctx.slice(),s[1](n(e))):t.ctx}function fe(s,e,t,n){if(s[2]&&n){const i=s[2](n(t));if(e.dirty===void 0)return i;if(typeof i=="object"){const o=[],r=Math.max(e.dirty.length,i.length);for(let l=0;l<r;l+=1)o[l]=e.dirty[l]|i[l];return o}return e.dirty|i}return e.dirty}function he(s,e,t,n,i,o){if(i){const r=sn(e,t,n,o);s.p(r,i)}}function de(s){if(s.ctx.length>32){const e=[],t=s.ctx.length/32;for(let n=0;n<t;n++)e[n]=-1;return e}return-1}function D(s){const e={};for(const t in s)t[0]!=="$"&&(e[t]=s[t]);return e}function gt(s,e){const t={};e=new Set(e);for(const n in s)!e.has(n)&&n[0]!=="$"&&(t[n]=s[n]);return t}function Xe(s,e,t){return s.set(t),e}function yt(s){const e=typeof s=="string"&&s.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return e?[parseFloat(e[1]),e[2]||"px"]:[s,"px"]}const on=typeof window<"u";let Ie=on?()=>window.performance.now():()=>Date.now(),ut=on?s=>requestAnimationFrame(s):U;const Ce=new Set;function rn(s){Ce.forEach(e=>{e.c(s)||(Ce.delete(e),e.f())}),Ce.size!==0&&ut(rn)}function Me(s){let e;return Ce.size===0&&ut(rn),{promise:new Promise(t=>{Ce.add(e={c:s,f:t})}),abort(){Ce.delete(e)}}}const ln=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;class Ue{constructor(e){pe(this,"_listeners","WeakMap"in ln?new WeakMap:void 0);pe(this,"_observer");pe(this,"options");this.options=e}observe(e,t){return this._listeners.set(e,t),this._getObserver().observe(e,this.options),()=>{this._listeners.delete(e),this._observer.unobserve(e)}}_getObserver(){return this._observer??(this._observer=new ResizeObserver(e=>{var t;for(const n of e)Ue.entries.set(n.target,n),(t=this._listeners.get(n.target))==null||t(n)}))}}Ue.entries="WeakMap"in ln?new WeakMap:void 0;function V(s,e){s.appendChild(e)}function an(s){if(!s)return document;const e=s.getRootNode?s.getRootNode():s.ownerDocument;return e&&e.host?e:s.ownerDocument}function $n(s){const e=F("style");return e.textContent="/* empty */",Tn(an(s),e),e.sheet}function Tn(s,e){return V(s.head||s,e),e.sheet}function $(s,e,t){s.insertBefore(e,t||null)}function I(s){s.parentNode&&s.parentNode.removeChild(s)}function $e(s,e){for(let t=0;t<s.length;t+=1)s[t]&&s[t].d(e)}function F(s){return document.createElement(s)}function me(s){return document.createElementNS("http://www.w3.org/2000/svg",s)}function qe(s){return document.createTextNode(s)}function ee(){return qe(" ")}function ge(){return qe("")}function te(s,e,t,n){return s.addEventListener(e,t,n),()=>s.removeEventListener(e,t,n)}function it(s){return function(e){return e.preventDefault(),s.call(this,e)}}function w(s,e,t){t==null?s.removeAttribute(e):s.getAttribute(e)!==t&&s.setAttribute(e,t)}function Ge(s,e){for(const t in e)w(s,t,e[t])}function qn(s){return Array.from(s.childNodes)}function bt(s,e){e=""+e,s.data!==e&&(s.data=e)}function _t(s,e){s.value=e??""}function ne(s,e,t,n){t==null?s.style.removeProperty(e):s.style.setProperty(e,t,n?"important":"")}const Rn=new Ue({box:"border-box"});function H(s,e,t){s.classList.toggle(e,!!t)}function Nn(s,e,{bubbles:t=!1,cancelable:n=!1}={}){return new CustomEvent(s,{detail:e,bubbles:t,cancelable:n})}function kt(s,e){return new s(e)}const Ve=new Map;let Je=0;function An(s){let e=5381,t=s.length;for(;t--;)e=(e<<5)-e^s.charCodeAt(t);return e>>>0}function Ln(s,e){const t={stylesheet:$n(e),rules:{}};return Ve.set(s,t),t}function Ne(s,e,t,n,i,o,r,l=0){const a=16.666/n;let c=`{
`;for(let g=0;g<=1;g+=a){const m=e+(t-e)*o(g);c+=g*100+`%{${r(m,1-m)}}
`}const h=c+`100% {${r(t,1-t)}}
}`,u=`__svelte_${An(h)}_${l}`,f=an(s),{stylesheet:d,rules:p}=Ve.get(f)||Ln(f,s);p[u]||(p[u]=!0,d.insertRule(`@keyframes ${u} ${h}`,d.cssRules.length));const b=s.style.animation||"";return s.style.animation=`${b?`${b}, `:""}${u} ${n}ms linear ${i}ms 1 both`,Je+=1,u}function Ae(s,e){const t=(s.style.animation||"").split(", "),n=t.filter(e?o=>o.indexOf(e)<0:o=>o.indexOf("__svelte")===-1),i=t.length-n.length;i&&(s.style.animation=n.join(", "),Je-=i,Je||jn())}function jn(){ut(()=>{Je||(Ve.forEach(s=>{const{ownerNode:e}=s.stylesheet;e&&I(e)}),Ve.clear())})}function zn(s,e,t,n){if(!e)return U;const i=s.getBoundingClientRect();if(e.left===i.left&&e.right===i.right&&e.top===i.top&&e.bottom===i.bottom)return U;const{delay:o=0,duration:r=300,easing:l=ze,start:a=Ie()+o,end:c=a+r,tick:h=U,css:u}=t(s,{from:e,to:i},n);let f=!0,d=!1,p;function b(){u&&(p=Ne(s,0,1,r,o,l,u)),o||(d=!0)}function g(){u&&Ae(s,p),f=!1}return Me(m=>{if(!d&&m>=a&&(d=!0),d&&m>=c&&(h(1,0),g()),!f)return!1;if(d){const q=m-a,O=0+1*l(q/r);h(O,1-O)}return!0}),b(),h(0,1),g}function Mn(s){const e=getComputedStyle(s);if(e.position!=="absolute"&&e.position!=="fixed"){const{width:t,height:n}=e,i=s.getBoundingClientRect();s.style.position="absolute",s.style.width=t,s.style.height=n,cn(s,i)}}function cn(s,e){const t=s.getBoundingClientRect();if(e.left!==t.left||e.top!==t.top){const n=getComputedStyle(s),i=n.transform==="none"?"":n.transform;s.style.transform=`${i} translate(${e.left-t.left}px, ${e.top-t.top}px)`}}let Le;function Re(s){Le=s}function un(){if(!Le)throw new Error("Function called outside component initialization");return Le}function ft(s){un().$$.on_mount.push(s)}function fn(s){un().$$.on_destroy.push(s)}const xe=[],wt=[];let Oe=[];const vt=[],Un=Promise.resolve();let ot=!1;function Bn(){ot||(ot=!0,Un.then(hn))}function X(s){Oe.push(s)}const et=new Set;let ve=0;function hn(){if(ve!==0)return;const s=Le;do{try{for(;ve<xe.length;){const e=xe[ve];ve++,Re(e),Dn(e.$$)}}catch(e){throw xe.length=0,ve=0,e}for(Re(null),xe.length=0,ve=0;wt.length;)wt.pop()();for(let e=0;e<Oe.length;e+=1){const t=Oe[e];et.has(t)||(et.add(t),t())}Oe.length=0}while(xe.length);for(;vt.length;)vt.pop()();ot=!1,et.clear(),Re(s)}function Dn(s){if(s.fragment!==null){s.update(),ae(s.before_update);const e=s.dirty;s.dirty=[-1],s.fragment&&s.fragment.p(s.ctx,e),s.after_update.forEach(X)}}function Fn(s){const e=[],t=[];Oe.forEach(n=>s.indexOf(n)===-1?e.push(n):t.push(n)),t.forEach(n=>n()),Oe=e}let Te;function ht(){return Te||(Te=Promise.resolve(),Te.then(()=>{Te=null})),Te}function _e(s,e,t){s.dispatchEvent(Nn(`${e?"intro":"outro"}${t}`))}const We=new Set;let re;function Q(){re={r:0,c:[],p:re}}function Z(){re.r||ae(re.c),re=re.p}function y(s,e){s&&s.i&&(We.delete(s),s.i(e))}function S(s,e,t,n){if(s&&s.o){if(We.has(s))return;We.add(s),re.c.push(()=>{We.delete(s),n&&(t&&s.d(1),n())}),s.o(e)}else n&&n()}const dt={duration:0};function dn(s,e,t){const n={direction:"in"};let i=e(s,t,n),o=!1,r,l,a=0;function c(){r&&Ae(s,r)}function h(){const{delay:f=0,duration:d=300,easing:p=ze,tick:b=U,css:g}=i||dt;g&&(r=Ne(s,0,1,d,f,p,g,a++)),b(0,1);const m=Ie()+f,q=m+d;l&&l.abort(),o=!0,X(()=>_e(s,!0,"start")),l=Me(O=>{if(o){if(O>=q)return b(1,0),_e(s,!0,"end"),c(),o=!1;if(O>=m){const x=p((O-m)/d);b(x,1-x)}}return o})}let u=!1;return{start(){u||(u=!0,Ae(s),ke(i)?(i=i(n),ht().then(h)):h())},invalidate(){u=!1},end(){o&&(c(),o=!1)}}}function pn(s,e,t){const n={direction:"out"};let i=e(s,t,n),o=!0,r;const l=re;l.r+=1;let a;function c(){const{delay:h=0,duration:u=300,easing:f=ze,tick:d=U,css:p}=i||dt;p&&(r=Ne(s,1,0,u,h,f,p));const b=Ie()+h,g=b+u;X(()=>_e(s,!1,"start")),"inert"in s&&(a=s.inert,s.inert=!0),Me(m=>{if(o){if(m>=g)return d(0,1),_e(s,!1,"end"),--l.r||ae(l.c),!1;if(m>=b){const q=f((m-b)/u);d(1-q,q)}}return o})}return ke(i)?ht().then(()=>{i=i(n),c()}):c(),{end(h){h&&"inert"in s&&(s.inert=a),h&&i.tick&&i.tick(1,0),o&&(r&&Ae(s,r),o=!1)}}}function le(s,e,t,n){let o=e(s,t,{direction:"both"}),r=n?0:1,l=null,a=null,c=null,h;function u(){c&&Ae(s,c)}function f(p,b){const g=p.b-r;return b*=Math.abs(g),{a:r,b:p.b,d:g,duration:b,start:p.start,end:p.start+b,group:p.group}}function d(p){const{delay:b=0,duration:g=300,easing:m=ze,tick:q=U,css:O}=o||dt,x={start:Ie()+b,b:p};p||(x.group=re,re.r+=1),"inert"in s&&(p?h!==void 0&&(s.inert=h):(h=s.inert,s.inert=!0)),l||a?a=x:(O&&(u(),c=Ne(s,r,p,g,b,m,O)),p&&q(0,1),l=f(x,g),X(()=>_e(s,p,"start")),Me(P=>{if(a&&P>a.start&&(l=f(a,g),a=null,_e(s,l.b,"start"),O&&(u(),c=Ne(s,r,l.b,l.duration,0,m,o.css))),l){if(P>=l.end)q(r=l.b,1-r),_e(s,l.b,"end"),a||(l.b?u():--l.group.r||ae(l.group.c)),l=null;else if(P>=l.start){const E=P-l.start;r=l.a+l.d*m(E/l.duration),q(r,1-r)}}return!!(l||a)}))}return{run(p){ke(o)?ht().then(()=>{o=o({direction:p?"in":"out"}),d(p)}):d(p)},end(){u(),l=a=null}}}function G(s){return(s==null?void 0:s.length)!==void 0?s:Array.from(s)}function mn(s,e){S(s,1,1,()=>{e.delete(s.key)})}function Wn(s,e){s.f(),mn(s,e)}function gn(s,e,t,n,i,o,r,l,a,c,h,u){let f=s.length,d=o.length,p=f;const b={};for(;p--;)b[s[p].key]=p;const g=[],m=new Map,q=new Map,O=[];for(p=d;p--;){const C=u(i,o,p),T=t(C);let k=r.get(T);k?n&&O.push(()=>k.p(C,e)):(k=c(T,C),k.c()),m.set(T,g[p]=k),T in b&&q.set(T,Math.abs(p-b[T]))}const x=new Set,P=new Set;function E(C){y(C,1),C.m(l,h),r.set(C.key,C),h=C.first,d--}for(;f&&d;){const C=g[d-1],T=s[f-1],k=C.key,N=T.key;C===T?(h=C.first,f--,d--):m.has(N)?!r.has(k)||x.has(k)?E(C):P.has(N)?f--:q.get(k)>q.get(N)?(P.add(k),E(C)):(x.add(N),f--):(a(T,r),f--)}for(;f--;){const C=s[f];m.has(C.key)||a(C,r)}for(;d;)E(g[d-1]);return ae(O),g}function ce(s,e){const t={},n={},i={$$scope:1};let o=s.length;for(;o--;){const r=s[o],l=e[o];if(l){for(const a in r)a in l||(n[a]=1);for(const a in l)i[a]||(t[a]=l[a],i[a]=1);s[o]=l}else for(const a in r)i[a]=1}for(const r in n)r in t||(t[r]=void 0);return t}function ye(s){return typeof s=="object"&&s!==null?s:{}}function B(s){s&&s.c()}function j(s,e,t){const{fragment:n,after_update:i}=s.$$;n&&n.m(e,t),X(()=>{const o=s.$$.on_mount.map(nn).filter(ke);s.$$.on_destroy?s.$$.on_destroy.push(...o):ae(o),s.$$.on_mount=[]}),i.forEach(X)}function z(s,e){const t=s.$$;t.fragment!==null&&(Fn(t.after_update),ae(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function Kn(s,e){s.$$.dirty[0]===-1&&(xe.push(s),Bn(),s.$$.dirty.fill(0)),s.$$.dirty[e/31|0]|=1<<e%31}function W(s,e,t,n,i,o,r=null,l=[-1]){const a=Le;Re(s);const c=s.$$={fragment:null,ctx:[],props:o,update:U,not_equal:i,bound:mt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:mt(),dirty:l,skip_bound:!1,root:e.target||a.$$.root};r&&r(c.root);let h=!1;if(c.ctx=t?t(s,e.props||{},(u,f,...d)=>{const p=d.length?d[0]:f;return c.ctx&&i(c.ctx[u],c.ctx[u]=p)&&(!c.skip_bound&&c.bound[u]&&c.bound[u](p),h&&Kn(s,u)),f}):[],c.update(),h=!0,ae(c.before_update),c.fragment=n?n(c.ctx):!1,e.target){if(e.hydrate){const u=qn(e.target);c.fragment&&c.fragment.l(u),u.forEach(I)}else c.fragment&&c.fragment.c();e.intro&&y(s.$$.fragment),j(s,e.target,e.anchor),hn()}Re(a)}class K{constructor(){pe(this,"$$");pe(this,"$$set")}$destroy(){z(this,1),this.$destroy=U}$on(e,t){if(!ke(t))return U;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const i=n.indexOf(t);i!==-1&&n.splice(i,1)}}$set(e){this.$$set&&!En(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Gn="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Gn);const Se=[];function Ee(s,e=U){let t;const n=new Set;function i(l){if(M(s,l)&&(s=l,t)){const a=!Se.length;for(const c of n)c[1](),Se.push(c,s);if(a){for(let c=0;c<Se.length;c+=2)Se[c][0](Se[c+1]);Se.length=0}}}function o(l){i(l(s))}function r(l,a=U){const c=[l,a];return n.add(c),n.size===1&&(t=e(i,o)||U),l(s),()=>{n.delete(c),n.size===0&&t&&(t(),t=null)}}return{set:i,update:o,subscribe:r}}function St(s){return Object.prototype.toString.call(s)==="[object Date]"}function rt(s,e,t,n){if(typeof t=="number"||St(t)){const i=n-t,o=(t-e)/(s.dt||1/60),r=s.opts.stiffness*i,l=s.opts.damping*o,a=(r-l)*s.inv_mass,c=(o+a)*s.dt;return Math.abs(c)<s.opts.precision&&Math.abs(i)<s.opts.precision?n:(s.settled=!1,St(t)?new Date(t.getTime()+c):t+c)}else{if(Array.isArray(t))return t.map((i,o)=>rt(s,e[o],t[o],n[o]));if(typeof t=="object"){const i={};for(const o in t)i[o]=rt(s,e[o],t[o],n[o]);return i}else throw new Error(`Cannot spring ${typeof t} values`)}}function Vn(s,e={}){const t=Ee(s),{stiffness:n=.15,damping:i=.8,precision:o=.01}=e;let r,l,a,c=s,h=s,u=1,f=0,d=!1;function p(g,m={}){h=g;const q=a={};return s==null||m.hard||b.stiffness>=1&&b.damping>=1?(d=!0,r=Ie(),c=g,t.set(s=h),Promise.resolve()):(m.soft&&(f=1/((m.soft===!0?.5:+m.soft)*60),u=0),l||(r=Ie(),d=!1,l=Me(O=>{if(d)return d=!1,l=null,!1;u=Math.min(u+f,1);const x={inv_mass:u,opts:b,settled:!0,dt:(O-r)*60/1e3},P=rt(x,c,s,h);return r=O,c=s,t.set(s=P),x.settled&&(l=null),!x.settled})),new Promise(O=>{l.promise.then(()=>{q===a&&O()})}))}const b={set:p,update:(g,m)=>p(g(h,s),m),subscribe:t.subscribe,stiffness:n,damping:i,precision:o};return b}function Jn(s){return s<.5?4*s*s*s:.5*Math.pow(2*s-2,3)+1}function yn(s){const e=s-1;return e*e*e+1}function ie(s,{delay:e=0,duration:t=400,easing:n=ze}={}){const i=+getComputedStyle(s).opacity;return{delay:e,duration:t,easing:n,css:o=>`opacity: ${o*i}`}}function lt(s,{delay:e=0,duration:t=400,easing:n=yn,x:i=0,y:o=0,opacity:r=0}={}){const l=getComputedStyle(s),a=+l.opacity,c=l.transform==="none"?"":l.transform,h=a*(1-r),[u,f]=yt(i),[d,p]=yt(o);return{delay:e,duration:t,easing:n,css:(b,g)=>`
			transform: ${c} translate(${(1-b)*u}${f}, ${(1-b)*d}${p});
			opacity: ${a-h*g}`}}const se=15,oe=!1;class Y extends Error{constructor(e){var t,n,i,o;super("ClientResponseError"),this.url="",this.status=0,this.response={},this.isAbort=!1,this.originalError=null,Object.setPrototypeOf(this,Y.prototype),e!==null&&typeof e=="object"&&(this.url=typeof e.url=="string"?e.url:"",this.status=typeof e.status=="number"?e.status:0,this.isAbort=!!e.isAbort,this.originalError=e.originalError,e.response!==null&&typeof e.response=="object"?this.response=e.response:e.data!==null&&typeof e.data=="object"?this.response=e.data:this.response={}),this.originalError||e instanceof Y||(this.originalError=e),typeof DOMException<"u"&&e instanceof DOMException&&(this.isAbort=!0),this.name="ClientResponseError "+this.status,this.message=(t=this.response)==null?void 0:t.message,this.message||(this.isAbort?this.message="The request was autocancelled. You can find more info in https://github.com/pocketbase/js-sdk#auto-cancellation.":(o=(i=(n=this.originalError)==null?void 0:n.cause)==null?void 0:i.message)!=null&&o.includes("ECONNREFUSED ::1")?this.message="Failed to connect to the PocketBase server. Try changing the SDK URL from localhost to 127.0.0.1 (https://github.com/pocketbase/js-sdk/issues/21).":this.message="Something went wrong while processing your request.")}get data(){return this.response}toJSON(){return{...this}}}const De=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function Hn(s,e){const t={};if(typeof s!="string")return t;const n=Object.assign({},e||{}).decode||Qn;let i=0;for(;i<s.length;){const o=s.indexOf("=",i);if(o===-1)break;let r=s.indexOf(";",i);if(r===-1)r=s.length;else if(r<o){i=s.lastIndexOf(";",o-1)+1;continue}const l=s.slice(i,o).trim();if(t[l]===void 0){let a=s.slice(o+1,r).trim();a.charCodeAt(0)===34&&(a=a.slice(1,-1));try{t[l]=n(a)}catch{t[l]=a}}i=r+1}return t}function xt(s,e,t){const n=Object.assign({},t||{}),i=n.encode||Zn;if(!De.test(s))throw new TypeError("argument name is invalid");const o=i(e);if(o&&!De.test(o))throw new TypeError("argument val is invalid");let r=s+"="+o;if(n.maxAge!=null){const l=n.maxAge-0;if(isNaN(l)||!isFinite(l))throw new TypeError("option maxAge is invalid");r+="; Max-Age="+Math.floor(l)}if(n.domain){if(!De.test(n.domain))throw new TypeError("option domain is invalid");r+="; Domain="+n.domain}if(n.path){if(!De.test(n.path))throw new TypeError("option path is invalid");r+="; Path="+n.path}if(n.expires){if(!function(a){return Object.prototype.toString.call(a)==="[object Date]"||a instanceof Date}(n.expires)||isNaN(n.expires.valueOf()))throw new TypeError("option expires is invalid");r+="; Expires="+n.expires.toUTCString()}if(n.httpOnly&&(r+="; HttpOnly"),n.secure&&(r+="; Secure"),n.priority)switch(typeof n.priority=="string"?n.priority.toLowerCase():n.priority){case"low":r+="; Priority=Low";break;case"medium":r+="; Priority=Medium";break;case"high":r+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}if(n.sameSite)switch(typeof n.sameSite=="string"?n.sameSite.toLowerCase():n.sameSite){case!0:r+="; SameSite=Strict";break;case"lax":r+="; SameSite=Lax";break;case"strict":r+="; SameSite=Strict";break;case"none":r+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return r}function Qn(s){return s.indexOf("%")!==-1?decodeURIComponent(s):s}function Zn(s){return encodeURIComponent(s)}let bn;function Pe(s){if(s)try{const e=decodeURIComponent(bn(s.split(".")[1]).split("").map(function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(e)||{}}catch{}return{}}function _n(s,e=0){let t=Pe(s);return!(Object.keys(t).length>0&&(!t.exp||t.exp-e>Date.now()/1e3))}bn=typeof atob=="function"?atob:s=>{let e=String(s).replace(/=+$/,"");if(e.length%4==1)throw new Error("'atob' failed: The string to be decoded is not correctly encoded.");for(var t,n,i=0,o=0,r="";n=e.charAt(o++);~n&&(t=i%4?64*t+n:n,i++%4)?r+=String.fromCharCode(255&t>>(-2*i&6)):0)n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(n);return r};const Ct="pb_auth";class Yn{constructor(){this.baseToken="",this.baseModel=null,this._onChangeCallbacks=[]}get token(){return this.baseToken}get model(){return this.baseModel}get isValid(){return!_n(this.token)}get isAdmin(){return Pe(this.token).type==="admin"}get isAuthRecord(){return Pe(this.token).type==="authRecord"}save(e,t){this.baseToken=e||"",this.baseModel=t||null,this.triggerChange()}clear(){this.baseToken="",this.baseModel=null,this.triggerChange()}loadFromCookie(e,t=Ct){const n=Hn(e||"")[t]||"";let i={};try{i=JSON.parse(n),(typeof i===null||typeof i!="object"||Array.isArray(i))&&(i={})}catch{}this.save(i.token||"",i.model||null)}exportToCookie(e,t=Ct){var a,c;const n={secure:!0,sameSite:!0,httpOnly:!0,path:"/"},i=Pe(this.token);n.expires=i!=null&&i.exp?new Date(1e3*i.exp):new Date("1970-01-01"),e=Object.assign({},n,e);const o={token:this.token,model:this.model?JSON.parse(JSON.stringify(this.model)):null};let r=xt(t,JSON.stringify(o),e);const l=typeof Blob<"u"?new Blob([r]).size:r.length;if(o.model&&l>4096){o.model={id:(a=o==null?void 0:o.model)==null?void 0:a.id,email:(c=o==null?void 0:o.model)==null?void 0:c.email};const h=["collectionId","username","verified"];for(const u in this.model)h.includes(u)&&(o.model[u]=this.model[u]);r=xt(t,JSON.stringify(o),e)}return r}onChange(e,t=!1){return this._onChangeCallbacks.push(e),t&&e(this.token,this.model),()=>{for(let n=this._onChangeCallbacks.length-1;n>=0;n--)if(this._onChangeCallbacks[n]==e)return delete this._onChangeCallbacks[n],void this._onChangeCallbacks.splice(n,1)}}triggerChange(){for(const e of this._onChangeCallbacks)e&&e(this.token,this.model)}}class Xn extends Yn{constructor(e="pocketbase_auth"){super(),this.storageFallback={},this.storageKey=e,this._bindStorageEvent()}get token(){return(this._storageGet(this.storageKey)||{}).token||""}get model(){return(this._storageGet(this.storageKey)||{}).model||null}save(e,t){this._storageSet(this.storageKey,{token:e,model:t}),super.save(e,t)}clear(){this._storageRemove(this.storageKey),super.clear()}_storageGet(e){if(typeof window<"u"&&(window!=null&&window.localStorage)){const t=window.localStorage.getItem(e)||"";try{return JSON.parse(t)}catch{return t}}return this.storageFallback[e]}_storageSet(e,t){if(typeof window<"u"&&(window!=null&&window.localStorage)){let n=t;typeof t!="string"&&(n=JSON.stringify(t)),window.localStorage.setItem(e,n)}else this.storageFallback[e]=t}_storageRemove(e){var t;typeof window<"u"&&(window!=null&&window.localStorage)&&((t=window.localStorage)==null||t.removeItem(e)),delete this.storageFallback[e]}_bindStorageEvent(){typeof window<"u"&&(window!=null&&window.localStorage)&&window.addEventListener&&window.addEventListener("storage",e=>{if(e.key!=this.storageKey)return;const t=this._storageGet(this.storageKey)||{};super.save(t.token||"",t.model||null)})}}class we{constructor(e){this.client=e}}class es extends we{async getAll(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/settings",e)}async update(e,t){return t=Object.assign({method:"PATCH",body:e},t),this.client.send("/api/settings",t)}async testS3(e="storage",t){return t=Object.assign({method:"POST",body:{filesystem:e}},t),this.client.send("/api/settings/test/s3",t).then(()=>!0)}async testEmail(e,t,n){return n=Object.assign({method:"POST",body:{email:e,template:t}},n),this.client.send("/api/settings/test/email",n).then(()=>!0)}async generateAppleClientSecret(e,t,n,i,o,r){return r=Object.assign({method:"POST",body:{clientId:e,teamId:t,keyId:n,privateKey:i,duration:o}},r),this.client.send("/api/settings/apple/generate-client-secret",r)}}class pt extends we{decode(e){return e}async getFullList(e,t){if(typeof e=="number")return this._getFullList(e,t);let n=500;return(t=Object.assign({},e,t)).batch&&(n=t.batch,delete t.batch),this._getFullList(n,t)}async getList(e=1,t=30,n){return(n=Object.assign({method:"GET"},n)).query=Object.assign({page:e,perPage:t},n.query),this.client.send(this.baseCrudPath,n).then(i=>{var o;return i.items=((o=i.items)==null?void 0:o.map(r=>this.decode(r)))||[],i})}async getFirstListItem(e,t){return(t=Object.assign({requestKey:"one_by_filter_"+this.baseCrudPath+"_"+e},t)).query=Object.assign({filter:e,skipTotal:1},t.query),this.getList(1,1,t).then(n=>{var i;if(!((i=n==null?void 0:n.items)!=null&&i.length))throw new Y({status:404,response:{code:404,message:"The requested resource wasn't found.",data:{}}});return n.items[0]})}async getOne(e,t){if(!e)throw new Y({url:this.client.buildUrl(this.baseCrudPath+"/"),status:404,response:{code:404,message:"Missing required record id.",data:{}}});return t=Object.assign({method:"GET"},t),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e),t).then(n=>this.decode(n))}async create(e,t){return t=Object.assign({method:"POST",body:e},t),this.client.send(this.baseCrudPath,t).then(n=>this.decode(n))}async update(e,t,n){return n=Object.assign({method:"PATCH",body:t},n),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e),n).then(i=>this.decode(i))}async delete(e,t){return t=Object.assign({method:"DELETE"},t),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e),t).then(()=>!0)}_getFullList(e=500,t){(t=t||{}).query=Object.assign({skipTotal:1},t.query);let n=[],i=async o=>this.getList(o,e||500,t).then(r=>{const l=r.items;return n=n.concat(l),l.length==r.perPage?i(o+1):n});return i(1)}}function J(s,e,t,n){const i=n!==void 0;return i||t!==void 0?i?(console.warn(s),e.body=Object.assign({},e.body,t),e.query=Object.assign({},e.query,n),e):Object.assign(e,t):e}function tt(s){var e;(e=s._resetAutoRefresh)==null||e.call(s)}class ts extends pt{get baseCrudPath(){return"/api/admins"}async update(e,t,n){return super.update(e,t,n).then(i=>{var o,r;return((o=this.client.authStore.model)==null?void 0:o.id)===i.id&&((r=this.client.authStore.model)==null?void 0:r.collectionId)===void 0&&this.client.authStore.save(this.client.authStore.token,i),i})}async delete(e,t){return super.delete(e,t).then(n=>{var i,o;return n&&((i=this.client.authStore.model)==null?void 0:i.id)===e&&((o=this.client.authStore.model)==null?void 0:o.collectionId)===void 0&&this.client.authStore.clear(),n})}authResponse(e){const t=this.decode((e==null?void 0:e.admin)||{});return e!=null&&e.token&&(e!=null&&e.admin)&&this.client.authStore.save(e.token,t),Object.assign({},e,{token:(e==null?void 0:e.token)||"",admin:t})}async authWithPassword(e,t,n,i){let o={method:"POST",body:{identity:e,password:t}};o=J("This form of authWithPassword(email, pass, body?, query?) is deprecated. Consider replacing it with authWithPassword(email, pass, options?).",o,n,i);const r=o.autoRefreshThreshold;delete o.autoRefreshThreshold,o.autoRefresh||tt(this.client);let l=await this.client.send(this.baseCrudPath+"/auth-with-password",o);return l=this.authResponse(l),r&&function(c,h,u,f){tt(c);const d=c.beforeSend,p=c.authStore.model,b=c.authStore.onChange((g,m)=>{(!g||(m==null?void 0:m.id)!=(p==null?void 0:p.id)||(m!=null&&m.collectionId||p!=null&&p.collectionId)&&(m==null?void 0:m.collectionId)!=(p==null?void 0:p.collectionId))&&tt(c)});c._resetAutoRefresh=function(){b(),c.beforeSend=d,delete c._resetAutoRefresh},c.beforeSend=async(g,m)=>{var P;const q=c.authStore.token;if((P=m.query)!=null&&P.autoRefresh)return d?d(g,m):{url:g,sendOptions:m};let O=c.authStore.isValid;if(O&&_n(c.authStore.token,h))try{await u()}catch{O=!1}O||await f();const x=m.headers||{};for(let E in x)if(E.toLowerCase()=="authorization"&&q==x[E]&&c.authStore.token){x[E]=c.authStore.token;break}return m.headers=x,d?d(g,m):{url:g,sendOptions:m}}}(this.client,r,()=>this.authRefresh({autoRefresh:!0}),()=>this.authWithPassword(e,t,Object.assign({autoRefresh:!0},o))),l}async authRefresh(e,t){let n={method:"POST"};return n=J("This form of authRefresh(body?, query?) is deprecated. Consider replacing it with authRefresh(options?).",n,e,t),this.client.send(this.baseCrudPath+"/auth-refresh",n).then(this.authResponse.bind(this))}async requestPasswordReset(e,t,n){let i={method:"POST",body:{email:e}};return i=J("This form of requestPasswordReset(email, body?, query?) is deprecated. Consider replacing it with requestPasswordReset(email, options?).",i,t,n),this.client.send(this.baseCrudPath+"/request-password-reset",i).then(()=>!0)}async confirmPasswordReset(e,t,n,i,o){let r={method:"POST",body:{token:e,password:t,passwordConfirm:n}};return r=J("This form of confirmPasswordReset(resetToken, password, passwordConfirm, body?, query?) is deprecated. Consider replacing it with confirmPasswordReset(resetToken, password, passwordConfirm, options?).",r,i,o),this.client.send(this.baseCrudPath+"/confirm-password-reset",r).then(()=>!0)}}const ns=["requestKey","$cancelKey","$autoCancel","fetch","headers","body","query","params","cache","credentials","headers","integrity","keepalive","method","mode","redirect","referrer","referrerPolicy","signal","window"];function kn(s){if(s){s.query=s.query||{};for(let e in s)ns.includes(e)||(s.query[e]=s[e],delete s[e])}}class wn extends we{constructor(){super(...arguments),this.clientId="",this.eventSource=null,this.subscriptions={},this.lastSentSubscriptions=[],this.maxConnectTimeout=15e3,this.reconnectAttempts=0,this.maxReconnectAttempts=1/0,this.predefinedReconnectIntervals=[200,300,500,1e3,1200,1500,2e3],this.pendingConnects=[]}get isConnected(){return!!this.eventSource&&!!this.clientId&&!this.pendingConnects.length}async subscribe(e,t,n){var r;if(!e)throw new Error("topic must be set.");let i=e;if(n){kn(n);const l="options="+encodeURIComponent(JSON.stringify({query:n.query,headers:n.headers}));i+=(i.includes("?")?"&":"?")+l}const o=function(l){const a=l;let c;try{c=JSON.parse(a==null?void 0:a.data)}catch{}t(c||{})};return this.subscriptions[i]||(this.subscriptions[i]=[]),this.subscriptions[i].push(o),this.isConnected?this.subscriptions[i].length===1?await this.submitSubscriptions():(r=this.eventSource)==null||r.addEventListener(i,o):await this.connect(),async()=>this.unsubscribeByTopicAndListener(e,o)}async unsubscribe(e){var n;let t=!1;if(e){const i=this.getSubscriptionsByTopic(e);for(let o in i)if(this.hasSubscriptionListeners(o)){for(let r of this.subscriptions[o])(n=this.eventSource)==null||n.removeEventListener(o,r);delete this.subscriptions[o],t||(t=!0)}}else this.subscriptions={};this.hasSubscriptionListeners()?t&&await this.submitSubscriptions():this.disconnect()}async unsubscribeByPrefix(e){var n;let t=!1;for(let i in this.subscriptions)if((i+"?").startsWith(e)){t=!0;for(let o of this.subscriptions[i])(n=this.eventSource)==null||n.removeEventListener(i,o);delete this.subscriptions[i]}t&&(this.hasSubscriptionListeners()?await this.submitSubscriptions():this.disconnect())}async unsubscribeByTopicAndListener(e,t){var o;let n=!1;const i=this.getSubscriptionsByTopic(e);for(let r in i){if(!Array.isArray(this.subscriptions[r])||!this.subscriptions[r].length)continue;let l=!1;for(let a=this.subscriptions[r].length-1;a>=0;a--)this.subscriptions[r][a]===t&&(l=!0,delete this.subscriptions[r][a],this.subscriptions[r].splice(a,1),(o=this.eventSource)==null||o.removeEventListener(r,t));l&&(this.subscriptions[r].length||delete this.subscriptions[r],n||this.hasSubscriptionListeners(r)||(n=!0))}this.hasSubscriptionListeners()?n&&await this.submitSubscriptions():this.disconnect()}hasSubscriptionListeners(e){var t,n;if(this.subscriptions=this.subscriptions||{},e)return!!((t=this.subscriptions[e])!=null&&t.length);for(let i in this.subscriptions)if((n=this.subscriptions[i])!=null&&n.length)return!0;return!1}async submitSubscriptions(){if(this.clientId)return this.addAllSubscriptionListeners(),this.lastSentSubscriptions=this.getNonEmptySubscriptionKeys(),this.client.send("/api/realtime",{method:"POST",body:{clientId:this.clientId,subscriptions:this.lastSentSubscriptions},requestKey:this.getSubscriptionsCancelKey()}).catch(e=>{if(!(e!=null&&e.isAbort))throw e})}getSubscriptionsCancelKey(){return"realtime_"+this.clientId}getSubscriptionsByTopic(e){const t={};e=e.includes("?")?e:e+"?";for(let n in this.subscriptions)(n+"?").startsWith(e)&&(t[n]=this.subscriptions[n]);return t}getNonEmptySubscriptionKeys(){const e=[];for(let t in this.subscriptions)this.subscriptions[t].length&&e.push(t);return e}addAllSubscriptionListeners(){if(this.eventSource){this.removeAllSubscriptionListeners();for(let e in this.subscriptions)for(let t of this.subscriptions[e])this.eventSource.addEventListener(e,t)}}removeAllSubscriptionListeners(){if(this.eventSource)for(let e in this.subscriptions)for(let t of this.subscriptions[e])this.eventSource.removeEventListener(e,t)}async connect(){if(!(this.reconnectAttempts>0))return new Promise((e,t)=>{this.pendingConnects.push({resolve:e,reject:t}),this.pendingConnects.length>1||this.initConnect()})}initConnect(){this.disconnect(!0),clearTimeout(this.connectTimeoutId),this.connectTimeoutId=setTimeout(()=>{this.connectErrorHandler(new Error("EventSource connect took too long."))},this.maxConnectTimeout),this.eventSource=new EventSource(this.client.buildUrl("/api/realtime")),this.eventSource.onerror=e=>{this.connectErrorHandler(new Error("Failed to establish realtime connection."))},this.eventSource.addEventListener("PB_CONNECT",e=>{const t=e;this.clientId=t==null?void 0:t.lastEventId,this.submitSubscriptions().then(async()=>{let n=3;for(;this.hasUnsentSubscriptions()&&n>0;)n--,await this.submitSubscriptions()}).then(()=>{for(let i of this.pendingConnects)i.resolve();this.pendingConnects=[],this.reconnectAttempts=0,clearTimeout(this.reconnectTimeoutId),clearTimeout(this.connectTimeoutId);const n=this.getSubscriptionsByTopic("PB_CONNECT");for(let i in n)for(let o of n[i])o(e)}).catch(n=>{this.clientId="",this.connectErrorHandler(n)})})}hasUnsentSubscriptions(){const e=this.getNonEmptySubscriptionKeys();if(e.length!=this.lastSentSubscriptions.length)return!0;for(const t of e)if(!this.lastSentSubscriptions.includes(t))return!0;return!1}connectErrorHandler(e){if(clearTimeout(this.connectTimeoutId),clearTimeout(this.reconnectTimeoutId),!this.clientId&&!this.reconnectAttempts||this.reconnectAttempts>this.maxReconnectAttempts){for(let n of this.pendingConnects)n.reject(new Y(e));return this.pendingConnects=[],void this.disconnect()}this.disconnect(!0);const t=this.predefinedReconnectIntervals[this.reconnectAttempts]||this.predefinedReconnectIntervals[this.predefinedReconnectIntervals.length-1];this.reconnectAttempts++,this.reconnectTimeoutId=setTimeout(()=>{this.initConnect()},t)}disconnect(e=!1){var t;if(clearTimeout(this.connectTimeoutId),clearTimeout(this.reconnectTimeoutId),this.removeAllSubscriptionListeners(),this.client.cancelRequest(this.getSubscriptionsCancelKey()),(t=this.eventSource)==null||t.close(),this.eventSource=null,this.clientId="",!e){this.reconnectAttempts=0;for(let n of this.pendingConnects)n.resolve();this.pendingConnects=[]}}}class ss extends pt{constructor(e,t){super(e),this.collectionIdOrName=t}get baseCrudPath(){return this.baseCollectionPath+"/records"}get baseCollectionPath(){return"/api/collections/"+encodeURIComponent(this.collectionIdOrName)}async subscribe(e,t,n){if(!e)throw new Error("Missing topic.");if(!t)throw new Error("Missing subscription callback.");return this.client.realtime.subscribe(this.collectionIdOrName+"/"+e,t,n)}async unsubscribe(e){return e?this.client.realtime.unsubscribe(this.collectionIdOrName+"/"+e):this.client.realtime.unsubscribeByPrefix(this.collectionIdOrName)}async getFullList(e,t){if(typeof e=="number")return super.getFullList(e,t);const n=Object.assign({},e,t);return super.getFullList(n)}async getList(e=1,t=30,n){return super.getList(e,t,n)}async getFirstListItem(e,t){return super.getFirstListItem(e,t)}async getOne(e,t){return super.getOne(e,t)}async create(e,t){return super.create(e,t)}async update(e,t,n){return super.update(e,t,n).then(i=>{var o,r,l;return((o=this.client.authStore.model)==null?void 0:o.id)!==(i==null?void 0:i.id)||((r=this.client.authStore.model)==null?void 0:r.collectionId)!==this.collectionIdOrName&&((l=this.client.authStore.model)==null?void 0:l.collectionName)!==this.collectionIdOrName||this.client.authStore.save(this.client.authStore.token,i),i})}async delete(e,t){return super.delete(e,t).then(n=>{var i,o,r;return!n||((i=this.client.authStore.model)==null?void 0:i.id)!==e||((o=this.client.authStore.model)==null?void 0:o.collectionId)!==this.collectionIdOrName&&((r=this.client.authStore.model)==null?void 0:r.collectionName)!==this.collectionIdOrName||this.client.authStore.clear(),n})}authResponse(e){const t=this.decode((e==null?void 0:e.record)||{});return this.client.authStore.save(e==null?void 0:e.token,t),Object.assign({},e,{token:(e==null?void 0:e.token)||"",record:t})}async listAuthMethods(e){return e=Object.assign({method:"GET"},e),this.client.send(this.baseCollectionPath+"/auth-methods",e).then(t=>Object.assign({},t,{usernamePassword:!!(t!=null&&t.usernamePassword),emailPassword:!!(t!=null&&t.emailPassword),authProviders:Array.isArray(t==null?void 0:t.authProviders)?t==null?void 0:t.authProviders:[]}))}async authWithPassword(e,t,n,i){let o={method:"POST",body:{identity:e,password:t}};return o=J("This form of authWithPassword(usernameOrEmail, pass, body?, query?) is deprecated. Consider replacing it with authWithPassword(usernameOrEmail, pass, options?).",o,n,i),this.client.send(this.baseCollectionPath+"/auth-with-password",o).then(r=>this.authResponse(r))}async authWithOAuth2Code(e,t,n,i,o,r,l){let a={method:"POST",body:{provider:e,code:t,codeVerifier:n,redirectUrl:i,createData:o}};return a=J("This form of authWithOAuth2Code(provider, code, codeVerifier, redirectUrl, createData?, body?, query?) is deprecated. Consider replacing it with authWithOAuth2Code(provider, code, codeVerifier, redirectUrl, createData?, options?).",a,r,l),this.client.send(this.baseCollectionPath+"/auth-with-oauth2",a).then(c=>this.authResponse(c))}async authWithOAuth2(...e){if(e.length>1||typeof(e==null?void 0:e[0])=="string")return console.warn("PocketBase: This form of authWithOAuth2() is deprecated and may get removed in the future. Please replace with authWithOAuth2Code() OR use the authWithOAuth2() realtime form as shown in https://pocketbase.io/docs/authentication/#oauth2-integration."),this.authWithOAuth2Code((e==null?void 0:e[0])||"",(e==null?void 0:e[1])||"",(e==null?void 0:e[2])||"",(e==null?void 0:e[3])||"",(e==null?void 0:e[4])||{},(e==null?void 0:e[5])||{},(e==null?void 0:e[6])||{});const t=(e==null?void 0:e[0])||{},n=(await this.listAuthMethods()).authProviders.find(a=>a.name===t.provider);if(!n)throw new Y(new Error(`Missing or invalid provider "${t.provider}".`));const i=this.client.buildUrl("/api/oauth2-redirect"),o=new wn(this.client);let r=null;function l(){r==null||r.close(),o.unsubscribe()}return t.urlCallback||(r=Ot(void 0)),new Promise(async(a,c)=>{var h;try{await o.subscribe("@oauth2",async p=>{const b=o.clientId;try{if(!p.state||b!==p.state)throw new Error("State parameters don't match.");if(p.error||!p.code)throw new Error("OAuth2 redirect error or missing code: "+p.error);const g=Object.assign({},t);delete g.provider,delete g.scopes,delete g.createData,delete g.urlCallback;const m=await this.authWithOAuth2Code(n.name,p.code,n.codeVerifier,i,t.createData,g);a(m)}catch(g){c(new Y(g))}l()});const u={state:o.clientId};(h=t.scopes)!=null&&h.length&&(u.scope=t.scopes.join(" "));const f=this._replaceQueryParams(n.authUrl+i,u);await(t.urlCallback||function(p){r?r.location.href=p:r=Ot(p)})(f)}catch(u){l(),c(new Y(u))}})}async authRefresh(e,t){let n={method:"POST"};return n=J("This form of authRefresh(body?, query?) is deprecated. Consider replacing it with authRefresh(options?).",n,e,t),this.client.send(this.baseCollectionPath+"/auth-refresh",n).then(i=>this.authResponse(i))}async requestPasswordReset(e,t,n){let i={method:"POST",body:{email:e}};return i=J("This form of requestPasswordReset(email, body?, query?) is deprecated. Consider replacing it with requestPasswordReset(email, options?).",i,t,n),this.client.send(this.baseCollectionPath+"/request-password-reset",i).then(()=>!0)}async confirmPasswordReset(e,t,n,i,o){let r={method:"POST",body:{token:e,password:t,passwordConfirm:n}};return r=J("This form of confirmPasswordReset(token, password, passwordConfirm, body?, query?) is deprecated. Consider replacing it with confirmPasswordReset(token, password, passwordConfirm, options?).",r,i,o),this.client.send(this.baseCollectionPath+"/confirm-password-reset",r).then(()=>!0)}async requestVerification(e,t,n){let i={method:"POST",body:{email:e}};return i=J("This form of requestVerification(email, body?, query?) is deprecated. Consider replacing it with requestVerification(email, options?).",i,t,n),this.client.send(this.baseCollectionPath+"/request-verification",i).then(()=>!0)}async confirmVerification(e,t,n){let i={method:"POST",body:{token:e}};return i=J("This form of confirmVerification(token, body?, query?) is deprecated. Consider replacing it with confirmVerification(token, options?).",i,t,n),this.client.send(this.baseCollectionPath+"/confirm-verification",i).then(()=>{const o=Pe(e),r=this.client.authStore.model;return r&&!r.verified&&r.id===o.id&&r.collectionId===o.collectionId&&(r.verified=!0,this.client.authStore.save(this.client.authStore.token,r)),!0})}async requestEmailChange(e,t,n){let i={method:"POST",body:{newEmail:e}};return i=J("This form of requestEmailChange(newEmail, body?, query?) is deprecated. Consider replacing it with requestEmailChange(newEmail, options?).",i,t,n),this.client.send(this.baseCollectionPath+"/request-email-change",i).then(()=>!0)}async confirmEmailChange(e,t,n,i){let o={method:"POST",body:{token:e,password:t}};return o=J("This form of confirmEmailChange(token, password, body?, query?) is deprecated. Consider replacing it with confirmEmailChange(token, password, options?).",o,n,i),this.client.send(this.baseCollectionPath+"/confirm-email-change",o).then(()=>{const r=Pe(e),l=this.client.authStore.model;return l&&l.id===r.id&&l.collectionId===r.collectionId&&this.client.authStore.clear(),!0})}async listExternalAuths(e,t){return t=Object.assign({method:"GET"},t),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e)+"/external-auths",t)}async unlinkExternalAuth(e,t,n){return n=Object.assign({method:"DELETE"},n),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e)+"/external-auths/"+encodeURIComponent(t),n).then(()=>!0)}_replaceQueryParams(e,t={}){let n=e,i="";e.indexOf("?")>=0&&(n=e.substring(0,e.indexOf("?")),i=e.substring(e.indexOf("?")+1));const o={},r=i.split("&");for(const l of r){if(l=="")continue;const a=l.split("=");o[decodeURIComponent(a[0].replace(/\+/g," "))]=decodeURIComponent((a[1]||"").replace(/\+/g," "))}for(let l in t)t.hasOwnProperty(l)&&(t[l]==null?delete o[l]:o[l]=t[l]);i="";for(let l in o)o.hasOwnProperty(l)&&(i!=""&&(i+="&"),i+=encodeURIComponent(l.replace(/%20/g,"+"))+"="+encodeURIComponent(o[l].replace(/%20/g,"+")));return i!=""?n+"?"+i:n}}function Ot(s){if(typeof window>"u"||!(window!=null&&window.open))throw new Y(new Error("Not in a browser context - please pass a custom urlCallback function."));let e=1024,t=768,n=window.innerWidth,i=window.innerHeight;e=e>n?n:e,t=t>i?i:t;let o=n/2-e/2,r=i/2-t/2;return window.open(s,"popup_window","width="+e+",height="+t+",top="+r+",left="+o+",resizable,menubar=no")}class is extends pt{get baseCrudPath(){return"/api/collections"}async import(e,t=!1,n){return n=Object.assign({method:"PUT",body:{collections:e,deleteMissing:t}},n),this.client.send(this.baseCrudPath+"/import",n).then(()=>!0)}}class os extends we{async getList(e=1,t=30,n){return(n=Object.assign({method:"GET"},n)).query=Object.assign({page:e,perPage:t},n.query),this.client.send("/api/logs",n)}async getOne(e,t){if(!e)throw new Y({url:this.client.buildUrl("/api/logs/"),status:404,response:{code:404,message:"Missing required log id.",data:{}}});return t=Object.assign({method:"GET"},t),this.client.send("/api/logs/"+encodeURIComponent(e),t)}async getStats(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/logs/stats",e)}}class rs extends we{async check(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/health",e)}}class ls extends we{getUrl(e,t,n={}){if(!t||!(e!=null&&e.id)||!(e!=null&&e.collectionId)&&!(e!=null&&e.collectionName))return"";const i=[];i.push("api"),i.push("files"),i.push(encodeURIComponent(e.collectionId||e.collectionName)),i.push(encodeURIComponent(e.id)),i.push(encodeURIComponent(t));let o=this.client.buildUrl(i.join("/"));if(Object.keys(n).length){n.download===!1&&delete n.download;const r=new URLSearchParams(n);o+=(o.includes("?")?"&":"?")+r}return o}async getToken(e){return e=Object.assign({method:"POST"},e),this.client.send("/api/files/token",e).then(t=>(t==null?void 0:t.token)||"")}}class as extends we{async getFullList(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/backups",e)}async create(e,t){return t=Object.assign({method:"POST",body:{name:e}},t),this.client.send("/api/backups",t).then(()=>!0)}async upload(e,t){return t=Object.assign({method:"POST",body:e},t),this.client.send("/api/backups/upload",t).then(()=>!0)}async delete(e,t){return t=Object.assign({method:"DELETE"},t),this.client.send(`/api/backups/${encodeURIComponent(e)}`,t).then(()=>!0)}async restore(e,t){return t=Object.assign({method:"POST"},t),this.client.send(`/api/backups/${encodeURIComponent(e)}/restore`,t).then(()=>!0)}getDownloadUrl(e,t){return this.client.buildUrl(`/api/backups/${encodeURIComponent(t)}?token=${encodeURIComponent(e)}`)}}class cs{constructor(e="/",t,n="en-US"){this.cancelControllers={},this.recordServices={},this.enableAutoCancellation=!0,this.baseUrl=e,this.lang=n,this.authStore=t||new Xn,this.admins=new ts(this),this.collections=new is(this),this.files=new ls(this),this.logs=new os(this),this.settings=new es(this),this.realtime=new wn(this),this.health=new rs(this),this.backups=new as(this)}collection(e){return this.recordServices[e]||(this.recordServices[e]=new ss(this,e)),this.recordServices[e]}autoCancellation(e){return this.enableAutoCancellation=!!e,this}cancelRequest(e){return this.cancelControllers[e]&&(this.cancelControllers[e].abort(),delete this.cancelControllers[e]),this}cancelAllRequests(){for(let e in this.cancelControllers)this.cancelControllers[e].abort();return this.cancelControllers={},this}filter(e,t){if(!t)return e;for(let n in t){let i=t[n];switch(typeof i){case"boolean":case"number":i=""+i;break;case"string":i="'"+i.replace(/'/g,"\\'")+"'";break;default:i=i===null?"null":i instanceof Date?"'"+i.toISOString().replace("T"," ")+"'":"'"+JSON.stringify(i).replace(/'/g,"\\'")+"'"}e=e.replaceAll("{:"+n+"}",i)}return e}getFileUrl(e,t,n={}){return this.files.getUrl(e,t,n)}buildUrl(e){var n;let t=this.baseUrl;return typeof window>"u"||!window.location||t.startsWith("https://")||t.startsWith("http://")||(t=(n=window.location.origin)!=null&&n.endsWith("/")?window.location.origin.substring(0,window.location.origin.length-1):window.location.origin||"",this.baseUrl.startsWith("/")||(t+=window.location.pathname||"/",t+=t.endsWith("/")?"":"/"),t+=this.baseUrl),e&&(t+=t.endsWith("/")?"":"/",t+=e.startsWith("/")?e.substring(1):e),t}async send(e,t){t=this.initSendOptions(e,t);let n=this.buildUrl(e);if(this.beforeSend){const i=Object.assign({},await this.beforeSend(n,t));i.url!==void 0||i.options!==void 0?(n=i.url||n,t=i.options||t):Object.keys(i).length&&(t=i,console!=null&&console.warn&&console.warn("Deprecated format of beforeSend return: please use `return { url, options }`, instead of `return options`."))}if(t.query!==void 0){const i=this.serializeQueryParams(t.query);i&&(n+=(n.includes("?")?"&":"?")+i),delete t.query}return this.getHeader(t.headers,"Content-Type")=="application/json"&&t.body&&typeof t.body!="string"&&(t.body=JSON.stringify(t.body)),(t.fetch||fetch)(n,t).then(async i=>{let o={};try{o=await i.json()}catch{}if(this.afterSend&&(o=await this.afterSend(i,o)),i.status>=400)throw new Y({url:i.url,status:i.status,data:o});return o}).catch(i=>{throw new Y(i)})}initSendOptions(e,t){if((t=Object.assign({method:"GET"},t)).body=this.convertToFormDataIfNeeded(t.body),kn(t),t.query=Object.assign({},t.params,t.query),t.requestKey===void 0&&(t.$autoCancel===!1||t.query.$autoCancel===!1?t.requestKey=null:(t.$cancelKey||t.query.$cancelKey)&&(t.requestKey=t.$cancelKey||t.query.$cancelKey)),delete t.$autoCancel,delete t.query.$autoCancel,delete t.$cancelKey,delete t.query.$cancelKey,this.getHeader(t.headers,"Content-Type")!==null||this.isFormData(t.body)||(t.headers=Object.assign({},t.headers,{"Content-Type":"application/json"})),this.getHeader(t.headers,"Accept-Language")===null&&(t.headers=Object.assign({},t.headers,{"Accept-Language":this.lang})),this.authStore.token&&this.getHeader(t.headers,"Authorization")===null&&(t.headers=Object.assign({},t.headers,{Authorization:this.authStore.token})),this.enableAutoCancellation&&t.requestKey!==null){const n=t.requestKey||(t.method||"GET")+e;delete t.requestKey,this.cancelRequest(n);const i=new AbortController;this.cancelControllers[n]=i,t.signal=i.signal}return t}convertToFormDataIfNeeded(e){if(typeof FormData>"u"||e===void 0||typeof e!="object"||e===null||this.isFormData(e)||!this.hasBlobField(e))return e;const t=new FormData;for(const n in e){const i=e[n];if(typeof i!="object"||this.hasBlobField({data:i})){const o=Array.isArray(i)?i:[i];for(let r of o)t.append(n,r)}else{let o={};o[n]=i,t.append("@jsonPayload",JSON.stringify(o))}}return t}hasBlobField(e){for(const t in e){const n=Array.isArray(e[t])?e[t]:[e[t]];for(const i of n)if(typeof Blob<"u"&&i instanceof Blob||typeof File<"u"&&i instanceof File)return!0}return!1}getHeader(e,t){e=e||{},t=t.toLowerCase();for(let n in e)if(n.toLowerCase()==t)return e[n];return null}isFormData(e){return e&&(e.constructor.name==="FormData"||typeof FormData<"u"&&e instanceof FormData)}serializeQueryParams(e){const t=[];for(const n in e){if(e[n]===null)continue;const i=e[n],o=encodeURIComponent(n);if(Array.isArray(i))for(const r of i)t.push(o+"="+encodeURIComponent(r));else i instanceof Date?t.push(o+"="+encodeURIComponent(i.toISOString())):typeof i!==null&&typeof i=="object"?t.push(o+"="+encodeURIComponent(JSON.stringify(i))):t.push(o+"="+encodeURIComponent(i))}return t.join("&")}}const vn=[{levelId:0,final:[{pos:{x:8,y:8},skin:"square2"},{pos:{x:8,y:8},skin:"rhombus2"}],start:[{pos:{x:8,y:5},skin:"square2"},{pos:{x:8,y:11},skin:"rhombus2"}]},{levelId:1,final:[{pos:{x:8,y:8},skin:"square2"},{pos:{x:7,y:7},skin:"square2"},{pos:{x:9,y:9},skin:"square2"}],start:[{pos:{x:3,y:8},skin:"square2"},{pos:{x:8,y:8},skin:"square2"},{pos:{x:13,y:8},skin:"square2"}]},{levelId:2,final:[{pos:{x:7,y:7},skin:"triangle2_rb"},{pos:{x:9,y:9},skin:"triangle2_lt"},{pos:{x:8,y:8},skin:"square3"}],start:[{pos:{x:9,y:12},skin:"triangle2_rb"},{pos:{x:7,y:12},skin:"triangle2_lt"},{pos:{x:8,y:5},skin:"square3"}]},{levelId:3,final:[{pos:{x:7,y:6},skin:"triangle3_b"},{pos:{x:7,y:10},skin:"triangle3_t"},{pos:{x:7,y:8},skin:"rhombus3"}],start:[{pos:{x:10,y:11},skin:"triangle3_t"},{pos:{x:10,y:5},skin:"triangle3_b"},{pos:{x:5,y:8},skin:"rhombus3"}]},{levelId:4,final:[{pos:{x:9,y:9},skin:"triangled2"},{pos:{x:9,y:9},skin:"triangle3_lt"},{pos:{x:8,y:8},skin:"square2"}],start:[{pos:{x:11,y:10},skin:"triangled2"},{pos:{x:8,y:4},skin:"triangle3_lt"},{pos:{x:6,y:10},skin:"square2"}]},{levelId:5,final:[{pos:{x:8,y:8},skin:"square2"},{pos:{x:8,y:9},skin:"square2"},{pos:{x:8,y:7},skin:"square2"}],start:[{pos:{x:8,y:8},skin:"square2"},{pos:{x:12,y:8},skin:"square2"},{pos:{x:4,y:8},skin:"square2"}]},{levelId:6,final:[{pos:{x:8,y:7},skin:"triangle3_t"},{pos:{x:8,y:12},skin:"triangle3_b"},{pos:{x:8,y:11},skin:"rhombus3"}],start:[{pos:{x:10,y:11},skin:"triangle3_t"},{pos:{x:10,y:5},skin:"triangle3_b"},{pos:{x:5,y:8},skin:"rhombus3"}]},{levelId:7,final:[{pos:{x:8,y:8},skin:"triangled2"},{pos:{x:8,y:8},skin:"triangle3_lt"},{pos:{x:8,y:8},skin:"square2"}],start:[{pos:{x:11,y:10},skin:"triangled2"},{pos:{x:8,y:4},skin:"triangle3_lt"},{pos:{x:6,y:10},skin:"square2"}]},{levelId:8,final:[{pos:{x:7,y:8},skin:"rhombus3"},{pos:{x:8,y:9},skin:"rhombus3"},{pos:{x:9,y:8},skin:"rhombus3"},{pos:{x:8,y:7},skin:"rhombus3"}],start:[{pos:{x:4,y:8},skin:"rhombus3"},{pos:{x:8,y:12},skin:"rhombus3"},{pos:{x:12,y:8},skin:"rhombus3"},{pos:{x:8,y:4},skin:"rhombus3"}]},{levelId:9,final:[{pos:{x:7,y:9},skin:"square2"},{pos:{x:9,y:9},skin:"square2"},{pos:{x:7,y:7},skin:"square2"}],start:[{pos:{x:8,y:8},skin:"square2"},{pos:{x:12,y:8},skin:"square2"},{pos:{x:4,y:8},skin:"square2"}]},{levelId:10,final:[{pos:{x:8,y:8},skin:"rhombus2"},{pos:{x:7,y:8},skin:"rhomboid2_end"},{pos:{x:7,y:8},skin:"rhomboid2_start"}],start:[{pos:{x:8,y:8},skin:"rhombus2"},{pos:{x:4,y:7},skin:"rhomboid2_end"},{pos:{x:12,y:8},skin:"rhomboid2_start"}]},{levelId:11,final:[{pos:{x:8,y:11},skin:"trapezoid4_tr"},{pos:{x:8,y:7},skin:"trapezoid4_bl"},{pos:{x:8,y:11},skin:"rhombus2"}],start:[{pos:{x:3,y:8},skin:"trapezoid4_tr"},{pos:{x:13,y:8},skin:"trapezoid4_bl"},{pos:{x:8,y:8},skin:"rhombus2"}]},{levelId:12,final:[{pos:{x:8,y:9},skin:"down4"},{pos:{x:8,y:6},skin:"trapezoid4_br"},{pos:{x:8,y:6},skin:"trapezoid4_bl"},{pos:{x:8,y:8},skin:"rhombus2"}],start:[{pos:{x:8,y:5},skin:"down4"},{pos:{x:11,y:7},skin:"trapezoid4_br"},{pos:{x:5,y:7},skin:"trapezoid4_bl"},{pos:{x:8,y:10},skin:"rhombus2"}]},{levelId:13,final:[{pos:{x:9,y:9},skin:"up4"},{pos:{x:7,y:9},skin:"up4"},{pos:{x:8,y:8},skin:"triangle3_t"}],start:[{pos:{x:8,y:9},skin:"up4"},{pos:{x:8,y:12},skin:"up4"},{pos:{x:8,y:5},skin:"triangle3_t"}]},{levelId:14,final:[{pos:{x:8,y:9},skin:"down4"},{pos:{x:8,y:7},skin:"triangle3_t"},{pos:{x:8,y:7},skin:"rhombus2"}],start:[{pos:{x:5,y:10},skin:"down4"},{pos:{x:8,y:5},skin:"triangle3_t"},{pos:{x:11,y:9},skin:"rhombus2"}]},{levelId:15,final:[{pos:{x:9,y:8},skin:"rhombus2"},{pos:{x:7,y:8},skin:"rhombus2"},{pos:{x:8,y:9},skin:"trapezoid4_tl"},{pos:{x:8,y:7},skin:"trapezoid4_bl"}],start:[{pos:{x:11,y:11},skin:"rhombus2"},{pos:{x:6,y:4},skin:"rhombus2"},{pos:{x:11,y:7},skin:"trapezoid4_tl"},{pos:{x:6,y:8},skin:"trapezoid4_bl"}]},{levelId:16,final:[{pos:{x:8,y:9},skin:"triangle2_rt"},{pos:{x:8,y:7},skin:"triangle2_lb"},{pos:{x:8,y:8},skin:"down4"},{pos:{x:8,y:9},skin:"up4"}],start:[{pos:{x:11,y:8},skin:"triangle2_rt"},{pos:{x:5,y:8},skin:"triangle2_lb"},{pos:{x:6,y:7},skin:"down4"},{pos:{x:10,y:10},skin:"up4"}]},{levelId:17,final:[{pos:{x:8,y:9},skin:"triangle2_rt"},{pos:{x:8,y:9},skin:"triangle2_lb"},{pos:{x:8,y:10},skin:"down4"},{pos:{x:8,y:7},skin:"up4"},{pos:{x:8,y:9},skin:"rhombus2"}],start:[{pos:{x:12,y:8},skin:"triangle2_rt"},{pos:{x:4,y:8},skin:"triangle2_lb"},{pos:{x:8,y:3},skin:"down4"},{pos:{x:8,y:14},skin:"up4"},{pos:{x:8,y:8},skin:"rhombus2"}]},{levelId:18,final:[{pos:{x:9,y:7},skin:"trapezoid4_bl"},{pos:{x:7,y:9},skin:"trapezoid4_tr"},{pos:{x:7,y:10},skin:"down4"},{pos:{x:9,y:7},skin:"up4"}],start:[{pos:{x:11,y:5},skin:"trapezoid4_bl"},{pos:{x:5,y:11},skin:"trapezoid4_tr"},{pos:{x:8,y:3},skin:"down4"},{pos:{x:8,y:14},skin:"up4"}]},{levelId:19,final:[{pos:{x:8,y:6},skin:"trapezoid4_bl"},{pos:{x:8,y:10},skin:"trapezoid4_tr"},{pos:{x:8,y:7},skin:"down4"},{pos:{x:8,y:10},skin:"up4"},{pos:{x:8,y:8},skin:"rhombus2"}],start:[{pos:{x:5,y:5},skin:"trapezoid4_bl"},{pos:{x:11,y:11},skin:"trapezoid4_tr"},{pos:{x:11,y:6},skin:"down4"},{pos:{x:5,y:11},skin:"up4"},{pos:{x:8,y:8},skin:"rhombus2"}]},{levelId:20,final:[{pos:{x:8,y:7},skin:"rhombus2"},{pos:{x:6,y:9},skin:"right2"},{pos:{x:10,y:9},skin:"left2"},{pos:{x:8,y:6},skin:"down4"},{pos:{x:8,y:9},skin:"rhombus2"}],start:[{pos:{x:8,y:13},skin:"rhombus2"},{pos:{x:6,y:10},skin:"right2"},{pos:{x:10,y:10},skin:"left2"},{pos:{x:8,y:8},skin:"down4"},{pos:{x:8,y:4},skin:"rhombus2"}]},{levelId:21,final:[{pos:{x:8,y:8},skin:"rhombus2"},{pos:{x:8,y:10},skin:"trapezoid4_tl"},{pos:{x:8,y:6},skin:"trapezoid4_bl"},{pos:{x:8,y:11},skin:"down4"}],start:[{pos:{x:12,y:8},skin:"rhombus2"},{pos:{x:9,y:5},skin:"trapezoid4_tl"},{pos:{x:7,y:10},skin:"trapezoid4_bl"},{pos:{x:4,y:8},skin:"down4"}]},{levelId:22,final:[{pos:{x:8,y:7},skin:"down4"},{pos:{x:8,y:8},skin:"up4"},{pos:{x:10,y:8},skin:"left2"},{pos:{x:8,y:8},skin:"right2"}],start:[{pos:{x:8,y:6},skin:"down4"},{pos:{x:8,y:11},skin:"up4"},{pos:{x:11,y:8},skin:"left2"},{pos:{x:5,y:8},skin:"right2"}]},{levelId:23,final:[{pos:{x:8,y:8},skin:"triangle2_rt"},{pos:{x:8,y:8},skin:"triangle2_lb"},{pos:{x:8,y:7},skin:"down4"},{pos:{x:8,y:10},skin:"up4"},{pos:{x:8,y:8},skin:"rhombus2"}],start:[{pos:{x:11,y:7},skin:"triangle2_rt"},{pos:{x:5,y:9},skin:"triangle2_lb"},{pos:{x:5,y:6},skin:"down4"},{pos:{x:11,y:11},skin:"up4"},{pos:{x:8,y:8},skin:"rhombus2"}]},{levelId:24,final:[{pos:{x:8,y:10},skin:"rhombus3"},{pos:{x:8,y:11},skin:"left2"},{pos:{x:8,y:11},skin:"right2"},{pos:{x:8,y:7},skin:"up4"},{pos:{x:8,y:8},skin:"down4"}],start:[{pos:{x:8,y:8},skin:"rhombus3"},{pos:{x:4,y:8},skin:"left2"},{pos:{x:12,y:8},skin:"right2"},{pos:{x:8,y:4},skin:"up4"},{pos:{x:8,y:13},skin:"down4"}]}];let He=Ee({}),je=Ee({});new cs("https://db.cubiq.dev/");const Qe=s=>(s==null?void 0:s.length)<2?"M 0 0 Z":s.map((e,t)=>`${t===0?"M":"L"} ${e.x} ${e.y}`).join(" ")+" Z",Pt=(s,e)=>Math.round(s*10**e)/10**e,us=s=>{const e=s.map(({skin:n,path:i,origin:o})=>({[n]:{path:i,origin:o}}));return Object.assign({},...e)},at=s=>{const e=s.reduce((t,n)=>({x:t.x+n.pos.x,y:t.y+n.pos.y}),{x:0,y:0});return{x:e.x/s.length,y:e.y/s.length}};let Ke={};je.subscribe(s=>{Ke=s});const fs=async s=>{const e="lid_"+s;return Ke[e]||je.update(t=>(t[e]=vn.find(n=>n.levelId===s),t)),Ke[e]},Ze=(s,e)=>({x:Pt(s.x-e.x,2),y:Pt(s.y-e.y,2)}),hs=(s,e)=>s.x===e.x&&s.y===e.y;function ds(s){let e,t,n,i,o,r,l,a,c,h;return{c(){e=F("div"),t=me("svg"),n=me("path"),w(n,"d",i=Qe(s[1].path)),w(n,"class","svelte-98wpx9"),w(t,"width","100%"),w(t,"height","100%"),w(t,"viewBox",o=s[9](s[1].origin)),w(t,"preserveAspectRatio","none"),w(t,"fill","currentColor"),w(t,"class","svelte-98wpx9"),w(e,"role","cell"),w(e,"tabindex","-1"),w(e,"class","svelte-98wpx9"),H(e,"hidden",s[3]),H(e,"shake",s[2]),ne(e,"--y",`${s[4].y}%`),ne(e,"--x",`${s[4].x}%`)},m(u,f){$(u,e,f),V(e,t),V(t,n),a=!0,c||(h=[te(window,"mousemove",s[6]),te(window,"touchmove",s[6]),te(window,"mouseup",s[8]),te(window,"touchend",s[8]),te(e,"mousedown",it(s[7])),te(e,"touchstart",it(s[7]))],c=!0)},p(u,[f]){s=u,(!a||f&2&&i!==(i=Qe(s[1].path)))&&w(n,"d",i),(!a||f&2&&o!==(o=s[9](s[1].origin)))&&w(t,"viewBox",o),(!a||f&8)&&H(e,"hidden",s[3]),(!a||f&4)&&H(e,"shake",s[2]),f&16&&ne(e,"--y",`${s[4].y}%`),f&16&&ne(e,"--x",`${s[4].x}%`)},i(u){a||(X(()=>{a&&(l&&l.end(1),r=dn(e,ie,{duration:100,delay:s[10]}),r.start())}),a=!0)},o(u){r&&r.invalidate(),l=pn(e,lt,{y:300,duration:2e3,delay:200+s[0]*100,easing:Jn}),a=!1},d(u){u&&I(e),u&&l&&l.end(),c=!1,ae(h)}}}function ps(s,e,t){let n,{introDelay:i=-1}=e,{shapeSkin:o}=e,{shake:r=!1}=e,{hidden:l=!1}=e,{boardPoints:a=[]}=e,{blockSize:c=1}=e,h=!1,u={x:0,y:0},{shape:f=null}=e;const d=k=>k/c,p=()=>Math.random()*100,b=Vn({x:p(),y:p()},{stiffness:.1,damping:.25});Fe(s,b,k=>t(4,n=k));const g=k=>{let N=k.touches?k.touches[0]:k;return{x:N.clientX,y:N.clientY}},m=k=>{if(!h||r)return;const N=g(k);h&&b.set({x:d(N.x)*100-u.x,y:d(N.y)*100-u.y})},q=k=>{h=!0;const N=g(k),_=k.touches?30:0;u={x:d(N.x)*100-n.x,y:d(N.y+_)*100-n.y}},O=(k,N)=>a.flat().reduce((v,A)=>{const Be=Math.sqrt((A.x-k)**2+(A.y-N)**2);return Be<v.distance?{distance:Be,point:A}:v},{distance:1/0,point:{x:0,y:0}}).point,x=(k,N=!1)=>{const{x:_,y:v}=O(k.x,k.y);b.set({x:_/se*100,y:v/se*100}),N&&(f==null||f.setPos({x:_+.5,y:v+.5}))},P=()=>{h&&(h=!1,x({x:n.x/100*se,y:n.y/100*se},!0))},E=(k,N={x:1,y:1})=>`${k.x} ${k.y} ${N.x} ${N.y}`;let C=i==-1?0:100*i+500,T=!1;return ft(()=>{setTimeout(()=>{t(14,T=!0),x(f.pos,!0)},C)}),s.$$set=k=>{"introDelay"in k&&t(0,i=k.introDelay),"shapeSkin"in k&&t(1,o=k.shapeSkin),"shake"in k&&t(2,r=k.shake),"hidden"in k&&t(3,l=k.hidden),"boardPoints"in k&&t(11,a=k.boardPoints),"blockSize"in k&&t(12,c=k.blockSize),"shape"in k&&t(13,f=k.shape)},s.$$.update=()=>{s.$$.dirty&24576&&T&&x(f.pos)},[i,o,r,l,n,b,m,q,P,E,C,a,c,f,T]}class ms extends K{constructor(e){super(),W(this,e,ps,ds,M,{introDelay:0,shapeSkin:1,shake:2,hidden:3,boardPoints:11,blockSize:12,shape:13})}}function It(s,e,t){const n=s.slice();return n[1]=e[t],n}function Et(s,e,t){const n=s.slice();return n[4]=e[t],n}function $t(s){let e,t,n;return{c(){e=me("circle"),w(e,"r",".1"),w(e,"cx",t=s[4].x),w(e,"cy",n=s[4].y)},m(i,o){$(i,e,o)},p(i,o){o&1&&t!==(t=i[4].x)&&w(e,"cx",t),o&1&&n!==(n=i[4].y)&&w(e,"cy",n)},d(i){i&&I(e)}}}function Tt(s){let e,t=G(s[1]),n=[];for(let i=0;i<t.length;i+=1)n[i]=$t(Et(s,t,i));return{c(){for(let i=0;i<n.length;i+=1)n[i].c();e=ge()},m(i,o){for(let r=0;r<n.length;r+=1)n[r]&&n[r].m(i,o);$(i,e,o)},p(i,o){if(o&1){t=G(i[1]);let r;for(r=0;r<t.length;r+=1){const l=Et(i,t,r);n[r]?n[r].p(l,o):(n[r]=$t(l),n[r].c(),n[r].m(e.parentNode,e))}for(;r<n.length;r+=1)n[r].d(1);n.length=t.length}},d(i){i&&I(e),$e(n,i)}}}function gs(s){let e,t,n,i,o=G(s[0].boardPoints),r=[];for(let l=0;l<o.length;l+=1)r[l]=Tt(It(s,o,l));return{c(){e=me("svg");for(let l=0;l<r.length;l+=1)r[l].c();w(e,"width","100%"),w(e,"height","100%"),w(e,"viewBox",t=`0 0 ${s[0].boardSize} ${s[0].boardSize}`),w(e,"xmlns","http://www.w3.org/2000/svg"),w(e,"fill","black"),w(e,"class","svelte-1o5z4u5")},m(l,a){$(l,e,a);for(let c=0;c<r.length;c+=1)r[c]&&r[c].m(e,null);i=!0},p(l,[a]){if(a&1){o=G(l[0].boardPoints);let c;for(c=0;c<o.length;c+=1){const h=It(l,o,c);r[c]?r[c].p(h,a):(r[c]=Tt(h),r[c].c(),r[c].m(e,null))}for(;c<r.length;c+=1)r[c].d(1);r.length=o.length}(!i||a&1&&t!==(t=`0 0 ${l[0].boardSize} ${l[0].boardSize}`))&&w(e,"viewBox",t)},i(l){i||(n&&n.end(1),i=!0)},o(l){l&&(n=pn(e,ie,{})),i=!1},d(l){l&&I(e),$e(r,l),l&&n&&n.end()}}}function ys(s,e,t){let{board:n}=e;return s.$$set=i=>{"board"in i&&t(0,n=i.board)},[n]}class bs extends K{constructor(e){super(),W(this,e,ys,gs,M,{board:0})}}const _s=[{origin:{x:1,y:1},path:[{x:0,y:0},{x:2,y:0},{x:0,y:2}],skin:"triangle"},{origin:{x:1,y:1},path:[{x:0,y:0},{x:2,y:0},{x:2,y:2},{x:0,y:2}],skin:"square"},{origin:{x:1,y:1},path:[{x:0,y:0},{x:2,y:0},{x:3,y:2},{x:1,y:2}],skin:"parallel"},{origin:{x:1,y:1},path:[{x:1,y:0},{x:2,y:1},{x:1,y:2},{x:0,y:1}],skin:"rhombus"},{origin:{x:2,y:2},path:[{x:4,y:2},{x:2,y:4},{x:0,y:2},{x:2,y:0}],skin:"rhombus2"},{origin:{x:2,y:2},path:[{x:4,y:4},{x:0,y:4},{x:0,y:0},{x:4,y:0}],skin:"square2"},{origin:{x:2,y:2},path:[{x:0,y:4},{x:0,y:0},{x:4,y:0}],skin:"triangle2_lt"},{origin:{x:2,y:2},path:[{x:4,y:4},{x:0,y:0},{x:4,y:0}],skin:"triangle2_rt"},{origin:{x:2,y:2},path:[{x:4,y:4},{x:0,y:4},{x:4,y:0}],skin:"triangle2_rb"},{origin:{x:2,y:2},path:[{x:4,y:4},{x:0,y:4},{x:0,y:0}],skin:"triangle2_lb"},{origin:{x:3,y:3},path:[{x:6,y:6},{x:6,y:0},{x:0,y:0},{x:0,y:6}],skin:"square3"},{origin:{x:3,y:3},path:[{x:3,y:6},{x:6,y:3},{x:3,y:0},{x:0,y:3}],skin:"rhombus3"},{origin:{x:2,y:2},path:[{x:5,y:0},{x:0,y:0},{x:0,y:5}],skin:"triangle3_lt"},{origin:{x:4,y:4},path:[{x:5,y:5},{x:0,y:5},{x:5,y:0}],skin:"triangle3_rb"},{origin:{x:3,y:2},path:[{x:3,y:0},{x:6,y:3},{x:0,y:3}],skin:"triangle3_t"},{origin:{x:3,y:1},path:[{x:3,y:3},{x:6,y:0},{x:0,y:0}],skin:"triangle3_b"},{origin:{x:1,y:1},path:[{x:0,y:0},{x:3,y:0},{x:0,y:3}],skin:"triangled2"},{origin:{x:1,y:2},path:[{x:0,y:2},{x:2,y:0},{x:2,y:3},{x:0,y:5}],skin:"rhomboid2_end"},{path:[{x:0,y:0},{x:0,y:3},{x:2,y:5},{x:2,y:2}],origin:{x:1,y:3},skin:"rhomboid2_start"},{path:[{x:0,y:0},{x:4,y:-4},{x:4,y:0},{x:2,y:2}],origin:{x:2,y:0},skin:"trapezoid4_tr"},{path:[{x:2,y:0},{x:4,y:2},{x:0,y:6},{x:0,y:2}],origin:{x:2,y:2},skin:"trapezoid4_bl"},{path:[{x:2,y:0},{x:4,y:2},{x:4,y:6},{x:0,y:2}],origin:{x:2,y:2},skin:"trapezoid4_br"},{path:[{x:0,y:0},{x:4,y:4},{x:2,y:6},{x:0,y:4}],origin:{x:2,y:4},skin:"trapezoid4_tl"},{path:[{x:2,y:2},{x:4,y:0},{x:0,y:0}],origin:{x:2,y:1},skin:"down4"},{path:[{x:2,y:0},{x:4,y:2},{x:0,y:2}],origin:{x:2,y:2},skin:"up4"},{path:[{x:0,y:2},{x:2,y:0},{x:2,y:4}],origin:{x:2,y:2},skin:"left2"},{path:[{x:0,y:0},{x:2,y:2},{x:0,y:4}],origin:{x:0,y:2},skin:"right2"}];/**
 * @license lucide-svelte v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ks={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"},qt=ks;function Rt(s,e,t){const n=s.slice();return n[10]=e[t][0],n[11]=e[t][1],n}function nt(s){let e,t=[s[11]],n={};for(let i=0;i<t.length;i+=1)n=R(n,t[i]);return{c(){e=me(s[10]),Ge(e,n)},m(i,o){$(i,e,o)},p(i,o){Ge(e,n=ce(t,[o&32&&i[11]]))},d(i){i&&I(e)}}}function Nt(s){let e=s[10],t,n=s[10]&&nt(s);return{c(){n&&n.c(),t=ge()},m(i,o){n&&n.m(i,o),$(i,t,o)},p(i,o){i[10]?e?M(e,i[10])?(n.d(1),n=nt(i),e=i[10],n.c(),n.m(t.parentNode,t)):n.p(i,o):(n=nt(i),e=i[10],n.c(),n.m(t.parentNode,t)):e&&(n.d(1),n=null,e=i[10])},d(i){i&&I(t),n&&n.d(i)}}}function ws(s){let e,t,n,i,o,r=G(s[5]),l=[];for(let f=0;f<r.length;f+=1)l[f]=Nt(Rt(s,r,f));const a=s[9].default,c=ue(a,s,s[8],null);let h=[qt,s[6],{width:s[2]},{height:s[2]},{stroke:s[1]},{"stroke-width":n=s[4]?Number(s[3])*24/Number(s[2]):s[3]},{class:i=`lucide-icon lucide lucide-${s[0]} ${s[7].class??""}`}],u={};for(let f=0;f<h.length;f+=1)u=R(u,h[f]);return{c(){e=me("svg");for(let f=0;f<l.length;f+=1)l[f].c();t=ge(),c&&c.c(),Ge(e,u)},m(f,d){$(f,e,d);for(let p=0;p<l.length;p+=1)l[p]&&l[p].m(e,null);V(e,t),c&&c.m(e,null),o=!0},p(f,[d]){if(d&32){r=G(f[5]);let p;for(p=0;p<r.length;p+=1){const b=Rt(f,r,p);l[p]?l[p].p(b,d):(l[p]=Nt(b),l[p].c(),l[p].m(e,t))}for(;p<l.length;p+=1)l[p].d(1);l.length=r.length}c&&c.p&&(!o||d&256)&&he(c,a,f,f[8],o?fe(a,f[8],d,null):de(f[8]),null),Ge(e,u=ce(h,[qt,d&64&&f[6],(!o||d&4)&&{width:f[2]},(!o||d&4)&&{height:f[2]},(!o||d&2)&&{stroke:f[1]},(!o||d&28&&n!==(n=f[4]?Number(f[3])*24/Number(f[2]):f[3]))&&{"stroke-width":n},(!o||d&129&&i!==(i=`lucide-icon lucide lucide-${f[0]} ${f[7].class??""}`))&&{class:i}]))},i(f){o||(y(c,f),o=!0)},o(f){S(c,f),o=!1},d(f){f&&I(e),$e(l,f),c&&c.d(f)}}}function vs(s,e,t){const n=["name","color","size","strokeWidth","absoluteStrokeWidth","iconNode"];let i=gt(e,n),{$$slots:o={},$$scope:r}=e,{name:l}=e,{color:a="currentColor"}=e,{size:c=24}=e,{strokeWidth:h=2}=e,{absoluteStrokeWidth:u=!1}=e,{iconNode:f}=e;return s.$$set=d=>{t(7,e=R(R({},e),D(d))),t(6,i=gt(e,n)),"name"in d&&t(0,l=d.name),"color"in d&&t(1,a=d.color),"size"in d&&t(2,c=d.size),"strokeWidth"in d&&t(3,h=d.strokeWidth),"absoluteStrokeWidth"in d&&t(4,u=d.absoluteStrokeWidth),"iconNode"in d&&t(5,f=d.iconNode),"$$scope"in d&&t(8,r=d.$$scope)},e=D(e),[l,a,c,h,u,f,i,e,r,o]}class be extends K{constructor(e){super(),W(this,e,vs,ws,M,{name:0,color:1,size:2,strokeWidth:3,absoluteStrokeWidth:4,iconNode:5})}}function Ss(s){let e;const t=s[2].default,n=ue(t,s,s[3],null);return{c(){n&&n.c()},m(i,o){n&&n.m(i,o),e=!0},p(i,o){n&&n.p&&(!e||o&8)&&he(n,t,i,i[3],e?fe(t,i[3],o,null):de(i[3]),null)},i(i){e||(y(n,i),e=!0)},o(i){S(n,i),e=!1},d(i){n&&n.d(i)}}}function xs(s){let e,t;const n=[{name:"chevron-left"},s[1],{iconNode:s[0]}];let i={$$slots:{default:[Ss]},$$scope:{ctx:s}};for(let o=0;o<n.length;o+=1)i=R(i,n[o]);return e=new be({props:i}),{c(){B(e.$$.fragment)},m(o,r){j(e,o,r),t=!0},p(o,[r]){const l=r&3?ce(n,[n[0],r&2&&ye(o[1]),r&1&&{iconNode:o[0]}]):{};r&8&&(l.$$scope={dirty:r,ctx:o}),e.$set(l)},i(o){t||(y(e.$$.fragment,o),t=!0)},o(o){S(e.$$.fragment,o),t=!1},d(o){z(e,o)}}}function Cs(s,e,t){let{$$slots:n={},$$scope:i}=e;const o=[["path",{d:"m15 18-6-6 6-6"}]];return s.$$set=r=>{t(1,e=R(R({},e),D(r))),"$$scope"in r&&t(3,i=r.$$scope)},e=D(e),[o,e,n,i]}class Os extends K{constructor(e){super(),W(this,e,Cs,xs,M,{})}}const Ps=Os;function Is(s){let e;const t=s[2].default,n=ue(t,s,s[3],null);return{c(){n&&n.c()},m(i,o){n&&n.m(i,o),e=!0},p(i,o){n&&n.p&&(!e||o&8)&&he(n,t,i,i[3],e?fe(t,i[3],o,null):de(i[3]),null)},i(i){e||(y(n,i),e=!0)},o(i){S(n,i),e=!1},d(i){n&&n.d(i)}}}function Es(s){let e,t;const n=[{name:"chevron-right"},s[1],{iconNode:s[0]}];let i={$$slots:{default:[Is]},$$scope:{ctx:s}};for(let o=0;o<n.length;o+=1)i=R(i,n[o]);return e=new be({props:i}),{c(){B(e.$$.fragment)},m(o,r){j(e,o,r),t=!0},p(o,[r]){const l=r&3?ce(n,[n[0],r&2&&ye(o[1]),r&1&&{iconNode:o[0]}]):{};r&8&&(l.$$scope={dirty:r,ctx:o}),e.$set(l)},i(o){t||(y(e.$$.fragment,o),t=!0)},o(o){S(e.$$.fragment,o),t=!1},d(o){z(e,o)}}}function $s(s,e,t){let{$$slots:n={},$$scope:i}=e;const o=[["path",{d:"m9 18 6-6-6-6"}]];return s.$$set=r=>{t(1,e=R(R({},e),D(r))),"$$scope"in r&&t(3,i=r.$$scope)},e=D(e),[o,e,n,i]}class Ts extends K{constructor(e){super(),W(this,e,$s,Es,M,{})}}const qs=Ts;function Rs(s){let e;const t=s[2].default,n=ue(t,s,s[3],null);return{c(){n&&n.c()},m(i,o){n&&n.m(i,o),e=!0},p(i,o){n&&n.p&&(!e||o&8)&&he(n,t,i,i[3],e?fe(t,i[3],o,null):de(i[3]),null)},i(i){e||(y(n,i),e=!0)},o(i){S(n,i),e=!1},d(i){n&&n.d(i)}}}function Ns(s){let e,t;const n=[{name:"download"},s[1],{iconNode:s[0]}];let i={$$slots:{default:[Rs]},$$scope:{ctx:s}};for(let o=0;o<n.length;o+=1)i=R(i,n[o]);return e=new be({props:i}),{c(){B(e.$$.fragment)},m(o,r){j(e,o,r),t=!0},p(o,[r]){const l=r&3?ce(n,[n[0],r&2&&ye(o[1]),r&1&&{iconNode:o[0]}]):{};r&8&&(l.$$scope={dirty:r,ctx:o}),e.$set(l)},i(o){t||(y(e.$$.fragment,o),t=!0)},o(o){S(e.$$.fragment,o),t=!1},d(o){z(e,o)}}}function As(s,e,t){let{$$slots:n={},$$scope:i}=e;const o=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}],["polyline",{points:"7 10 12 15 17 10"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3"}]];return s.$$set=r=>{t(1,e=R(R({},e),D(r))),"$$scope"in r&&t(3,i=r.$$scope)},e=D(e),[o,e,n,i]}class Ls extends K{constructor(e){super(),W(this,e,As,Ns,M,{})}}const js=Ls;function zs(s){let e;const t=s[2].default,n=ue(t,s,s[3],null);return{c(){n&&n.c()},m(i,o){n&&n.m(i,o),e=!0},p(i,o){n&&n.p&&(!e||o&8)&&he(n,t,i,i[3],e?fe(t,i[3],o,null):de(i[3]),null)},i(i){e||(y(n,i),e=!0)},o(i){S(n,i),e=!1},d(i){n&&n.d(i)}}}function Ms(s){let e,t;const n=[{name:"minus"},s[1],{iconNode:s[0]}];let i={$$slots:{default:[zs]},$$scope:{ctx:s}};for(let o=0;o<n.length;o+=1)i=R(i,n[o]);return e=new be({props:i}),{c(){B(e.$$.fragment)},m(o,r){j(e,o,r),t=!0},p(o,[r]){const l=r&3?ce(n,[n[0],r&2&&ye(o[1]),r&1&&{iconNode:o[0]}]):{};r&8&&(l.$$scope={dirty:r,ctx:o}),e.$set(l)},i(o){t||(y(e.$$.fragment,o),t=!0)},o(o){S(e.$$.fragment,o),t=!1},d(o){z(e,o)}}}function Us(s,e,t){let{$$slots:n={},$$scope:i}=e;const o=[["path",{d:"M5 12h14"}]];return s.$$set=r=>{t(1,e=R(R({},e),D(r))),"$$scope"in r&&t(3,i=r.$$scope)},e=D(e),[o,e,n,i]}class Bs extends K{constructor(e){super(),W(this,e,Us,Ms,M,{})}}const Ds=Bs;function Fs(s){let e;const t=s[2].default,n=ue(t,s,s[3],null);return{c(){n&&n.c()},m(i,o){n&&n.m(i,o),e=!0},p(i,o){n&&n.p&&(!e||o&8)&&he(n,t,i,i[3],e?fe(t,i[3],o,null):de(i[3]),null)},i(i){e||(y(n,i),e=!0)},o(i){S(n,i),e=!1},d(i){n&&n.d(i)}}}function Ws(s){let e,t;const n=[{name:"pen-line"},s[1],{iconNode:s[0]}];let i={$$slots:{default:[Fs]},$$scope:{ctx:s}};for(let o=0;o<n.length;o+=1)i=R(i,n[o]);return e=new be({props:i}),{c(){B(e.$$.fragment)},m(o,r){j(e,o,r),t=!0},p(o,[r]){const l=r&3?ce(n,[n[0],r&2&&ye(o[1]),r&1&&{iconNode:o[0]}]):{};r&8&&(l.$$scope={dirty:r,ctx:o}),e.$set(l)},i(o){t||(y(e.$$.fragment,o),t=!0)},o(o){S(e.$$.fragment,o),t=!1},d(o){z(e,o)}}}function Ks(s,e,t){let{$$slots:n={},$$scope:i}=e;const o=[["path",{d:"M12 20h9"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z"}]];return s.$$set=r=>{t(1,e=R(R({},e),D(r))),"$$scope"in r&&t(3,i=r.$$scope)},e=D(e),[o,e,n,i]}class Gs extends K{constructor(e){super(),W(this,e,Ks,Ws,M,{})}}const Vs=Gs;function Js(s){let e;const t=s[2].default,n=ue(t,s,s[3],null);return{c(){n&&n.c()},m(i,o){n&&n.m(i,o),e=!0},p(i,o){n&&n.p&&(!e||o&8)&&he(n,t,i,i[3],e?fe(t,i[3],o,null):de(i[3]),null)},i(i){e||(y(n,i),e=!0)},o(i){S(n,i),e=!1},d(i){n&&n.d(i)}}}function Hs(s){let e,t;const n=[{name:"plus"},s[1],{iconNode:s[0]}];let i={$$slots:{default:[Js]},$$scope:{ctx:s}};for(let o=0;o<n.length;o+=1)i=R(i,n[o]);return e=new be({props:i}),{c(){B(e.$$.fragment)},m(o,r){j(e,o,r),t=!0},p(o,[r]){const l=r&3?ce(n,[n[0],r&2&&ye(o[1]),r&1&&{iconNode:o[0]}]):{};r&8&&(l.$$scope={dirty:r,ctx:o}),e.$set(l)},i(o){t||(y(e.$$.fragment,o),t=!0)},o(o){S(e.$$.fragment,o),t=!1},d(o){z(e,o)}}}function Qs(s,e,t){let{$$slots:n={},$$scope:i}=e;const o=[["path",{d:"M5 12h14"}],["path",{d:"M12 5v14"}]];return s.$$set=r=>{t(1,e=R(R({},e),D(r))),"$$scope"in r&&t(3,i=r.$$scope)},e=D(e),[o,e,n,i]}class Zs extends K{constructor(e){super(),W(this,e,Qs,Hs,M,{})}}const Ys=Zs;function Xs(s){let e;const t=s[2].default,n=ue(t,s,s[3],null);return{c(){n&&n.c()},m(i,o){n&&n.m(i,o),e=!0},p(i,o){n&&n.p&&(!e||o&8)&&he(n,t,i,i[3],e?fe(t,i[3],o,null):de(i[3]),null)},i(i){e||(y(n,i),e=!0)},o(i){S(n,i),e=!1},d(i){n&&n.d(i)}}}function ei(s){let e,t;const n=[{name:"refresh-cw"},s[1],{iconNode:s[0]}];let i={$$slots:{default:[Xs]},$$scope:{ctx:s}};for(let o=0;o<n.length;o+=1)i=R(i,n[o]);return e=new be({props:i}),{c(){B(e.$$.fragment)},m(o,r){j(e,o,r),t=!0},p(o,[r]){const l=r&3?ce(n,[n[0],r&2&&ye(o[1]),r&1&&{iconNode:o[0]}]):{};r&8&&(l.$$scope={dirty:r,ctx:o}),e.$set(l)},i(o){t||(y(e.$$.fragment,o),t=!0)},o(o){S(e.$$.fragment,o),t=!1},d(o){z(e,o)}}}function ti(s,e,t){let{$$slots:n={},$$scope:i}=e;const o=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"}],["path",{d:"M21 3v5h-5"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"}],["path",{d:"M8 16H3v5"}]];return s.$$set=r=>{t(1,e=R(R({},e),D(r))),"$$scope"in r&&t(3,i=r.$$scope)},e=D(e),[o,e,n,i]}class ni extends K{constructor(e){super(),W(this,e,ti,ei,M,{})}}const si=ni;function ii(s){let e;const t=s[2].default,n=ue(t,s,s[3],null);return{c(){n&&n.c()},m(i,o){n&&n.m(i,o),e=!0},p(i,o){n&&n.p&&(!e||o&8)&&he(n,t,i,i[3],e?fe(t,i[3],o,null):de(i[3]),null)},i(i){e||(y(n,i),e=!0)},o(i){S(n,i),e=!1},d(i){n&&n.d(i)}}}function oi(s){let e,t;const n=[{name:"waypoints"},s[1],{iconNode:s[0]}];let i={$$slots:{default:[ii]},$$scope:{ctx:s}};for(let o=0;o<n.length;o+=1)i=R(i,n[o]);return e=new be({props:i}),{c(){B(e.$$.fragment)},m(o,r){j(e,o,r),t=!0},p(o,[r]){const l=r&3?ce(n,[n[0],r&2&&ye(o[1]),r&1&&{iconNode:o[0]}]):{};r&8&&(l.$$scope={dirty:r,ctx:o}),e.$set(l)},i(o){t||(y(e.$$.fragment,o),t=!0)},o(o){S(e.$$.fragment,o),t=!1},d(o){z(e,o)}}}function ri(s,e,t){let{$$slots:n={},$$scope:i}=e;const o=[["circle",{cx:"12",cy:"4.5",r:"2.5"}],["path",{d:"m10.2 6.3-3.9 3.9"}],["circle",{cx:"4.5",cy:"12",r:"2.5"}],["path",{d:"M7 12h10"}],["circle",{cx:"19.5",cy:"12",r:"2.5"}],["path",{d:"m13.8 17.7 3.9-3.9"}],["circle",{cx:"12",cy:"19.5",r:"2.5"}]];return s.$$set=r=>{t(1,e=R(R({},e),D(r))),"$$scope"in r&&t(3,i=r.$$scope)},e=D(e),[o,e,n,i]}class li extends K{constructor(e){super(),W(this,e,ri,oi,M,{})}}const ai=li;let ct={};He.subscribe(s=>{ct=s});const At={};class Lt{constructor(e,t,n,i){this.id=t,this.pos=n||{x:8,y:8},this.skin=i||"square",this.boardRef=e,this.markRemove=!1,this.uniqueId=this.generateUniqueId()}generateUniqueId(){let e="0";for(;At[e]||e==="0";)e=Math.random().toString(36).substr(2,9);return At[e]=!0,this.skin+"-"+this.id+"-"+e}setPos(e){this.pos=e,this.boardRef.checkBoardState(this)}loadSkin(){return ct[this.skin]||(console.log("Skin not found: ",this.skin),this.skin="square"),ct[this.skin]}}class ci{constructor(e){pe(this,"toggleRemoveMode",()=>(this.removeShapes=!this.removeShapes,this.removeShapes));pe(this,"toggleEditBoard",()=>(this.boardEditEnabled=!this.boardEditEnabled,this.boardEditEnabled));this.boardSize=e||15,this.boardShapes$=Ee([]),this.boardPoints=this.generateBoardSnapPoints(this.boardSize),this.currentLevel=1,this.final=[],this.levelCompleted$=Ee(!1),this.removeShapes=!1,this.boardEditEnabled=!1}addShape(e="square",t){this.boardShapes$.update(n=>{const i=new Lt(this,n.length+1,t,e);return[...n,i]})}setupLevel(e,t){this.currentLevel=t+1,this.boardShapes$.set(e.start.map((n,i)=>new Lt(this,i,n.pos,n.skin))),this.final=e.final}getJSON(e){return JSON.stringify(e.map(({pos:t,skin:n})=>({pos:t,skin:n})))}checkBoardState(e,t=!1){this.boardShapes$.update(n=>(t&&console.log("ExportBoard: "+this.getJSON(n)),this.removeShapes&&(e.markRemove=!0,n=n.filter(i=>!i.markRemove)),this.boardEditEnabled||this.levelCompleted$.update(()=>this.checkLevelCompletion(n)),n))}checkLevelCompletion(e){const t=this.final,n=at(e),i=at(t),o=t.map(r=>({skin:r.skin,pos:Ze(r.pos,i)}));return e.every((r,l)=>{const a=Ze(r.pos,n);return o.some(c=>c.skin===r.skin&&hs(a,c.pos))})}generateBoardSnapPoints(e){const t=(n,i,o)=>Math.sqrt(n**2+i**2)<=o;return Array(e).fill().map((n,i)=>Array(e).fill().map((o,r)=>({x:i+.5,y:r+.5})).filter((o,r)=>t(o.x/e-.5,o.y/e-.5,.5)))}}function ui(s){let e,t,n,i,o,r,l;return{c(){var a;e=F("div"),t=me("svg"),n=me("path"),w(n,"d",i=Qe((a=s[0])==null?void 0:a.path)),w(t,"width","100%"),w(t,"height","100%"),w(t,"viewBox",o=s[3](s[0].origin)),w(t,"preserveAspectRatio","none"),w(t,"fill","currentColor"),w(t,"class","svelte-1opn61b"),w(e,"role","cell"),w(e,"tabindex","-1"),w(e,"class","svelte-1opn61b"),ne(e,"--y",`${s[2].x}%`),ne(e,"--x",`${s[2].y}%`),ne(e,"--board-size",se/s[1])},m(a,c){$(a,e,c),V(e,t),V(t,n),l=!0},p(a,[c]){var h;(!l||c&1&&i!==(i=Qe((h=a[0])==null?void 0:h.path)))&&w(n,"d",i),(!l||c&1&&o!==(o=a[3](a[0].origin)))&&w(t,"viewBox",o),c&4&&ne(e,"--y",`${a[2].x}%`),c&4&&ne(e,"--x",`${a[2].y}%`),c&2&&ne(e,"--board-size",se/a[1])},i(a){l||(X(()=>{l&&(r||(r=le(e,ie,{duration:1e3},!0)),r.run(1))}),l=!0)},o(a){r||(r=le(e,ie,{duration:1e3},!1)),r.run(0),l=!1},d(a){a&&I(e),a&&r&&r.end()}}}function fi(s,e,t){let n,{shapeSkin:i}=e,{shapePos:o={x:0,y:0}}=e,{zoom:r=1.5}=e;const l=(a,c={x:1,y:1})=>`${a.x} ${a.y} ${c.x} ${c.y}`;return s.$$set=a=>{"shapeSkin"in a&&t(0,i=a.shapeSkin),"shapePos"in a&&t(4,o=a.shapePos),"zoom"in a&&t(1,r=a.zoom)},s.$$.update=()=>{s.$$.dirty&18&&t(2,n={x:(o.y-.5)*100*r/se-50*(r-1),y:(o.x-.5)*100*r/se-50*(r-1)})},[i,r,n,l,o]}class Sn extends K{constructor(e){super(),W(this,e,fi,ui,M,{shapeSkin:0,shapePos:4,zoom:1})}}function hi(s,{from:e,to:t},n={}){const i=getComputedStyle(s),o=i.transform==="none"?"":i.transform,[r,l]=i.transformOrigin.split(" ").map(parseFloat),a=e.left+e.width*r/t.width-(t.left+r),c=e.top+e.height*l/t.height-(t.top+l),{delay:h=0,duration:u=d=>Math.sqrt(d)*120,easing:f=yn}=n;return{delay:h,duration:ke(u)?u(Math.sqrt(a*a+c*c)):u,easing:f,css:(d,p)=>{const b=p*a,g=p*c,m=d+p*e.width/t.width,q=d+p*e.height/t.height;return`transform: ${o} translate(${b}px, ${g}px) scale(${m}, ${q});`}}}function jt(s,e,t){const n=s.slice();return n[4]=e[t],n}function zt(s){let e,t,n,i,o,r;t=new Sn({props:{zoom:2,shapePos:{x:8,y:8},shapeSkin:s[0][s[4]]}});function l(){return s[3](s[4])}return{c(){e=F("button"),B(t.$$.fragment),n=ee(),w(e,"class","svelte-su1q42")},m(a,c){$(a,e,c),j(t,e,null),V(e,n),i=!0,o||(r=te(e,"click",l),o=!0)},p(a,c){s=a;const h={};c&1&&(h.shapeSkin=s[0][s[4]]),t.$set(h)},i(a){i||(y(t.$$.fragment,a),i=!0)},o(a){S(t.$$.fragment,a),i=!1},d(a){a&&I(e),z(t),o=!1,r()}}}function di(s){let e,t,n,i=G(Object.keys(s[0])),o=[];for(let l=0;l<i.length;l+=1)o[l]=zt(jt(s,i,l));const r=l=>S(o[l],1,1,()=>{o[l]=null});return{c(){e=F("div");for(let l=0;l<o.length;l+=1)o[l].c();w(e,"class","skinPicker svelte-su1q42")},m(l,a){$(l,e,a);for(let c=0;c<o.length;c+=1)o[c]&&o[c].m(e,null);n=!0},p(l,[a]){if(a&3){i=G(Object.keys(l[0]));let c;for(c=0;c<i.length;c+=1){const h=jt(l,i,c);o[c]?(o[c].p(h,a),y(o[c],1)):(o[c]=zt(h),o[c].c(),y(o[c],1),o[c].m(e,null))}for(Q(),c=i.length;c<o.length;c+=1)r(c);Z()}},i(l){if(!n){for(let a=0;a<i.length;a+=1)y(o[a]);l&&X(()=>{n&&(t||(t=le(e,lt,{y:-100,duration:1e3},!0)),t.run(1))}),n=!0}},o(l){o=o.filter(Boolean);for(let a=0;a<o.length;a+=1)S(o[a]);l&&(t||(t=le(e,lt,{y:-100,duration:1e3},!1)),t.run(0)),n=!1},d(l){l&&I(e),$e(o,l),l&&t&&t.end()}}}function pi(s,e,t){let{skinsStorage:n={}}=e,{board:i}=e,{blockSize:o=""}=e;const r=l=>{i.addShape(l)};return s.$$set=l=>{"skinsStorage"in l&&t(0,n=l.skinsStorage),"board"in l&&t(1,i=l.board),"blockSize"in l&&t(2,o=l.blockSize)},[n,i,o,r]}class mi extends K{constructor(e){super(),W(this,e,pi,di,M,{skinsStorage:0,board:1,blockSize:2})}}function Mt(s,e,t){const n=s.slice();return n[4]=e[t],n}function Ut(s){let e,t;return e=new Sn({props:{zoom:1.5,shapePos:s[4].pos,shapeSkin:s[1][s[4].skin]}}),{c(){B(e.$$.fragment)},m(n,i){j(e,n,i),t=!0},p(n,i){const o={};i&1&&(o.shapePos=n[4].pos),i&3&&(o.shapeSkin=n[1][n[4].skin]),e.$set(o)},i(n){t||(y(e.$$.fragment,n),t=!0)},o(n){S(e.$$.fragment,n),t=!1},d(n){z(e,n)}}}function gi(s){let e,t,n=G(s[2](s[0])),i=[];for(let r=0;r<n.length;r+=1)i[r]=Ut(Mt(s,n,r));const o=r=>S(i[r],1,1,()=>{i[r]=null});return{c(){for(let r=0;r<i.length;r+=1)i[r].c();e=ge()},m(r,l){for(let a=0;a<i.length;a+=1)i[a]&&i[a].m(r,l);$(r,e,l),t=!0},p(r,[l]){if(l&7){n=G(r[2](r[0]));let a;for(a=0;a<n.length;a+=1){const c=Mt(r,n,a);i[a]?(i[a].p(c,l),y(i[a],1)):(i[a]=Ut(c),i[a].c(),y(i[a],1),i[a].m(e.parentNode,e))}for(Q(),a=n.length;a<i.length;a+=1)o(a);Z()}},i(r){if(!t){for(let l=0;l<n.length;l+=1)y(i[l]);t=!0}},o(r){i=i.filter(Boolean);for(let l=0;l<i.length;l+=1)S(i[l]);t=!1},d(r){r&&I(e),$e(i,r)}}}function yi(s,e,t){let{level:n}=e,i={};const o=He.subscribe(l=>{t(1,i=l)}),r=l=>{const a=at(l),c=Ze(a,{x:se/2+.5,y:se/2+.5});return l.map((h,u)=>({...h,pos:Ze(h.pos,c)}))};return fn(()=>{o()}),s.$$set=l=>{"level"in l&&t(0,n=l.level)},[n,i,r]}class xn extends K{constructor(e){super(),W(this,e,yi,gi,M,{level:0})}}function Bt(s,e,t){const n=s.slice();return n[8]=e[t],n[10]=t,n}function Dt(s){let e,t,n,i,o=G(s[1]),r=[];for(let c=0;c<o.length;c+=1)r[c]=Ft(Bt(s,o,c));const l=c=>S(r[c],1,1,()=>{r[c]=null});let a=s[1].length===0&&Wt();return{c(){e=F("div");for(let c=0;c<r.length;c+=1)r[c].c();t=ee(),a&&a.c(),w(e,"class","levelPicker svelte-mo56c6")},m(c,h){$(c,e,h);for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(e,null);V(e,t),a&&a.m(e,null),i=!0},p(c,h){if(h&6){o=G(c[1]);let u;for(u=0;u<o.length;u+=1){const f=Bt(c,o,u);r[u]?(r[u].p(f,h),y(r[u],1)):(r[u]=Ft(f),r[u].c(),y(r[u],1),r[u].m(e,t))}for(Q(),u=o.length;u<r.length;u+=1)l(u);Z()}c[1].length===0?a||(a=Wt(),a.c(),a.m(e,null)):a&&(a.d(1),a=null)},i(c){if(!i){for(let h=0;h<o.length;h+=1)y(r[h]);c&&X(()=>{i&&(n||(n=le(e,ie,{},!0)),n.run(1))}),i=!0}},o(c){r=r.filter(Boolean);for(let h=0;h<r.length;h+=1)S(r[h]);c&&(n||(n=le(e,ie,{},!1)),n.run(0)),i=!1},d(c){c&&I(e),$e(r,c),a&&a.d(),c&&n&&n.end()}}}function Ft(s){let e,t,n,i,o;t=new xn({props:{level:s[8].final}});function r(){return s[6](s[8])}return{c(){e=F("button"),B(t.$$.fragment),w(e,"class","svelte-mo56c6")},m(l,a){$(l,e,a),j(t,e,null),n=!0,i||(o=te(e,"click",r),i=!0)},p(l,a){s=l;const c={};a&2&&(c.level=s[8].final),t.$set(c)},i(l){n||(y(t.$$.fragment,l),n=!0)},o(l){S(t.$$.fragment,l),n=!1},d(l){l&&I(e),z(t),i=!1,o()}}}function Wt(s){let e;return{c(){e=F("p"),e.textContent="No cached levels",w(e,"class","svelte-mo56c6")},m(t,n){$(t,e,n)},d(t){t&&I(e)}}}function bi(s){let e,t,n,i,o,r,l,a=s[0]&&Dt(s);return{c(){e=F("button"),n=ee(),a&&a.c(),i=ge(),w(e,"class","levelsToggle svelte-mo56c6")},m(c,h){$(c,e,h),$(c,n,h),a&&a.m(c,h),$(c,i,h),o=!0,r||(l=te(e,"click",s[3]),r=!0)},p(c,[h]){c[0]?a?(a.p(c,h),h&1&&y(a,1)):(a=Dt(c),a.c(),y(a,1),a.m(i.parentNode,i)):a&&(Q(),S(a,1,1,()=>{a=null}),Z())},i(c){o||(c&&X(()=>{o&&(t||(t=le(e,ie,{},!0)),t.run(1))}),y(a),o=!0)},o(c){c&&(t||(t=le(e,ie,{},!1)),t.run(0)),S(a),o=!1},d(c){c&&(I(e),I(n),I(i)),c&&t&&t.end(),a&&a.d(c),r=!1,l()}}}function _i(s,e,t){let n,{loadLevel:i}=e,o;const r=je.subscribe(u=>{t(5,o=u)}),l=u=>{console.log("selectLevel",u),t(0,a=!1),i(u)};let a=!1;const c=()=>t(0,a=!a);fn(()=>{r()});const h=u=>l(u.levelId);return s.$$set=u=>{"loadLevel"in u&&t(4,i=u.loadLevel)},s.$$.update=()=>{s.$$.dirty&32&&t(1,n=Object.keys(o).map(u=>o[u]).sort((u,f)=>u.levelId-f.levelId))},[a,n,l,c,i,o,h]}class ki extends K{constructor(e){super(),W(this,e,_i,bi,M,{loadLevel:4})}}function Kt(s,e,t){const n=s.slice();return n[26]=e[t],n}function Gt(s,e,t){const n=s.slice();return n[29]=e[t],n}function Vt(s){let e=s[0],t,n,i=Jt(s);return{c(){i.c(),t=ge()},m(o,r){i.m(o,r),$(o,t,r),n=!0},p(o,r){r[0]&1&&M(e,e=o[0])?(Q(),S(i,1,1,U),Z(),i=Jt(o),i.c(),y(i,1),i.m(t.parentNode,t)):i.p(o,r)},i(o){n||(y(i),n=!0)},o(o){S(i),n=!1},d(o){o&&I(t),i.d(o)}}}function Jt(s){let e,t;return e=new xn({props:{level:s[6]}}),{c(){B(e.$$.fragment)},m(n,i){j(e,n,i),t=!0},p(n,i){const o={};i[0]&64&&(o.level=n[6]),e.$set(o)},i(n){t||(y(e.$$.fragment,n),t=!0)},o(n){S(e.$$.fragment,n),t=!1},d(n){z(e,n)}}}function Ht(s){let e,t;return e=new mi({props:{board:s[16],skinsStorage:s[13]}}),{c(){B(e.$$.fragment)},m(n,i){j(e,n,i),t=!0},p(n,i){const o={};i[0]&8192&&(o.skinsStorage=n[13]),e.$set(o)},i(n){t||(y(e.$$.fragment,n),t=!0)},o(n){S(e.$$.fragment,n),t=!1},d(n){z(e,n)}}}function Qt(s){let e=[],t=new Map,n,i,o,r,l,a=G(s[15]);const c=u=>u[29].uniqueId;for(let u=0;u<a.length;u+=1){let f=Gt(s,a,u),d=c(f);t.set(d,e[u]=Zt(d,f))}i=new bs({props:{board:s[16]}});let h=oe;return{c(){for(let u=0;u<e.length;u+=1)e[u].c();n=ee(),B(i.$$.fragment),o=ee(),r=ge()},m(u,f){for(let d=0;d<e.length;d+=1)e[d]&&e[d].m(u,f);$(u,n,f),j(i,u,f),$(u,o,f),$(u,r,f),l=!0},p(u,f){f[0]&102422&&(a=G(u[15]),Q(),e=gn(e,f,c,1,u,a,t,n.parentNode,mn,Zt,n,Gt),Z())},i(u){if(!l){for(let f=0;f<a.length;f+=1)y(e[f]);y(i.$$.fragment,u),y(h),l=!0}},o(u){for(let f=0;f<e.length;f+=1)S(e[f]);S(i.$$.fragment,u),S(h),l=!1},d(u){u&&(I(n),I(o),I(r));for(let f=0;f<e.length;f+=1)e[f].d(u);z(i,u)}}}function Zt(s,e){let t,n,i;return n=new ms({props:{introDelay:e[2]?-1:e[29].id,boardPoints:e[16].boardPoints,blockSize:e[12],shapeSkin:e[29].loadSkin(),shape:e[29],hidden:e[1],shake:e[4]}}),{key:s,first:null,c(){t=ge(),B(n.$$.fragment),this.first=t},m(o,r){$(o,t,r),j(n,o,r),i=!0},p(o,r){e=o;const l={};r[0]&32772&&(l.introDelay=e[2]?-1:e[29].id),r[0]&4096&&(l.blockSize=e[12]),r[0]&32768&&(l.shapeSkin=e[29].loadSkin()),r[0]&32768&&(l.shape=e[29]),r[0]&2&&(l.hidden=e[1]),r[0]&16&&(l.shake=e[4]),n.$set(l)},i(o){i||(y(n.$$.fragment,o),i=!0)},o(o){S(n.$$.fragment,o),i=!1},d(o){o&&I(t),z(n,o)}}}function Yt(s){let e,t;return e=new ki({props:{loadLevel:s[17]}}),{c(){B(e.$$.fragment)},m(n,i){j(e,n,i),t=!0},p:U,i(n){t||(y(e.$$.fragment,n),t=!0)},o(n){S(e.$$.fragment,n),t=!1},d(n){z(e,n)}}}function Xt(s){let e,t,n,i;return{c(){e=F("form"),t=F("input"),w(t,"placeholder","shapeName"),w(t,"class","svelte-d39b1x"),w(e,"class","svelte-d39b1x")},m(o,r){$(o,e,r),V(e,t),_t(t,s[8]),n||(i=[te(t,"input",s[21]),te(e,"submit",it(s[22]))],n=!0)},p(o,r){r[0]&256&&t.value!==o[8]&&_t(t,o[8])},d(o){o&&I(e),n=!1,ae(i)}}}function en(s,e){let t,n,i,o,r,l=U,a,c,h;var u=e[26].icon;function f(d,p){return{props:{color:"black",size:"1em"}}}return u&&(n=kt(u,f())),{key:s,first:null,c(){t=F("button"),n&&B(n.$$.fragment),i=ee(),w(t,"class","svelte-d39b1x"),H(t,"dev",oe),H(t,"active",e[14]),this.first=t},m(d,p){$(d,t,p),n&&j(n,t,null),V(t,i),a=!0,c||(h=te(t,"click",function(){ke(e[26].action)&&e[26].action.apply(this,arguments)}),c=!0)},p(d,p){if(e=d,p[0]&512&&u!==(u=e[26].icon)){if(n){Q();const b=n;S(b.$$.fragment,1,0,()=>{z(b,1)}),Z()}u?(n=kt(u,f()),B(n.$$.fragment),y(n.$$.fragment,1),j(n,t,i)):n=null}(!a||p[0]&16384)&&H(t,"active",e[14])},r(){r=t.getBoundingClientRect()},f(){Mn(t),l(),cn(t,r)},a(){l(),l=zn(t,r,hi,{})},i(d){a||(n&&y(n.$$.fragment,d),d&&X(()=>{a&&(o||(o=le(t,ie,{delay:500},!0)),o.run(1))}),a=!0)},o(d){n&&S(n.$$.fragment,d),d&&(o||(o=le(t,ie,{delay:500},!1)),o.run(0)),a=!1},d(d){d&&I(t),n&&z(n),d&&o&&o.end(),c=!1,h()}}}function wi(s){let e,t=s[0]+1+"",n,i,o,r,l,a,c,h,u,f,d,p,b,g,m=[],q=new Map,O,x=!(s[1]||s[2])&&Vt(s),P=s[2]&&Ht(s),E=!s[14]&&Qt(s),C=(s[14]||oe)&&Yt(s),T=s[5]&&Xt(s),k=G(s[9]);const N=_=>_[26].icon;for(let _=0;_<k.length;_+=1){let v=Kt(s,k,_),A=N(v);q.set(A,m[_]=en(A,v))}return{c(){e=F("span"),n=qe(t),i=qe("/"),o=qe(s[7]),r=ee(),l=F("div"),x&&x.c(),a=ee(),c=F("div"),P&&P.c(),h=ee(),E&&E.c(),d=ee(),C&&C.c(),p=ee(),b=F("nav"),T&&T.c(),g=ee();for(let _=0;_<m.length;_+=1)m[_].c();w(e,"class","svelte-d39b1x"),H(e,"active",s[14]),w(l,"class","preview svelte-d39b1x"),H(l,"completed",s[14]),ne(l,"--board-size",s[16].boardSize),w(c,"class","board svelte-d39b1x"),H(c,"completed",s[14]),ne(c,"--board-size",s[16].boardSize),w(b,"class","svelte-d39b1x")},m(_,v){$(_,e,v),V(e,n),V(e,i),V(e,o),$(_,r,v),$(_,l,v),x&&x.m(l,null),$(_,a,v),$(_,c,v),P&&P.m(c,null),V(c,h),E&&E.m(c,null),u=Rn.observe(c,s[20].bind(c)),$(_,d,v),C&&C.m(_,v),$(_,p,v),$(_,b,v),T&&T.m(b,null),V(b,g);for(let A=0;A<m.length;A+=1)m[A]&&m[A].m(b,null);O=!0},p(_,v){if((!O||v[0]&1)&&t!==(t=_[0]+1+"")&&bt(n,t),(!O||v[0]&128)&&bt(o,_[7]),(!O||v[0]&16384)&&H(e,"active",_[14]),_[1]||_[2]?x&&(Q(),S(x,1,1,()=>{x=null}),Z()):x?(x.p(_,v),v[0]&6&&y(x,1)):(x=Vt(_),x.c(),y(x,1),x.m(l,null)),(!O||v[0]&16384)&&H(l,"completed",_[14]),_[2]?P?(P.p(_,v),v[0]&4&&y(P,1)):(P=Ht(_),P.c(),y(P,1),P.m(c,h)):P&&(Q(),S(P,1,1,()=>{P=null}),Z()),_[14]?E&&(Q(),S(E,1,1,()=>{E=null}),Z()):E?(E.p(_,v),v[0]&16384&&y(E,1)):(E=Qt(_),E.c(),y(E,1),E.m(c,null)),(!O||v[0]&16384)&&H(c,"completed",_[14]),_[14]||oe?C?(C.p(_,v),v[0]&16384&&y(C,1)):(C=Yt(_),C.c(),y(C,1),C.m(p.parentNode,p)):C&&(Q(),S(C,1,1,()=>{C=null}),Z()),_[5]?T?T.p(_,v):(T=Xt(_),T.c(),T.m(b,g)):T&&(T.d(1),T=null),v[0]&16896){k=G(_[9]),Q();for(let A=0;A<m.length;A+=1)m[A].r();m=gn(m,v,N,1,_,k,q,b,Wn,en,null,Kt);for(let A=0;A<m.length;A+=1)m[A].a();Z()}},i(_){if(!O){y(x),y(P),y(E),f||X(()=>{f=dn(c,ie,{duration:500}),f.start()}),y(C);for(let v=0;v<k.length;v+=1)y(m[v]);O=!0}},o(_){S(x),S(P),S(E),S(C);for(let v=0;v<m.length;v+=1)S(m[v]);O=!1},d(_){_&&(I(e),I(r),I(l),I(a),I(c),I(d),I(p),I(b)),x&&x.d(),P&&P.d(),E&&E.d(),u(),C&&C.d(_),T&&T.d();for(let v=0;v<m.length;v+=1)m[v].d()}}}function vi(s,e,t){let n,i,o,r,l,a,c,h,u=U,f=()=>(u(),u=st(o,L=>t(14,h=L)),o),d,p=U,b=()=>(p(),p=st(i,L=>t(15,d=L)),i);Fe(s,He,L=>t(13,a=L)),Fe(s,je,L=>t(23,c=L)),s.$$.on_destroy.push(()=>u()),s.$$.on_destroy.push(()=>p());let g=0,m=!1,q=!1,O;const x=new ci(se);let P=!1,E=[];const C=async L=>{t(0,g=L);const Ye=await fs(L);Xe(o,h=!1,h),x.setupLevel(Ye,L),t(6,E=x.final)},T=async()=>{Xe(je,c={},c),Xe(He,a=us(_s),a),t(7,k=vn.length)};let k=0;const N=(L=1)=>{const Ye=(g+L+k)%k;C(Ye)},_=Ee(null);Fe(s,_,L=>t(19,l=L)),ft(async()=>{await T(),t(0,g=0),C(g)});let v="square",A=!1;function Be(){var L;O=(L=Ue.entries.get(this))==null?void 0:L.borderBoxSize,t(3,O)}function Cn(){v=this.value,t(8,v)}const On=()=>{x.addShape(v),t(5,A=!1)};return s.$$.update=()=>{s.$$.dirty[0]&8&&t(12,n=O?O[0].blockSize:0),s.$$.dirty[0]&524343&&t(9,r=[{icon:Ps,action:()=>N(-1),cond:!(m||q)&&g>0},{icon:qs,action:()=>N(),cond:!(m||q)},{icon:si,action:()=>{T()},cond:oe},{icon:ai,action:()=>t(1,m=!m),cond:oe},{icon:Ys,action:()=>t(5,A=!A),cond:oe},{icon:Ds,action:()=>t(4,P=x.toggleRemoveMode()),cond:oe},{icon:js,action:()=>x.checkBoardState(null,!0),cond:oe},{icon:Vs,action:()=>t(2,q=x.toggleEditBoard()),cond:oe}].filter(L=>L.cond===void 0||L.cond))},b(t(11,i=x.boardShapes$)),f(t(10,o=x.levelCompleted$)),[g,m,q,O,P,A,E,k,v,r,o,i,n,a,h,d,x,C,_,l,Be,Cn,On]}class Si extends K{constructor(e){super(),W(this,e,vi,wi,M,{},null,[-1,-1])}}function tn(s){let e,t;return e=new Si({}),{c(){B(e.$$.fragment)},m(n,i){j(e,n,i),t=!0},i(n){t||(y(e.$$.fragment,n),t=!0)},o(n){S(e.$$.fragment,n),t=!1},d(n){z(e,n)}}}function xi(s){let e,t,n=s[0]&&tn();return{c(){e=F("main"),n&&n.c(),w(e,"class","svelte-1jh7mv5")},m(i,o){$(i,e,o),n&&n.m(e,null),t=!0},p(i,[o]){i[0]?n?o&1&&y(n,1):(n=tn(),n.c(),y(n,1),n.m(e,null)):n&&(Q(),S(n,1,1,()=>{n=null}),Z())},i(i){t||(y(n),t=!0)},o(i){S(n),t=!1},d(i){i&&I(e),n&&n.d()}}}function Ci(s,e,t){let n=!1;return ft(()=>{setTimeout(()=>{t(0,n=!0)},300)}),[n]}class Oi extends K{constructor(e){super(),W(this,e,Ci,xi,M,{})}}new Oi({target:document.getElementById("app")});
