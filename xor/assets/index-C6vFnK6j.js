var sn=Object.defineProperty;var on=(s,e,t)=>e in s?sn(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var te=(s,e,t)=>(on(s,typeof e!="symbol"?e+"":e,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}})();function N(){}const Re=s=>s;function L(s,e){for(const t in e)s[t]=e[t];return s}function Mt(s){return s()}function at(){return Object.create(null)}function ee(s){s.forEach(Mt)}function ue(s){return typeof s=="function"}function M(s,e){return s!=s?e==e:s!==e||s&&typeof s=="object"||typeof s=="function"}function rn(s){return Object.keys(s).length===0}function Qe(s,...e){if(s==null){for(const n of e)n(void 0);return N}const t=s.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function Ze(s,e,t){s.$$.on_destroy.push(Qe(e,t))}function Ie(s,e,t,n){if(s){const i=Ft(s,e,t,n);return s[0](i)}}function Ft(s,e,t,n){return s[1]&&n?L(t.ctx.slice(),s[1](n(e))):t.ctx}function Ae(s,e,t,n){if(s[2]&&n){const i=s[2](n(t));if(e.dirty===void 0)return i;if(typeof i=="object"){const o=[],r=Math.max(e.dirty.length,i.length);for(let l=0;l<r;l+=1)o[l]=e.dirty[l]|i[l];return o}return e.dirty|i}return e.dirty}function Ne(s,e,t,n,i,o){if(i){const r=Ft(e,t,n,o);s.p(r,i)}}function je(s){if(s.ctx.length>32){const e=[],t=s.ctx.length/32;for(let n=0;n<t;n++)e[n]=-1;return e}return-1}function G(s){const e={};for(const t in s)t[0]!=="$"&&(e[t]=s[t]);return e}function ut(s,e){const t={};e=new Set(e);for(const n in s)!e.has(n)&&n[0]!=="$"&&(t[n]=s[n]);return t}function ht(s,e,t){return s.set(t),e}function dt(s){const e=typeof s=="string"&&s.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return e?[parseFloat(e[1]),e[2]||"px"]:[s,"px"]}const xt=typeof window<"u";let we=xt?()=>window.performance.now():()=>Date.now(),tt=xt?s=>requestAnimationFrame(s):N;const me=new Set;function Dt(s){me.forEach(e=>{e.c(s)||(me.delete(e),e.f())}),me.size!==0&&tt(Dt)}function qe(s){let e;return me.size===0&&tt(Dt),{promise:new Promise(t=>{me.add(e={c:s,f:t})}),abort(){me.delete(e)}}}const Wt=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;class Le{constructor(e){te(this,"_listeners","WeakMap"in Wt?new WeakMap:void 0);te(this,"_observer");te(this,"options");this.options=e}observe(e,t){return this._listeners.set(e,t),this._getObserver().observe(e,this.options),()=>{this._listeners.delete(e),this._observer.unobserve(e)}}_getObserver(){return this._observer??(this._observer=new ResizeObserver(e=>{var t;for(const n of e)Le.entries.set(n.target,n),(t=this._listeners.get(n.target))==null||t(n)}))}}Le.entries="WeakMap"in Wt?new WeakMap:void 0;function J(s,e){s.appendChild(e)}function Kt(s){if(!s)return document;const e=s.getRootNode?s.getRootNode():s.ownerDocument;return e&&e.host?e:s.ownerDocument}function ln(s){const e=Y("style");return e.textContent="/* empty */",cn(Kt(s),e),e.sheet}function cn(s,e){return J(s.head||s,e),e.sheet}function I(s,e,t){s.insertBefore(e,t||null)}function R(s){s.parentNode&&s.parentNode.removeChild(s)}function nt(s,e){for(let t=0;t<s.length;t+=1)s[t]&&s[t].d(e)}function Y(s){return document.createElement(s)}function ie(s){return document.createElementNS("http://www.w3.org/2000/svg",s)}function Ce(s){return document.createTextNode(s)}function ge(){return Ce(" ")}function oe(){return Ce("")}function le(s,e,t,n){return s.addEventListener(e,t,n),()=>s.removeEventListener(e,t,n)}function ft(s){return function(e){return e.preventDefault(),s.call(this,e)}}function v(s,e,t){t==null?s.removeAttribute(e):s.getAttribute(e)!==t&&s.setAttribute(e,t)}function ze(s,e){for(const t in e)v(s,t,e[t])}function an(s){return Array.from(s.childNodes)}function pt(s,e){e=""+e,s.data!==e&&(s.data=e)}function F(s,e,t,n){t==null?s.style.removeProperty(e):s.style.setProperty(e,t,n?"important":"")}const un=new Le({box:"border-box"});function B(s,e,t){s.classList.toggle(e,!!t)}function hn(s,e,{bubbles:t=!1,cancelable:n=!1}={}){return new CustomEvent(s,{detail:e,bubbles:t,cancelable:n})}function mt(s,e){return new s(e)}const Me=new Map;let Fe=0;function dn(s){let e=5381,t=s.length;for(;t--;)e=(e<<5)-e^s.charCodeAt(t);return e>>>0}function fn(s,e){const t={stylesheet:ln(e),rules:{}};return Me.set(s,t),t}function Oe(s,e,t,n,i,o,r,l=0){const c=16.666/n;let a=`{
`;for(let g=0;g<=1;g+=c){const p=e+(t-e)*o(g);a+=g*100+`%{${r(p,1-p)}}
`}const m=a+`100% {${r(t,1-t)}}
}`,d=`__svelte_${dn(m)}_${l}`,u=Kt(s),{stylesheet:f,rules:h}=Me.get(u)||fn(u,s);h[d]||(h[d]=!0,f.insertRule(`@keyframes ${d} ${m}`,f.cssRules.length));const y=s.style.animation||"";return s.style.animation=`${y?`${y}, `:""}${d} ${n}ms linear ${i}ms 1 both`,Fe+=1,d}function Te(s,e){const t=(s.style.animation||"").split(", "),n=t.filter(e?o=>o.indexOf(e)<0:o=>o.indexOf("__svelte")===-1),i=t.length-n.length;i&&(s.style.animation=n.join(", "),Fe-=i,Fe||pn())}function pn(){tt(()=>{Fe||(Me.forEach(s=>{const{ownerNode:e}=s.stylesheet;e&&R(e)}),Me.clear())})}function mn(s,e,t,n){if(!e)return N;const i=s.getBoundingClientRect();if(e.left===i.left&&e.right===i.right&&e.top===i.top&&e.bottom===i.bottom)return N;const{delay:o=0,duration:r=300,easing:l=Re,start:c=we()+o,end:a=c+r,tick:m=N,css:d}=t(s,{from:e,to:i},n);let u=!0,f=!1,h;function y(){d&&(h=Oe(s,0,1,r,o,l,d)),o||(f=!0)}function g(){d&&Te(s,h),u=!1}return qe(p=>{if(!f&&p>=c&&(f=!0),f&&p>=a&&(m(1,0),g()),!u)return!1;if(f){const w=p-c,k=0+1*l(w/r);m(k,1-k)}return!0}),y(),m(0,1),g}function gn(s){const e=getComputedStyle(s);if(e.position!=="absolute"&&e.position!=="fixed"){const{width:t,height:n}=e,i=s.getBoundingClientRect();s.style.position="absolute",s.style.width=t,s.style.height=n,Jt(s,i)}}function Jt(s,e){const t=s.getBoundingClientRect();if(e.left!==t.left||e.top!==t.top){const n=getComputedStyle(s),i=n.transform==="none"?"":n.transform;s.style.transform=`${i} translate(${e.left-t.left}px, ${e.top-t.top}px)`}}let Ee;function Pe(s){Ee=s}function bn(){if(!Ee)throw new Error("Function called outside component initialization");return Ee}function st(s){bn().$$.on_mount.push(s)}const pe=[],gt=[];let be=[];const bt=[],yn=Promise.resolve();let Ye=!1;function _n(){Ye||(Ye=!0,yn.then(Gt))}function V(s){be.push(s)}const Ge=new Set;let de=0;function Gt(){if(de!==0)return;const s=Ee;do{try{for(;de<pe.length;){const e=pe[de];de++,Pe(e),wn(e.$$)}}catch(e){throw pe.length=0,de=0,e}for(Pe(null),pe.length=0,de=0;gt.length;)gt.pop()();for(let e=0;e<be.length;e+=1){const t=be[e];Ge.has(t)||(Ge.add(t),t())}be.length=0}while(pe.length);for(;bt.length;)bt.pop()();Ye=!1,Ge.clear(),Pe(s)}function wn(s){if(s.fragment!==null){s.update(),ee(s.before_update);const e=s.dirty;s.dirty=[-1],s.fragment&&s.fragment.p(s.ctx,e),s.after_update.forEach(V)}}function Sn(s){const e=[],t=[];be.forEach(n=>s.indexOf(n)===-1?e.push(n):t.push(n)),t.forEach(n=>n()),be=e}let ke;function it(){return ke||(ke=Promise.resolve(),ke.then(()=>{ke=null})),ke}function ce(s,e,t){s.dispatchEvent(hn(`${e?"intro":"outro"}${t}`))}const Be=new Set;let K;function ne(){K={r:0,c:[],p:K}}function se(){K.r||ee(K.c),K=K.p}function P(s,e){s&&s.i&&(Be.delete(s),s.i(e))}function T(s,e,t,n){if(s&&s.o){if(Be.has(s))return;Be.add(s),K.c.push(()=>{Be.delete(s),n&&(t&&s.d(1),n())}),s.o(e)}else n&&n()}const ot={duration:0};function Vt(s,e,t){const n={direction:"in"};let i=e(s,t,n),o=!1,r,l,c=0;function a(){r&&Te(s,r)}function m(){const{delay:u=0,duration:f=300,easing:h=Re,tick:y=N,css:g}=i||ot;g&&(r=Oe(s,0,1,f,u,h,g,c++)),y(0,1);const p=we()+u,w=p+f;l&&l.abort(),o=!0,V(()=>ce(s,!0,"start")),l=qe(k=>{if(o){if(k>=w)return y(1,0),ce(s,!0,"end"),a(),o=!1;if(k>=p){const E=h((k-p)/f);y(E,1-E)}}return o})}let d=!1;return{start(){d||(d=!0,Te(s),ue(i)?(i=i(n),it().then(m)):m())},invalidate(){d=!1},end(){o&&(a(),o=!1)}}}function Ht(s,e,t){const n={direction:"out"};let i=e(s,t,n),o=!0,r;const l=K;l.r+=1;let c;function a(){const{delay:m=0,duration:d=300,easing:u=Re,tick:f=N,css:h}=i||ot;h&&(r=Oe(s,1,0,d,m,u,h));const y=we()+m,g=y+d;V(()=>ce(s,!1,"start")),"inert"in s&&(c=s.inert,s.inert=!0),qe(p=>{if(o){if(p>=g)return f(0,1),ce(s,!1,"end"),--l.r||ee(l.c),!1;if(p>=y){const w=u((p-y)/d);f(1-w,w)}}return o})}return ue(i)?it().then(()=>{i=i(n),a()}):a(),{end(m){m&&"inert"in s&&(s.inert=c),m&&i.tick&&i.tick(1,0),o&&(r&&Te(s,r),o=!1)}}}function xe(s,e,t,n){let o=e(s,t,{direction:"both"}),r=n?0:1,l=null,c=null,a=null,m;function d(){a&&Te(s,a)}function u(h,y){const g=h.b-r;return y*=Math.abs(g),{a:r,b:h.b,d:g,duration:y,start:h.start,end:h.start+y,group:h.group}}function f(h){const{delay:y=0,duration:g=300,easing:p=Re,tick:w=N,css:k}=o||ot,E={start:we()+y,b:h};h||(E.group=K,K.r+=1),"inert"in s&&(h?m!==void 0&&(s.inert=m):(m=s.inert,s.inert=!0)),l||c?c=E:(k&&(d(),a=Oe(s,r,h,g,y,p,k)),h&&w(0,1),l=u(E,g),V(()=>ce(s,h,"start")),qe(b=>{if(c&&b>c.start&&(l=u(c,g),c=null,ce(s,l.b,"start"),k&&(d(),a=Oe(s,r,l.b,l.duration,0,p,o.css))),l){if(b>=l.end)w(r=l.b,1-r),ce(s,l.b,"end"),c||(l.b?d():--l.group.r||ee(l.group.c)),l=null;else if(b>=l.start){const _=b-l.start;r=l.a+l.d*p(_/l.duration),w(r,1-r)}}return!!(l||c)}))}return{run(h){ue(o)?it().then(()=>{o=o({direction:h?"in":"out"}),f(h)}):f(h)},end(){d(),l=c=null}}}function x(s){return(s==null?void 0:s.length)!==void 0?s:Array.from(s)}function rt(s,e){T(s,1,1,()=>{e.delete(s.key)})}function vn(s,e){s.f(),rt(s,e)}function lt(s,e,t,n,i,o,r,l,c,a,m,d){let u=s.length,f=o.length,h=u;const y={};for(;h--;)y[s[h].key]=h;const g=[],p=new Map,w=new Map,k=[];for(h=f;h--;){const C=d(i,o,h),A=t(C);let j=r.get(A);j?n&&k.push(()=>j.p(C,e)):(j=a(A,C),j.c()),p.set(A,g[h]=j),A in y&&w.set(A,Math.abs(h-y[A]))}const E=new Set,b=new Set;function _(C){P(C,1),C.m(l,m),r.set(C.key,C),m=C.first,f--}for(;u&&f;){const C=g[f-1],A=s[u-1],j=C.key,S=A.key;C===A?(m=C.first,u--,f--):p.has(S)?!r.has(j)||E.has(j)?_(C):b.has(S)?u--:w.get(j)>w.get(S)?(b.add(j),_(C)):(E.add(S),u--):(c(A,r),u--)}for(;u--;){const C=s[u];p.has(C.key)||c(C,r)}for(;f;)_(g[f-1]);return ee(k),g}function ve(s,e){const t={},n={},i={$$scope:1};let o=s.length;for(;o--;){const r=s[o],l=e[o];if(l){for(const c in r)c in l||(n[c]=1);for(const c in l)i[c]||(t[c]=l[c],i[c]=1);s[o]=l}else for(const c in r)i[c]=1}for(const r in n)r in t||(t[r]=void 0);return t}function Ke(s){return typeof s=="object"&&s!==null?s:{}}function H(s){s&&s.c()}function D(s,e,t){const{fragment:n,after_update:i}=s.$$;n&&n.m(e,t),V(()=>{const o=s.$$.on_mount.map(Mt).filter(ue);s.$$.on_destroy?s.$$.on_destroy.push(...o):ee(o),s.$$.on_mount=[]}),i.forEach(V)}function W(s,e){const t=s.$$;t.fragment!==null&&(Sn(t.after_update),ee(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function kn(s,e){s.$$.dirty[0]===-1&&(pe.push(s),_n(),s.$$.dirty.fill(0)),s.$$.dirty[e/31|0]|=1<<e%31}function Q(s,e,t,n,i,o,r=null,l=[-1]){const c=Ee;Pe(s);const a=s.$$={fragment:null,ctx:[],props:o,update:N,not_equal:i,bound:at(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(c?c.$$.context:[])),callbacks:at(),dirty:l,skip_bound:!1,root:e.target||c.$$.root};r&&r(a.root);let m=!1;if(a.ctx=t?t(s,e.props||{},(d,u,...f)=>{const h=f.length?f[0]:u;return a.ctx&&i(a.ctx[d],a.ctx[d]=h)&&(!a.skip_bound&&a.bound[d]&&a.bound[d](h),m&&kn(s,d)),u}):[],a.update(),m=!0,ee(a.before_update),a.fragment=n?n(a.ctx):!1,e.target){if(e.hydrate){const d=an(e.target);a.fragment&&a.fragment.l(d),d.forEach(R)}else a.fragment&&a.fragment.c();e.intro&&P(s.$$.fragment),D(s,e.target,e.anchor),Gt()}Pe(c)}class Z{constructor(){te(this,"$$");te(this,"$$set")}$destroy(){W(this,1),this.$destroy=N}$on(e,t){if(!ue(t))return N;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const i=n.indexOf(t);i!==-1&&n.splice(i,1)}}$set(e){this.$$set&&!rn(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Cn="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Cn);const fe=[];function Se(s,e=N){let t;const n=new Set;function i(l){if(M(s,l)&&(s=l,t)){const c=!fe.length;for(const a of n)a[1](),fe.push(a,s);if(c){for(let a=0;a<fe.length;a+=2)fe[a][0](fe[a+1]);fe.length=0}}}function o(l){i(l(s))}function r(l,c=N){const a=[l,c];return n.add(a),n.size===1&&(t=e(i,o)||N),l(s),()=>{n.delete(a),n.size===0&&t&&(t(),t=null)}}return{set:i,update:o,subscribe:r}}function yt(s){return Object.prototype.toString.call(s)==="[object Date]"}function Xe(s,e,t,n){if(typeof t=="number"||yt(t)){const i=n-t,o=(t-e)/(s.dt||1/60),r=s.opts.stiffness*i,l=s.opts.damping*o,c=(r-l)*s.inv_mass,a=(o+c)*s.dt;return Math.abs(a)<s.opts.precision&&Math.abs(i)<s.opts.precision?n:(s.settled=!1,yt(t)?new Date(t.getTime()+a):t+a)}else{if(Array.isArray(t))return t.map((i,o)=>Xe(s,e[o],t[o],n[o]));if(typeof t=="object"){const i={};for(const o in t)i[o]=Xe(s,e[o],t[o],n[o]);return i}else throw new Error(`Cannot spring ${typeof t} values`)}}function Pn(s,e={}){const t=Se(s),{stiffness:n=.15,damping:i=.8,precision:o=.01}=e;let r,l,c,a=s,m=s,d=1,u=0,f=!1;function h(g,p={}){m=g;const w=c={};return s==null||p.hard||y.stiffness>=1&&y.damping>=1?(f=!0,r=we(),a=g,t.set(s=m),Promise.resolve()):(p.soft&&(u=1/((p.soft===!0?.5:+p.soft)*60),d=0),l||(r=we(),f=!1,l=qe(k=>{if(f)return f=!1,l=null,!1;d=Math.min(d+u,1);const E={inv_mass:d,opts:y,settled:!0,dt:(k-r)*60/1e3},b=Xe(E,a,s,m);return r=k,a=s,t.set(s=b),E.settled&&(l=null),!E.settled})),new Promise(k=>{l.promise.then(()=>{w===c&&k()})}))}const y={set:h,update:(g,p)=>h(g(m,s),p),subscribe:t.subscribe,stiffness:n,damping:i,precision:o};return y}function On(s){return s<.5?4*s*s*s:.5*Math.pow(2*s-2,3)+1}function Qt(s){const e=s-1;return e*e*e+1}function ae(s,{delay:e=0,duration:t=400,easing:n=Re}={}){const i=+getComputedStyle(s).opacity;return{delay:e,duration:t,easing:n,css:o=>`opacity: ${o*i}`}}function Tn(s,{delay:e=0,duration:t=400,easing:n=Qt,x:i=0,y:o=0,opacity:r=0}={}){const l=getComputedStyle(s),c=+l.opacity,a=l.transform==="none"?"":l.transform,m=c*(1-r),[d,u]=dt(i),[f,h]=dt(o);return{delay:e,duration:t,easing:n,css:(y,g)=>`
			transform: ${a} translate(${(1-y)*d}${u}, ${(1-y)*f}${h});
			opacity: ${c-m*g}`}}const X=15,De=!1,We=s=>s.length<2?"M 0 0 Z":s.map((e,t)=>`${t===0?"M":"L"} ${e.x} ${e.y}`).join(" ")+" Z";function En(s){let e,t,n,i,o,r,l,c,a,m;return{c(){e=Y("div"),t=ie("svg"),n=ie("path"),v(n,"d",i=We(s[1].path)),v(n,"class","svelte-98wpx9"),v(t,"width","100%"),v(t,"height","100%"),v(t,"viewBox",o=s[9](s[1].origin)),v(t,"preserveAspectRatio","none"),v(t,"fill","currentColor"),v(t,"class","svelte-98wpx9"),v(e,"role","cell"),v(e,"tabindex","-1"),v(e,"class","svelte-98wpx9"),B(e,"hidden",s[3]),B(e,"shake",s[2]),F(e,"--y",`${s[4].y}%`),F(e,"--x",`${s[4].x}%`)},m(d,u){I(d,e,u),J(e,t),J(t,n),c=!0,a||(m=[le(window,"mousemove",s[6]),le(window,"touchmove",s[6]),le(window,"mouseup",s[8]),le(window,"touchend",s[8]),le(e,"mousedown",ft(s[7])),le(e,"touchstart",ft(s[7]))],a=!0)},p(d,[u]){s=d,(!c||u&2&&i!==(i=We(s[1].path)))&&v(n,"d",i),(!c||u&2&&o!==(o=s[9](s[1].origin)))&&v(t,"viewBox",o),(!c||u&8)&&B(e,"hidden",s[3]),(!c||u&4)&&B(e,"shake",s[2]),u&16&&F(e,"--y",`${s[4].y}%`),u&16&&F(e,"--x",`${s[4].x}%`)},i(d){c||(V(()=>{c&&(l&&l.end(1),r=Vt(e,ae,{duration:100,delay:s[10]}),r.start())}),c=!0)},o(d){r&&r.invalidate(),l=Ht(e,Tn,{y:300,duration:2e3,delay:200+s[0]*100,easing:On}),c=!1},d(d){d&&R(e),d&&l&&l.end(),a=!1,ee(m)}}}function Rn(s,e,t){let n,{id:i}=e,{shapeSkin:o}=e,{shake:r=!1}=e,{hidden:l=!1}=e,{boardPoints:c=[]}=e,{blockSize:a=1}=e,m=!1,d={x:0,y:0},{shapePos:u={x:0,y:0}}=e,{shape:f=null}=e;const h=S=>S/a,y=()=>Math.random()*100,g=Pn({x:y(),y:y()},{stiffness:.1,damping:.25});Ze(s,g,S=>t(4,n=S));const p=S=>{let q=S.touches?S.touches[0]:S;return{x:q.clientX,y:q.clientY}},w=S=>{if(!m||r)return;const q=p(S);m&&g.set({x:h(q.x)*100-d.x,y:h(q.y)*100-d.y})},k=S=>{m=!0;const q=p(S),O=S.touches?30:0;d={x:h(q.x)*100-n.x,y:h(q.y+O)*100-n.y}},E=(S,q)=>c.flat().reduce(($,re)=>{const $e=Math.sqrt((re.x-S)**2+(re.y-q)**2);return $e<$.distance?{distance:$e,point:re}:$},{distance:1/0,point:{x:0,y:0}}).point,b=(S,q=!1)=>{const{x:O,y:$}=E(S.x,S.y);g.set({x:O/X*100,y:$/X*100}),q&&(f==null||f.setPos({x:O+.5,y:$+.5}))},_=()=>{m&&(m=!1,b({x:n.x/100*X,y:n.y/100*X},!0))},C=(S,q={x:1,y:1})=>`${S.x} ${S.y} ${q.x} ${q.y}`;let A=i==-1?0:100*i+500,j=!1;return st(()=>{setTimeout(()=>{t(15,j=!0),b(u,!0)},A)}),s.$$set=S=>{"id"in S&&t(0,i=S.id),"shapeSkin"in S&&t(1,o=S.shapeSkin),"shake"in S&&t(2,r=S.shake),"hidden"in S&&t(3,l=S.hidden),"boardPoints"in S&&t(11,c=S.boardPoints),"blockSize"in S&&t(12,a=S.blockSize),"shapePos"in S&&t(13,u=S.shapePos),"shape"in S&&t(14,f=S.shape)},s.$$.update=()=>{s.$$.dirty&40960&&j&&b(u)},[i,o,r,l,n,g,w,k,_,C,A,c,a,u,f,j]}class In extends Z{constructor(e){super(),Q(this,e,Rn,En,M,{id:0,shapeSkin:1,shake:2,hidden:3,boardPoints:11,blockSize:12,shapePos:13,shape:14})}}class z extends Error{constructor(e){var t,n,i,o;super("ClientResponseError"),this.url="",this.status=0,this.response={},this.isAbort=!1,this.originalError=null,Object.setPrototypeOf(this,z.prototype),e!==null&&typeof e=="object"&&(this.url=typeof e.url=="string"?e.url:"",this.status=typeof e.status=="number"?e.status:0,this.isAbort=!!e.isAbort,this.originalError=e.originalError,e.response!==null&&typeof e.response=="object"?this.response=e.response:e.data!==null&&typeof e.data=="object"?this.response=e.data:this.response={}),this.originalError||e instanceof z||(this.originalError=e),typeof DOMException<"u"&&e instanceof DOMException&&(this.isAbort=!0),this.name="ClientResponseError "+this.status,this.message=(t=this.response)==null?void 0:t.message,this.message||(this.isAbort?this.message="The request was autocancelled. You can find more info in https://github.com/pocketbase/js-sdk#auto-cancellation.":(o=(i=(n=this.originalError)==null?void 0:n.cause)==null?void 0:i.message)!=null&&o.includes("ECONNREFUSED ::1")?this.message="Failed to connect to the PocketBase server. Try changing the SDK URL from localhost to 127.0.0.1 (https://github.com/pocketbase/js-sdk/issues/21).":this.message="Something went wrong while processing your request.")}get data(){return this.response}toJSON(){return{...this}}}const Ue=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function An(s,e){const t={};if(typeof s!="string")return t;const n=Object.assign({},e||{}).decode||Nn;let i=0;for(;i<s.length;){const o=s.indexOf("=",i);if(o===-1)break;let r=s.indexOf(";",i);if(r===-1)r=s.length;else if(r<o){i=s.lastIndexOf(";",o-1)+1;continue}const l=s.slice(i,o).trim();if(t[l]===void 0){let c=s.slice(o+1,r).trim();c.charCodeAt(0)===34&&(c=c.slice(1,-1));try{t[l]=n(c)}catch{t[l]=c}}i=r+1}return t}function _t(s,e,t){const n=Object.assign({},t||{}),i=n.encode||jn;if(!Ue.test(s))throw new TypeError("argument name is invalid");const o=i(e);if(o&&!Ue.test(o))throw new TypeError("argument val is invalid");let r=s+"="+o;if(n.maxAge!=null){const l=n.maxAge-0;if(isNaN(l)||!isFinite(l))throw new TypeError("option maxAge is invalid");r+="; Max-Age="+Math.floor(l)}if(n.domain){if(!Ue.test(n.domain))throw new TypeError("option domain is invalid");r+="; Domain="+n.domain}if(n.path){if(!Ue.test(n.path))throw new TypeError("option path is invalid");r+="; Path="+n.path}if(n.expires){if(!function(c){return Object.prototype.toString.call(c)==="[object Date]"||c instanceof Date}(n.expires)||isNaN(n.expires.valueOf()))throw new TypeError("option expires is invalid");r+="; Expires="+n.expires.toUTCString()}if(n.httpOnly&&(r+="; HttpOnly"),n.secure&&(r+="; Secure"),n.priority)switch(typeof n.priority=="string"?n.priority.toLowerCase():n.priority){case"low":r+="; Priority=Low";break;case"medium":r+="; Priority=Medium";break;case"high":r+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}if(n.sameSite)switch(typeof n.sameSite=="string"?n.sameSite.toLowerCase():n.sameSite){case!0:r+="; SameSite=Strict";break;case"lax":r+="; SameSite=Lax";break;case"strict":r+="; SameSite=Strict";break;case"none":r+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return r}function Nn(s){return s.indexOf("%")!==-1?decodeURIComponent(s):s}function jn(s){return encodeURIComponent(s)}let Zt;function ye(s){if(s)try{const e=decodeURIComponent(Zt(s.split(".")[1]).split("").map(function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(e)||{}}catch{}return{}}function Yt(s,e=0){let t=ye(s);return!(Object.keys(t).length>0&&(!t.exp||t.exp-e>Date.now()/1e3))}Zt=typeof atob=="function"?atob:s=>{let e=String(s).replace(/=+$/,"");if(e.length%4==1)throw new Error("'atob' failed: The string to be decoded is not correctly encoded.");for(var t,n,i=0,o=0,r="";n=e.charAt(o++);~n&&(t=i%4?64*t+n:n,i++%4)?r+=String.fromCharCode(255&t>>(-2*i&6)):0)n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(n);return r};const wt="pb_auth";class qn{constructor(){this.baseToken="",this.baseModel=null,this._onChangeCallbacks=[]}get token(){return this.baseToken}get model(){return this.baseModel}get isValid(){return!Yt(this.token)}get isAdmin(){return ye(this.token).type==="admin"}get isAuthRecord(){return ye(this.token).type==="authRecord"}save(e,t){this.baseToken=e||"",this.baseModel=t||null,this.triggerChange()}clear(){this.baseToken="",this.baseModel=null,this.triggerChange()}loadFromCookie(e,t=wt){const n=An(e||"")[t]||"";let i={};try{i=JSON.parse(n),(typeof i===null||typeof i!="object"||Array.isArray(i))&&(i={})}catch{}this.save(i.token||"",i.model||null)}exportToCookie(e,t=wt){var c,a;const n={secure:!0,sameSite:!0,httpOnly:!0,path:"/"},i=ye(this.token);n.expires=i!=null&&i.exp?new Date(1e3*i.exp):new Date("1970-01-01"),e=Object.assign({},n,e);const o={token:this.token,model:this.model?JSON.parse(JSON.stringify(this.model)):null};let r=_t(t,JSON.stringify(o),e);const l=typeof Blob<"u"?new Blob([r]).size:r.length;if(o.model&&l>4096){o.model={id:(c=o==null?void 0:o.model)==null?void 0:c.id,email:(a=o==null?void 0:o.model)==null?void 0:a.email};const m=["collectionId","username","verified"];for(const d in this.model)m.includes(d)&&(o.model[d]=this.model[d]);r=_t(t,JSON.stringify(o),e)}return r}onChange(e,t=!1){return this._onChangeCallbacks.push(e),t&&e(this.token,this.model),()=>{for(let n=this._onChangeCallbacks.length-1;n>=0;n--)if(this._onChangeCallbacks[n]==e)return delete this._onChangeCallbacks[n],void this._onChangeCallbacks.splice(n,1)}}triggerChange(){for(const e of this._onChangeCallbacks)e&&e(this.token,this.model)}}class Ln extends qn{constructor(e="pocketbase_auth"){super(),this.storageFallback={},this.storageKey=e,this._bindStorageEvent()}get token(){return(this._storageGet(this.storageKey)||{}).token||""}get model(){return(this._storageGet(this.storageKey)||{}).model||null}save(e,t){this._storageSet(this.storageKey,{token:e,model:t}),super.save(e,t)}clear(){this._storageRemove(this.storageKey),super.clear()}_storageGet(e){if(typeof window<"u"&&(window!=null&&window.localStorage)){const t=window.localStorage.getItem(e)||"";try{return JSON.parse(t)}catch{return t}}return this.storageFallback[e]}_storageSet(e,t){if(typeof window<"u"&&(window!=null&&window.localStorage)){let n=t;typeof t!="string"&&(n=JSON.stringify(t)),window.localStorage.setItem(e,n)}else this.storageFallback[e]=t}_storageRemove(e){var t;typeof window<"u"&&(window!=null&&window.localStorage)&&((t=window.localStorage)==null||t.removeItem(e)),delete this.storageFallback[e]}_bindStorageEvent(){typeof window<"u"&&(window!=null&&window.localStorage)&&window.addEventListener&&window.addEventListener("storage",e=>{if(e.key!=this.storageKey)return;const t=this._storageGet(this.storageKey)||{};super.save(t.token||"",t.model||null)})}}class he{constructor(e){this.client=e}}class $n extends he{async getAll(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/settings",e)}async update(e,t){return t=Object.assign({method:"PATCH",body:e},t),this.client.send("/api/settings",t)}async testS3(e="storage",t){return t=Object.assign({method:"POST",body:{filesystem:e}},t),this.client.send("/api/settings/test/s3",t).then(()=>!0)}async testEmail(e,t,n){return n=Object.assign({method:"POST",body:{email:e,template:t}},n),this.client.send("/api/settings/test/email",n).then(()=>!0)}async generateAppleClientSecret(e,t,n,i,o,r){return r=Object.assign({method:"POST",body:{clientId:e,teamId:t,keyId:n,privateKey:i,duration:o}},r),this.client.send("/api/settings/apple/generate-client-secret",r)}}class ct extends he{decode(e){return e}async getFullList(e,t){if(typeof e=="number")return this._getFullList(e,t);let n=500;return(t=Object.assign({},e,t)).batch&&(n=t.batch,delete t.batch),this._getFullList(n,t)}async getList(e=1,t=30,n){return(n=Object.assign({method:"GET"},n)).query=Object.assign({page:e,perPage:t},n.query),this.client.send(this.baseCrudPath,n).then(i=>{var o;return i.items=((o=i.items)==null?void 0:o.map(r=>this.decode(r)))||[],i})}async getFirstListItem(e,t){return(t=Object.assign({requestKey:"one_by_filter_"+this.baseCrudPath+"_"+e},t)).query=Object.assign({filter:e,skipTotal:1},t.query),this.getList(1,1,t).then(n=>{var i;if(!((i=n==null?void 0:n.items)!=null&&i.length))throw new z({status:404,response:{code:404,message:"The requested resource wasn't found.",data:{}}});return n.items[0]})}async getOne(e,t){if(!e)throw new z({url:this.client.buildUrl(this.baseCrudPath+"/"),status:404,response:{code:404,message:"Missing required record id.",data:{}}});return t=Object.assign({method:"GET"},t),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e),t).then(n=>this.decode(n))}async create(e,t){return t=Object.assign({method:"POST",body:e},t),this.client.send(this.baseCrudPath,t).then(n=>this.decode(n))}async update(e,t,n){return n=Object.assign({method:"PATCH",body:t},n),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e),n).then(i=>this.decode(i))}async delete(e,t){return t=Object.assign({method:"DELETE"},t),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e),t).then(()=>!0)}_getFullList(e=500,t){(t=t||{}).query=Object.assign({skipTotal:1},t.query);let n=[],i=async o=>this.getList(o,e||500,t).then(r=>{const l=r.items;return n=n.concat(l),l.length==r.perPage?i(o+1):n});return i(1)}}function U(s,e,t,n){const i=n!==void 0;return i||t!==void 0?i?(console.warn(s),e.body=Object.assign({},e.body,t),e.query=Object.assign({},e.query,n),e):Object.assign(e,t):e}function Ve(s){var e;(e=s._resetAutoRefresh)==null||e.call(s)}class Un extends ct{get baseCrudPath(){return"/api/admins"}async update(e,t,n){return super.update(e,t,n).then(i=>{var o,r;return((o=this.client.authStore.model)==null?void 0:o.id)===i.id&&((r=this.client.authStore.model)==null?void 0:r.collectionId)===void 0&&this.client.authStore.save(this.client.authStore.token,i),i})}async delete(e,t){return super.delete(e,t).then(n=>{var i,o;return n&&((i=this.client.authStore.model)==null?void 0:i.id)===e&&((o=this.client.authStore.model)==null?void 0:o.collectionId)===void 0&&this.client.authStore.clear(),n})}authResponse(e){const t=this.decode((e==null?void 0:e.admin)||{});return e!=null&&e.token&&(e!=null&&e.admin)&&this.client.authStore.save(e.token,t),Object.assign({},e,{token:(e==null?void 0:e.token)||"",admin:t})}async authWithPassword(e,t,n,i){let o={method:"POST",body:{identity:e,password:t}};o=U("This form of authWithPassword(email, pass, body?, query?) is deprecated. Consider replacing it with authWithPassword(email, pass, options?).",o,n,i);const r=o.autoRefreshThreshold;delete o.autoRefreshThreshold,o.autoRefresh||Ve(this.client);let l=await this.client.send(this.baseCrudPath+"/auth-with-password",o);return l=this.authResponse(l),r&&function(a,m,d,u){Ve(a);const f=a.beforeSend,h=a.authStore.model,y=a.authStore.onChange((g,p)=>{(!g||(p==null?void 0:p.id)!=(h==null?void 0:h.id)||(p!=null&&p.collectionId||h!=null&&h.collectionId)&&(p==null?void 0:p.collectionId)!=(h==null?void 0:h.collectionId))&&Ve(a)});a._resetAutoRefresh=function(){y(),a.beforeSend=f,delete a._resetAutoRefresh},a.beforeSend=async(g,p)=>{var b;const w=a.authStore.token;if((b=p.query)!=null&&b.autoRefresh)return f?f(g,p):{url:g,sendOptions:p};let k=a.authStore.isValid;if(k&&Yt(a.authStore.token,m))try{await d()}catch{k=!1}k||await u();const E=p.headers||{};for(let _ in E)if(_.toLowerCase()=="authorization"&&w==E[_]&&a.authStore.token){E[_]=a.authStore.token;break}return p.headers=E,f?f(g,p):{url:g,sendOptions:p}}}(this.client,r,()=>this.authRefresh({autoRefresh:!0}),()=>this.authWithPassword(e,t,Object.assign({autoRefresh:!0},o))),l}async authRefresh(e,t){let n={method:"POST"};return n=U("This form of authRefresh(body?, query?) is deprecated. Consider replacing it with authRefresh(options?).",n,e,t),this.client.send(this.baseCrudPath+"/auth-refresh",n).then(this.authResponse.bind(this))}async requestPasswordReset(e,t,n){let i={method:"POST",body:{email:e}};return i=U("This form of requestPasswordReset(email, body?, query?) is deprecated. Consider replacing it with requestPasswordReset(email, options?).",i,t,n),this.client.send(this.baseCrudPath+"/request-password-reset",i).then(()=>!0)}async confirmPasswordReset(e,t,n,i,o){let r={method:"POST",body:{token:e,password:t,passwordConfirm:n}};return r=U("This form of confirmPasswordReset(resetToken, password, passwordConfirm, body?, query?) is deprecated. Consider replacing it with confirmPasswordReset(resetToken, password, passwordConfirm, options?).",r,i,o),this.client.send(this.baseCrudPath+"/confirm-password-reset",r).then(()=>!0)}}const Bn=["requestKey","$cancelKey","$autoCancel","fetch","headers","body","query","params","cache","credentials","headers","integrity","keepalive","method","mode","redirect","referrer","referrerPolicy","signal","window"];function Xt(s){if(s){s.query=s.query||{};for(let e in s)Bn.includes(e)||(s.query[e]=s[e],delete s[e])}}class en extends he{constructor(){super(...arguments),this.clientId="",this.eventSource=null,this.subscriptions={},this.lastSentSubscriptions=[],this.maxConnectTimeout=15e3,this.reconnectAttempts=0,this.maxReconnectAttempts=1/0,this.predefinedReconnectIntervals=[200,300,500,1e3,1200,1500,2e3],this.pendingConnects=[]}get isConnected(){return!!this.eventSource&&!!this.clientId&&!this.pendingConnects.length}async subscribe(e,t,n){var r;if(!e)throw new Error("topic must be set.");let i=e;if(n){Xt(n);const l="options="+encodeURIComponent(JSON.stringify({query:n.query,headers:n.headers}));i+=(i.includes("?")?"&":"?")+l}const o=function(l){const c=l;let a;try{a=JSON.parse(c==null?void 0:c.data)}catch{}t(a||{})};return this.subscriptions[i]||(this.subscriptions[i]=[]),this.subscriptions[i].push(o),this.isConnected?this.subscriptions[i].length===1?await this.submitSubscriptions():(r=this.eventSource)==null||r.addEventListener(i,o):await this.connect(),async()=>this.unsubscribeByTopicAndListener(e,o)}async unsubscribe(e){var n;let t=!1;if(e){const i=this.getSubscriptionsByTopic(e);for(let o in i)if(this.hasSubscriptionListeners(o)){for(let r of this.subscriptions[o])(n=this.eventSource)==null||n.removeEventListener(o,r);delete this.subscriptions[o],t||(t=!0)}}else this.subscriptions={};this.hasSubscriptionListeners()?t&&await this.submitSubscriptions():this.disconnect()}async unsubscribeByPrefix(e){var n;let t=!1;for(let i in this.subscriptions)if((i+"?").startsWith(e)){t=!0;for(let o of this.subscriptions[i])(n=this.eventSource)==null||n.removeEventListener(i,o);delete this.subscriptions[i]}t&&(this.hasSubscriptionListeners()?await this.submitSubscriptions():this.disconnect())}async unsubscribeByTopicAndListener(e,t){var o;let n=!1;const i=this.getSubscriptionsByTopic(e);for(let r in i){if(!Array.isArray(this.subscriptions[r])||!this.subscriptions[r].length)continue;let l=!1;for(let c=this.subscriptions[r].length-1;c>=0;c--)this.subscriptions[r][c]===t&&(l=!0,delete this.subscriptions[r][c],this.subscriptions[r].splice(c,1),(o=this.eventSource)==null||o.removeEventListener(r,t));l&&(this.subscriptions[r].length||delete this.subscriptions[r],n||this.hasSubscriptionListeners(r)||(n=!0))}this.hasSubscriptionListeners()?n&&await this.submitSubscriptions():this.disconnect()}hasSubscriptionListeners(e){var t,n;if(this.subscriptions=this.subscriptions||{},e)return!!((t=this.subscriptions[e])!=null&&t.length);for(let i in this.subscriptions)if((n=this.subscriptions[i])!=null&&n.length)return!0;return!1}async submitSubscriptions(){if(this.clientId)return this.addAllSubscriptionListeners(),this.lastSentSubscriptions=this.getNonEmptySubscriptionKeys(),this.client.send("/api/realtime",{method:"POST",body:{clientId:this.clientId,subscriptions:this.lastSentSubscriptions},requestKey:this.getSubscriptionsCancelKey()}).catch(e=>{if(!(e!=null&&e.isAbort))throw e})}getSubscriptionsCancelKey(){return"realtime_"+this.clientId}getSubscriptionsByTopic(e){const t={};e=e.includes("?")?e:e+"?";for(let n in this.subscriptions)(n+"?").startsWith(e)&&(t[n]=this.subscriptions[n]);return t}getNonEmptySubscriptionKeys(){const e=[];for(let t in this.subscriptions)this.subscriptions[t].length&&e.push(t);return e}addAllSubscriptionListeners(){if(this.eventSource){this.removeAllSubscriptionListeners();for(let e in this.subscriptions)for(let t of this.subscriptions[e])this.eventSource.addEventListener(e,t)}}removeAllSubscriptionListeners(){if(this.eventSource)for(let e in this.subscriptions)for(let t of this.subscriptions[e])this.eventSource.removeEventListener(e,t)}async connect(){if(!(this.reconnectAttempts>0))return new Promise((e,t)=>{this.pendingConnects.push({resolve:e,reject:t}),this.pendingConnects.length>1||this.initConnect()})}initConnect(){this.disconnect(!0),clearTimeout(this.connectTimeoutId),this.connectTimeoutId=setTimeout(()=>{this.connectErrorHandler(new Error("EventSource connect took too long."))},this.maxConnectTimeout),this.eventSource=new EventSource(this.client.buildUrl("/api/realtime")),this.eventSource.onerror=e=>{this.connectErrorHandler(new Error("Failed to establish realtime connection."))},this.eventSource.addEventListener("PB_CONNECT",e=>{const t=e;this.clientId=t==null?void 0:t.lastEventId,this.submitSubscriptions().then(async()=>{let n=3;for(;this.hasUnsentSubscriptions()&&n>0;)n--,await this.submitSubscriptions()}).then(()=>{for(let i of this.pendingConnects)i.resolve();this.pendingConnects=[],this.reconnectAttempts=0,clearTimeout(this.reconnectTimeoutId),clearTimeout(this.connectTimeoutId);const n=this.getSubscriptionsByTopic("PB_CONNECT");for(let i in n)for(let o of n[i])o(e)}).catch(n=>{this.clientId="",this.connectErrorHandler(n)})})}hasUnsentSubscriptions(){const e=this.getNonEmptySubscriptionKeys();if(e.length!=this.lastSentSubscriptions.length)return!0;for(const t of e)if(!this.lastSentSubscriptions.includes(t))return!0;return!1}connectErrorHandler(e){if(clearTimeout(this.connectTimeoutId),clearTimeout(this.reconnectTimeoutId),!this.clientId&&!this.reconnectAttempts||this.reconnectAttempts>this.maxReconnectAttempts){for(let n of this.pendingConnects)n.reject(new z(e));return this.pendingConnects=[],void this.disconnect()}this.disconnect(!0);const t=this.predefinedReconnectIntervals[this.reconnectAttempts]||this.predefinedReconnectIntervals[this.predefinedReconnectIntervals.length-1];this.reconnectAttempts++,this.reconnectTimeoutId=setTimeout(()=>{this.initConnect()},t)}disconnect(e=!1){var t;if(clearTimeout(this.connectTimeoutId),clearTimeout(this.reconnectTimeoutId),this.removeAllSubscriptionListeners(),this.client.cancelRequest(this.getSubscriptionsCancelKey()),(t=this.eventSource)==null||t.close(),this.eventSource=null,this.clientId="",!e){this.reconnectAttempts=0;for(let n of this.pendingConnects)n.resolve();this.pendingConnects=[]}}}class zn extends ct{constructor(e,t){super(e),this.collectionIdOrName=t}get baseCrudPath(){return this.baseCollectionPath+"/records"}get baseCollectionPath(){return"/api/collections/"+encodeURIComponent(this.collectionIdOrName)}async subscribe(e,t,n){if(!e)throw new Error("Missing topic.");if(!t)throw new Error("Missing subscription callback.");return this.client.realtime.subscribe(this.collectionIdOrName+"/"+e,t,n)}async unsubscribe(e){return e?this.client.realtime.unsubscribe(this.collectionIdOrName+"/"+e):this.client.realtime.unsubscribeByPrefix(this.collectionIdOrName)}async getFullList(e,t){if(typeof e=="number")return super.getFullList(e,t);const n=Object.assign({},e,t);return super.getFullList(n)}async getList(e=1,t=30,n){return super.getList(e,t,n)}async getFirstListItem(e,t){return super.getFirstListItem(e,t)}async getOne(e,t){return super.getOne(e,t)}async create(e,t){return super.create(e,t)}async update(e,t,n){return super.update(e,t,n).then(i=>{var o,r,l;return((o=this.client.authStore.model)==null?void 0:o.id)!==(i==null?void 0:i.id)||((r=this.client.authStore.model)==null?void 0:r.collectionId)!==this.collectionIdOrName&&((l=this.client.authStore.model)==null?void 0:l.collectionName)!==this.collectionIdOrName||this.client.authStore.save(this.client.authStore.token,i),i})}async delete(e,t){return super.delete(e,t).then(n=>{var i,o,r;return!n||((i=this.client.authStore.model)==null?void 0:i.id)!==e||((o=this.client.authStore.model)==null?void 0:o.collectionId)!==this.collectionIdOrName&&((r=this.client.authStore.model)==null?void 0:r.collectionName)!==this.collectionIdOrName||this.client.authStore.clear(),n})}authResponse(e){const t=this.decode((e==null?void 0:e.record)||{});return this.client.authStore.save(e==null?void 0:e.token,t),Object.assign({},e,{token:(e==null?void 0:e.token)||"",record:t})}async listAuthMethods(e){return e=Object.assign({method:"GET"},e),this.client.send(this.baseCollectionPath+"/auth-methods",e).then(t=>Object.assign({},t,{usernamePassword:!!(t!=null&&t.usernamePassword),emailPassword:!!(t!=null&&t.emailPassword),authProviders:Array.isArray(t==null?void 0:t.authProviders)?t==null?void 0:t.authProviders:[]}))}async authWithPassword(e,t,n,i){let o={method:"POST",body:{identity:e,password:t}};return o=U("This form of authWithPassword(usernameOrEmail, pass, body?, query?) is deprecated. Consider replacing it with authWithPassword(usernameOrEmail, pass, options?).",o,n,i),this.client.send(this.baseCollectionPath+"/auth-with-password",o).then(r=>this.authResponse(r))}async authWithOAuth2Code(e,t,n,i,o,r,l){let c={method:"POST",body:{provider:e,code:t,codeVerifier:n,redirectUrl:i,createData:o}};return c=U("This form of authWithOAuth2Code(provider, code, codeVerifier, redirectUrl, createData?, body?, query?) is deprecated. Consider replacing it with authWithOAuth2Code(provider, code, codeVerifier, redirectUrl, createData?, options?).",c,r,l),this.client.send(this.baseCollectionPath+"/auth-with-oauth2",c).then(a=>this.authResponse(a))}async authWithOAuth2(...e){if(e.length>1||typeof(e==null?void 0:e[0])=="string")return console.warn("PocketBase: This form of authWithOAuth2() is deprecated and may get removed in the future. Please replace with authWithOAuth2Code() OR use the authWithOAuth2() realtime form as shown in https://pocketbase.io/docs/authentication/#oauth2-integration."),this.authWithOAuth2Code((e==null?void 0:e[0])||"",(e==null?void 0:e[1])||"",(e==null?void 0:e[2])||"",(e==null?void 0:e[3])||"",(e==null?void 0:e[4])||{},(e==null?void 0:e[5])||{},(e==null?void 0:e[6])||{});const t=(e==null?void 0:e[0])||{},n=(await this.listAuthMethods()).authProviders.find(c=>c.name===t.provider);if(!n)throw new z(new Error(`Missing or invalid provider "${t.provider}".`));const i=this.client.buildUrl("/api/oauth2-redirect"),o=new en(this.client);let r=null;function l(){r==null||r.close(),o.unsubscribe()}return t.urlCallback||(r=St(void 0)),new Promise(async(c,a)=>{var m;try{await o.subscribe("@oauth2",async h=>{const y=o.clientId;try{if(!h.state||y!==h.state)throw new Error("State parameters don't match.");if(h.error||!h.code)throw new Error("OAuth2 redirect error or missing code: "+h.error);const g=Object.assign({},t);delete g.provider,delete g.scopes,delete g.createData,delete g.urlCallback;const p=await this.authWithOAuth2Code(n.name,h.code,n.codeVerifier,i,t.createData,g);c(p)}catch(g){a(new z(g))}l()});const d={state:o.clientId};(m=t.scopes)!=null&&m.length&&(d.scope=t.scopes.join(" "));const u=this._replaceQueryParams(n.authUrl+i,d);await(t.urlCallback||function(h){r?r.location.href=h:r=St(h)})(u)}catch(d){l(),a(new z(d))}})}async authRefresh(e,t){let n={method:"POST"};return n=U("This form of authRefresh(body?, query?) is deprecated. Consider replacing it with authRefresh(options?).",n,e,t),this.client.send(this.baseCollectionPath+"/auth-refresh",n).then(i=>this.authResponse(i))}async requestPasswordReset(e,t,n){let i={method:"POST",body:{email:e}};return i=U("This form of requestPasswordReset(email, body?, query?) is deprecated. Consider replacing it with requestPasswordReset(email, options?).",i,t,n),this.client.send(this.baseCollectionPath+"/request-password-reset",i).then(()=>!0)}async confirmPasswordReset(e,t,n,i,o){let r={method:"POST",body:{token:e,password:t,passwordConfirm:n}};return r=U("This form of confirmPasswordReset(token, password, passwordConfirm, body?, query?) is deprecated. Consider replacing it with confirmPasswordReset(token, password, passwordConfirm, options?).",r,i,o),this.client.send(this.baseCollectionPath+"/confirm-password-reset",r).then(()=>!0)}async requestVerification(e,t,n){let i={method:"POST",body:{email:e}};return i=U("This form of requestVerification(email, body?, query?) is deprecated. Consider replacing it with requestVerification(email, options?).",i,t,n),this.client.send(this.baseCollectionPath+"/request-verification",i).then(()=>!0)}async confirmVerification(e,t,n){let i={method:"POST",body:{token:e}};return i=U("This form of confirmVerification(token, body?, query?) is deprecated. Consider replacing it with confirmVerification(token, options?).",i,t,n),this.client.send(this.baseCollectionPath+"/confirm-verification",i).then(()=>{const o=ye(e),r=this.client.authStore.model;return r&&!r.verified&&r.id===o.id&&r.collectionId===o.collectionId&&(r.verified=!0,this.client.authStore.save(this.client.authStore.token,r)),!0})}async requestEmailChange(e,t,n){let i={method:"POST",body:{newEmail:e}};return i=U("This form of requestEmailChange(newEmail, body?, query?) is deprecated. Consider replacing it with requestEmailChange(newEmail, options?).",i,t,n),this.client.send(this.baseCollectionPath+"/request-email-change",i).then(()=>!0)}async confirmEmailChange(e,t,n,i){let o={method:"POST",body:{token:e,password:t}};return o=U("This form of confirmEmailChange(token, password, body?, query?) is deprecated. Consider replacing it with confirmEmailChange(token, password, options?).",o,n,i),this.client.send(this.baseCollectionPath+"/confirm-email-change",o).then(()=>{const r=ye(e),l=this.client.authStore.model;return l&&l.id===r.id&&l.collectionId===r.collectionId&&this.client.authStore.clear(),!0})}async listExternalAuths(e,t){return t=Object.assign({method:"GET"},t),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e)+"/external-auths",t)}async unlinkExternalAuth(e,t,n){return n=Object.assign({method:"DELETE"},n),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e)+"/external-auths/"+encodeURIComponent(t),n).then(()=>!0)}_replaceQueryParams(e,t={}){let n=e,i="";e.indexOf("?")>=0&&(n=e.substring(0,e.indexOf("?")),i=e.substring(e.indexOf("?")+1));const o={},r=i.split("&");for(const l of r){if(l=="")continue;const c=l.split("=");o[decodeURIComponent(c[0].replace(/\+/g," "))]=decodeURIComponent((c[1]||"").replace(/\+/g," "))}for(let l in t)t.hasOwnProperty(l)&&(t[l]==null?delete o[l]:o[l]=t[l]);i="";for(let l in o)o.hasOwnProperty(l)&&(i!=""&&(i+="&"),i+=encodeURIComponent(l.replace(/%20/g,"+"))+"="+encodeURIComponent(o[l].replace(/%20/g,"+")));return i!=""?n+"?"+i:n}}function St(s){if(typeof window>"u"||!(window!=null&&window.open))throw new z(new Error("Not in a browser context - please pass a custom urlCallback function."));let e=1024,t=768,n=window.innerWidth,i=window.innerHeight;e=e>n?n:e,t=t>i?i:t;let o=n/2-e/2,r=i/2-t/2;return window.open(s,"popup_window","width="+e+",height="+t+",top="+r+",left="+o+",resizable,menubar=no")}class Mn extends ct{get baseCrudPath(){return"/api/collections"}async import(e,t=!1,n){return n=Object.assign({method:"PUT",body:{collections:e,deleteMissing:t}},n),this.client.send(this.baseCrudPath+"/import",n).then(()=>!0)}}class Fn extends he{async getList(e=1,t=30,n){return(n=Object.assign({method:"GET"},n)).query=Object.assign({page:e,perPage:t},n.query),this.client.send("/api/logs",n)}async getOne(e,t){if(!e)throw new z({url:this.client.buildUrl("/api/logs/"),status:404,response:{code:404,message:"Missing required log id.",data:{}}});return t=Object.assign({method:"GET"},t),this.client.send("/api/logs/"+encodeURIComponent(e),t)}async getStats(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/logs/stats",e)}}class xn extends he{async check(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/health",e)}}class Dn extends he{getUrl(e,t,n={}){if(!t||!(e!=null&&e.id)||!(e!=null&&e.collectionId)&&!(e!=null&&e.collectionName))return"";const i=[];i.push("api"),i.push("files"),i.push(encodeURIComponent(e.collectionId||e.collectionName)),i.push(encodeURIComponent(e.id)),i.push(encodeURIComponent(t));let o=this.client.buildUrl(i.join("/"));if(Object.keys(n).length){n.download===!1&&delete n.download;const r=new URLSearchParams(n);o+=(o.includes("?")?"&":"?")+r}return o}async getToken(e){return e=Object.assign({method:"POST"},e),this.client.send("/api/files/token",e).then(t=>(t==null?void 0:t.token)||"")}}class Wn extends he{async getFullList(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/backups",e)}async create(e,t){return t=Object.assign({method:"POST",body:{name:e}},t),this.client.send("/api/backups",t).then(()=>!0)}async upload(e,t){return t=Object.assign({method:"POST",body:e},t),this.client.send("/api/backups/upload",t).then(()=>!0)}async delete(e,t){return t=Object.assign({method:"DELETE"},t),this.client.send(`/api/backups/${encodeURIComponent(e)}`,t).then(()=>!0)}async restore(e,t){return t=Object.assign({method:"POST"},t),this.client.send(`/api/backups/${encodeURIComponent(e)}/restore`,t).then(()=>!0)}getDownloadUrl(e,t){return this.client.buildUrl(`/api/backups/${encodeURIComponent(t)}?token=${encodeURIComponent(e)}`)}}class Kn{constructor(e="/",t,n="en-US"){this.cancelControllers={},this.recordServices={},this.enableAutoCancellation=!0,this.baseUrl=e,this.lang=n,this.authStore=t||new Ln,this.admins=new Un(this),this.collections=new Mn(this),this.files=new Dn(this),this.logs=new Fn(this),this.settings=new $n(this),this.realtime=new en(this),this.health=new xn(this),this.backups=new Wn(this)}collection(e){return this.recordServices[e]||(this.recordServices[e]=new zn(this,e)),this.recordServices[e]}autoCancellation(e){return this.enableAutoCancellation=!!e,this}cancelRequest(e){return this.cancelControllers[e]&&(this.cancelControllers[e].abort(),delete this.cancelControllers[e]),this}cancelAllRequests(){for(let e in this.cancelControllers)this.cancelControllers[e].abort();return this.cancelControllers={},this}filter(e,t){if(!t)return e;for(let n in t){let i=t[n];switch(typeof i){case"boolean":case"number":i=""+i;break;case"string":i="'"+i.replace(/'/g,"\\'")+"'";break;default:i=i===null?"null":i instanceof Date?"'"+i.toISOString().replace("T"," ")+"'":"'"+JSON.stringify(i).replace(/'/g,"\\'")+"'"}e=e.replaceAll("{:"+n+"}",i)}return e}getFileUrl(e,t,n={}){return this.files.getUrl(e,t,n)}buildUrl(e){var n;let t=this.baseUrl;return typeof window>"u"||!window.location||t.startsWith("https://")||t.startsWith("http://")||(t=(n=window.location.origin)!=null&&n.endsWith("/")?window.location.origin.substring(0,window.location.origin.length-1):window.location.origin||"",this.baseUrl.startsWith("/")||(t+=window.location.pathname||"/",t+=t.endsWith("/")?"":"/"),t+=this.baseUrl),e&&(t+=t.endsWith("/")?"":"/",t+=e.startsWith("/")?e.substring(1):e),t}async send(e,t){t=this.initSendOptions(e,t);let n=this.buildUrl(e);if(this.beforeSend){const i=Object.assign({},await this.beforeSend(n,t));i.url!==void 0||i.options!==void 0?(n=i.url||n,t=i.options||t):Object.keys(i).length&&(t=i,console!=null&&console.warn&&console.warn("Deprecated format of beforeSend return: please use `return { url, options }`, instead of `return options`."))}if(t.query!==void 0){const i=this.serializeQueryParams(t.query);i&&(n+=(n.includes("?")?"&":"?")+i),delete t.query}return this.getHeader(t.headers,"Content-Type")=="application/json"&&t.body&&typeof t.body!="string"&&(t.body=JSON.stringify(t.body)),(t.fetch||fetch)(n,t).then(async i=>{let o={};try{o=await i.json()}catch{}if(this.afterSend&&(o=await this.afterSend(i,o)),i.status>=400)throw new z({url:i.url,status:i.status,data:o});return o}).catch(i=>{throw new z(i)})}initSendOptions(e,t){if((t=Object.assign({method:"GET"},t)).body=this.convertToFormDataIfNeeded(t.body),Xt(t),t.query=Object.assign({},t.params,t.query),t.requestKey===void 0&&(t.$autoCancel===!1||t.query.$autoCancel===!1?t.requestKey=null:(t.$cancelKey||t.query.$cancelKey)&&(t.requestKey=t.$cancelKey||t.query.$cancelKey)),delete t.$autoCancel,delete t.query.$autoCancel,delete t.$cancelKey,delete t.query.$cancelKey,this.getHeader(t.headers,"Content-Type")!==null||this.isFormData(t.body)||(t.headers=Object.assign({},t.headers,{"Content-Type":"application/json"})),this.getHeader(t.headers,"Accept-Language")===null&&(t.headers=Object.assign({},t.headers,{"Accept-Language":this.lang})),this.authStore.token&&this.getHeader(t.headers,"Authorization")===null&&(t.headers=Object.assign({},t.headers,{Authorization:this.authStore.token})),this.enableAutoCancellation&&t.requestKey!==null){const n=t.requestKey||(t.method||"GET")+e;delete t.requestKey,this.cancelRequest(n);const i=new AbortController;this.cancelControllers[n]=i,t.signal=i.signal}return t}convertToFormDataIfNeeded(e){if(typeof FormData>"u"||e===void 0||typeof e!="object"||e===null||this.isFormData(e)||!this.hasBlobField(e))return e;const t=new FormData;for(const n in e){const i=e[n];if(typeof i!="object"||this.hasBlobField({data:i})){const o=Array.isArray(i)?i:[i];for(let r of o)t.append(n,r)}else{let o={};o[n]=i,t.append("@jsonPayload",JSON.stringify(o))}}return t}hasBlobField(e){for(const t in e){const n=Array.isArray(e[t])?e[t]:[e[t]];for(const i of n)if(typeof Blob<"u"&&i instanceof Blob||typeof File<"u"&&i instanceof File)return!0}return!1}getHeader(e,t){e=e||{},t=t.toLowerCase();for(let n in e)if(n.toLowerCase()==t)return e[n];return null}isFormData(e){return e&&(e.constructor.name==="FormData"||typeof FormData<"u"&&e instanceof FormData)}serializeQueryParams(e){const t=[];for(const n in e){if(e[n]===null)continue;const i=e[n],o=encodeURIComponent(n);if(Array.isArray(i))for(const r of i)t.push(o+"="+encodeURIComponent(r));else i instanceof Date?t.push(o+"="+encodeURIComponent(i.toISOString())):typeof i!==null&&typeof i=="object"?t.push(o+"="+encodeURIComponent(JSON.stringify(i))):t.push(o+"="+encodeURIComponent(i))}return t.join("&")}}function vt(s,e,t){const n=s.slice();return n[1]=e[t],n}function kt(s,e,t){const n=s.slice();return n[4]=e[t],n}function Ct(s){let e,t,n;return{c(){e=ie("circle"),v(e,"r",".1"),v(e,"cx",t=s[4].x),v(e,"cy",n=s[4].y)},m(i,o){I(i,e,o)},p(i,o){o&1&&t!==(t=i[4].x)&&v(e,"cx",t),o&1&&n!==(n=i[4].y)&&v(e,"cy",n)},d(i){i&&R(e)}}}function Pt(s){let e,t=x(s[1]),n=[];for(let i=0;i<t.length;i+=1)n[i]=Ct(kt(s,t,i));return{c(){for(let i=0;i<n.length;i+=1)n[i].c();e=oe()},m(i,o){for(let r=0;r<n.length;r+=1)n[r]&&n[r].m(i,o);I(i,e,o)},p(i,o){if(o&1){t=x(i[1]);let r;for(r=0;r<t.length;r+=1){const l=kt(i,t,r);n[r]?n[r].p(l,o):(n[r]=Ct(l),n[r].c(),n[r].m(e.parentNode,e))}for(;r<n.length;r+=1)n[r].d(1);n.length=t.length}},d(i){i&&R(e),nt(n,i)}}}function Jn(s){let e,t,n,i,o=x(s[0].boardPoints),r=[];for(let l=0;l<o.length;l+=1)r[l]=Pt(vt(s,o,l));return{c(){e=ie("svg");for(let l=0;l<r.length;l+=1)r[l].c();v(e,"width","100%"),v(e,"height","100%"),v(e,"viewBox",t=`0 0 ${s[0].boardSize} ${s[0].boardSize}`),v(e,"xmlns","http://www.w3.org/2000/svg"),v(e,"fill","black"),v(e,"class","svelte-1o5z4u5")},m(l,c){I(l,e,c);for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(e,null);i=!0},p(l,[c]){if(c&1){o=x(l[0].boardPoints);let a;for(a=0;a<o.length;a+=1){const m=vt(l,o,a);r[a]?r[a].p(m,c):(r[a]=Pt(m),r[a].c(),r[a].m(e,null))}for(;a<r.length;a+=1)r[a].d(1);r.length=o.length}(!i||c&1&&t!==(t=`0 0 ${l[0].boardSize} ${l[0].boardSize}`))&&v(e,"viewBox",t)},i(l){i||(n&&n.end(1),i=!0)},o(l){l&&(n=Ht(e,ae,{})),i=!1},d(l){l&&R(e),nt(r,l),l&&n&&n.end()}}}function Gn(s,e,t){let{board:n}=e;return s.$$set=i=>{"board"in i&&t(0,n=i.board)},[n]}class Vn extends Z{constructor(e){super(),Q(this,e,Gn,Jn,M,{board:0})}}function Hn(s){let e,t,n,i,o,r,l;return{c(){e=Y("div"),t=ie("svg"),n=ie("path"),v(n,"d",i=We(s[0].path)),v(t,"width","100%"),v(t,"height","100%"),v(t,"viewBox",o=s[3](s[0].origin)),v(t,"preserveAspectRatio","none"),v(t,"fill","currentColor"),v(t,"class","svelte-1opn61b"),v(e,"role","cell"),v(e,"tabindex","-1"),v(e,"class","svelte-1opn61b"),F(e,"--y",`${s[2].x}%`),F(e,"--x",`${s[2].y}%`),F(e,"--board-size",X/s[1])},m(c,a){I(c,e,a),J(e,t),J(t,n),l=!0},p(c,[a]){(!l||a&1&&i!==(i=We(c[0].path)))&&v(n,"d",i),(!l||a&1&&o!==(o=c[3](c[0].origin)))&&v(t,"viewBox",o),a&4&&F(e,"--y",`${c[2].x}%`),a&4&&F(e,"--x",`${c[2].y}%`),a&2&&F(e,"--board-size",X/c[1])},i(c){l||(V(()=>{l&&(r||(r=xe(e,ae,{duration:1e3},!0)),r.run(1))}),l=!0)},o(c){r||(r=xe(e,ae,{duration:1e3},!1)),r.run(0),l=!1},d(c){c&&R(e),c&&r&&r.end()}}}function Qn(s,e,t){let n,{shapeSkin:i}=e,{shapePos:o={x:0,y:0}}=e,{zoom:r=2.5}=e;const l=(c,a={x:1,y:1})=>`${c.x} ${c.y} ${a.x} ${a.y}`;return s.$$set=c=>{"shapeSkin"in c&&t(0,i=c.shapeSkin),"shapePos"in c&&t(4,o=c.shapePos),"zoom"in c&&t(1,r=c.zoom)},s.$$.update=()=>{s.$$.dirty&18&&t(2,n={x:(o.y-.5)*100*r/X-50*(r-1),y:(o.x-.5)*100*r/X-50*(r-1)})},[i,r,n,l,o]}class Zn extends Z{constructor(e){super(),Q(this,e,Qn,Hn,M,{shapeSkin:0,shapePos:4,zoom:1})}}let et=Se({});const Ot=(s,e)=>Math.round(s*10**e)/10**e;let tn={};et.subscribe(s=>{tn=s});class Yn{constructor(){te(this,"toggleRemoveMode",()=>(this.removePoints=!this.removePoints,this.removePoints));te(this,"processRemovePoints",()=>{this.shapePoints$.update(e=>e.filter(t=>!t.markRemove))});this.shapePoints$=Se([]),this.actionButtons=[],this.removePoints=!1,this.originPoint=new _e(this,0,{x:8,y:8},"origin"),this.startPoint=new _e(this,0,{x:7,y:7},"start"),this.initPoints()}initPoints(){[{x:8,y:6},{x:10,y:9},{x:6,y:9}].forEach(t=>{this.addPoint(t)})}addPoint(e,t="edit"){this.shapePoints$.update(n=>{const i=new _e(this,n.length+1,e,t);return[...n,i]})}addButton(e){this.actionButtons.push({...e})}checkBoardState(e){if(this.removePoints){console.log("remove mode",e),e.markRemove=!0,this.processRemovePoints();return}this.shapePoints$.update(t=>t)}getJSON(e){const t=e.map(i=>({x:i.pos.x-this.startPoint.pos.x,y:i.pos.y-this.startPoint.pos.y})),n={x:this.originPoint.pos.x-this.startPoint.pos.x,y:this.originPoint.pos.y-this.startPoint.pos.y};return JSON.stringify({points:t,origin:n})}}class _e{constructor(e,t,n,i){this.id=t,this.pos=n||{x:8,y:8},this.skin=i||"square",this.boardRef=e,this.markRemove=!1}setPos(e){this.pos=e;const t=this.boardRef,n=t instanceof Yn?this:null;t.checkBoardState(n)}loadSkin(){return tn[this.skin]}}class Xn{constructor(e){this.boardSize=e||15,this.boardShapes$=Se([]),this.boardPoints=this.generateBoardSnapPoints(this.boardSize),this.currentLevel=1,this.final=[],this.levelCompleted$=Se(!1)}addShape(e,t){this.boardShapes$.update(n=>{const i=new _e(this,n.length+1,e,t);return[...n,i]})}setupLevel(e,t){this.currentLevel=t+1,this.boardShapes$.set(e.start.map((i,o)=>new _e(this,o,i.pos,i.skin))),this.finalCenter=this.findCenterFromShapes(e.final);const n=this.relativeToCenter(this.finalCenter,{x:this.boardSize/2+.5,y:this.boardSize/2+.5});this.final=e.final.map((i,o)=>new _e(null,o,this.relativeToCenter(i.pos,n),i.skin))}findCenterFromShapes(e){const t=e.reduce((n,i)=>({x:n.x+i.pos.x,y:n.y+i.pos.y}),{x:0,y:0});return{x:t.x/e.length,y:t.y/e.length}}relativeToCenter(e,t){return{x:Ot(e.x-t.x,2),y:Ot(e.y-t.y,2)}}getJSON(e){return JSON.stringify(e.map(({pos:t,skin:n})=>({pos:t,skin:n})))}checkBoardState(e=!1){this.boardShapes$.update(t=>(e?console.log("ExportBoard: "+this.getJSON(t)):this.levelCompleted$.update(()=>this.checkLevelCompletion(t)),t))}areCoordsSame(e,t){return e.x===t.x&&e.y===t.y}checkLevelCompletion(e){const t=this.final,n=this.findCenterFromShapes(e),i=this.findCenterFromShapes(t),o=t.map(r=>({skin:r.skin,pos:this.relativeToCenter(r.pos,i)}));return e.every((r,l)=>{const c=this.relativeToCenter(r.pos,n);return o.some(a=>a.skin===r.skin&&this.areCoordsSame(c,a.pos))})}generateBoardSnapPoints(e){const t=(n,i,o)=>Math.sqrt(n**2+i**2)<=o;return Array(e).fill().map((n,i)=>Array(e).fill().map((o,r)=>({x:i+.5,y:r+.5})).filter((o,r)=>t(o.x/e-.5,o.y/e-.5,.5)))}}/**
 * @license lucide-svelte v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const es={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"},Tt=es;function Et(s,e,t){const n=s.slice();return n[10]=e[t][0],n[11]=e[t][1],n}function He(s){let e,t=[s[11]],n={};for(let i=0;i<t.length;i+=1)n=L(n,t[i]);return{c(){e=ie(s[10]),ze(e,n)},m(i,o){I(i,e,o)},p(i,o){ze(e,n=ve(t,[o&32&&i[11]]))},d(i){i&&R(e)}}}function Rt(s){let e=s[10],t,n=s[10]&&He(s);return{c(){n&&n.c(),t=oe()},m(i,o){n&&n.m(i,o),I(i,t,o)},p(i,o){i[10]?e?M(e,i[10])?(n.d(1),n=He(i),e=i[10],n.c(),n.m(t.parentNode,t)):n.p(i,o):(n=He(i),e=i[10],n.c(),n.m(t.parentNode,t)):e&&(n.d(1),n=null,e=i[10])},d(i){i&&R(t),n&&n.d(i)}}}function ts(s){let e,t,n,i,o,r=x(s[5]),l=[];for(let u=0;u<r.length;u+=1)l[u]=Rt(Et(s,r,u));const c=s[9].default,a=Ie(c,s,s[8],null);let m=[Tt,s[6],{width:s[2]},{height:s[2]},{stroke:s[1]},{"stroke-width":n=s[4]?Number(s[3])*24/Number(s[2]):s[3]},{class:i=`lucide-icon lucide lucide-${s[0]} ${s[7].class??""}`}],d={};for(let u=0;u<m.length;u+=1)d=L(d,m[u]);return{c(){e=ie("svg");for(let u=0;u<l.length;u+=1)l[u].c();t=oe(),a&&a.c(),ze(e,d)},m(u,f){I(u,e,f);for(let h=0;h<l.length;h+=1)l[h]&&l[h].m(e,null);J(e,t),a&&a.m(e,null),o=!0},p(u,[f]){if(f&32){r=x(u[5]);let h;for(h=0;h<r.length;h+=1){const y=Et(u,r,h);l[h]?l[h].p(y,f):(l[h]=Rt(y),l[h].c(),l[h].m(e,t))}for(;h<l.length;h+=1)l[h].d(1);l.length=r.length}a&&a.p&&(!o||f&256)&&Ne(a,c,u,u[8],o?Ae(c,u[8],f,null):je(u[8]),null),ze(e,d=ve(m,[Tt,f&64&&u[6],(!o||f&4)&&{width:u[2]},(!o||f&4)&&{height:u[2]},(!o||f&2)&&{stroke:u[1]},(!o||f&28&&n!==(n=u[4]?Number(u[3])*24/Number(u[2]):u[3]))&&{"stroke-width":n},(!o||f&129&&i!==(i=`lucide-icon lucide lucide-${u[0]} ${u[7].class??""}`))&&{class:i}]))},i(u){o||(P(a,u),o=!0)},o(u){T(a,u),o=!1},d(u){u&&R(e),nt(l,u),a&&a.d(u)}}}function ns(s,e,t){const n=["name","color","size","strokeWidth","absoluteStrokeWidth","iconNode"];let i=ut(e,n),{$$slots:o={},$$scope:r}=e,{name:l}=e,{color:c="currentColor"}=e,{size:a=24}=e,{strokeWidth:m=2}=e,{absoluteStrokeWidth:d=!1}=e,{iconNode:u}=e;return s.$$set=f=>{t(7,e=L(L({},e),G(f))),t(6,i=ut(e,n)),"name"in f&&t(0,l=f.name),"color"in f&&t(1,c=f.color),"size"in f&&t(2,a=f.size),"strokeWidth"in f&&t(3,m=f.strokeWidth),"absoluteStrokeWidth"in f&&t(4,d=f.absoluteStrokeWidth),"iconNode"in f&&t(5,u=f.iconNode),"$$scope"in f&&t(8,r=f.$$scope)},e=G(e),[l,c,a,m,d,u,i,e,r,o]}class Je extends Z{constructor(e){super(),Q(this,e,ns,ts,M,{name:0,color:1,size:2,strokeWidth:3,absoluteStrokeWidth:4,iconNode:5})}}function ss(s){let e;const t=s[2].default,n=Ie(t,s,s[3],null);return{c(){n&&n.c()},m(i,o){n&&n.m(i,o),e=!0},p(i,o){n&&n.p&&(!e||o&8)&&Ne(n,t,i,i[3],e?Ae(t,i[3],o,null):je(i[3]),null)},i(i){e||(P(n,i),e=!0)},o(i){T(n,i),e=!1},d(i){n&&n.d(i)}}}function is(s){let e,t;const n=[{name:"chevron-left"},s[1],{iconNode:s[0]}];let i={$$slots:{default:[ss]},$$scope:{ctx:s}};for(let o=0;o<n.length;o+=1)i=L(i,n[o]);return e=new Je({props:i}),{c(){H(e.$$.fragment)},m(o,r){D(e,o,r),t=!0},p(o,[r]){const l=r&3?ve(n,[n[0],r&2&&Ke(o[1]),r&1&&{iconNode:o[0]}]):{};r&8&&(l.$$scope={dirty:r,ctx:o}),e.$set(l)},i(o){t||(P(e.$$.fragment,o),t=!0)},o(o){T(e.$$.fragment,o),t=!1},d(o){W(e,o)}}}function os(s,e,t){let{$$slots:n={},$$scope:i}=e;const o=[["path",{d:"m15 18-6-6 6-6"}]];return s.$$set=r=>{t(1,e=L(L({},e),G(r))),"$$scope"in r&&t(3,i=r.$$scope)},e=G(e),[o,e,n,i]}class rs extends Z{constructor(e){super(),Q(this,e,os,is,M,{})}}const ls=rs;function cs(s){let e;const t=s[2].default,n=Ie(t,s,s[3],null);return{c(){n&&n.c()},m(i,o){n&&n.m(i,o),e=!0},p(i,o){n&&n.p&&(!e||o&8)&&Ne(n,t,i,i[3],e?Ae(t,i[3],o,null):je(i[3]),null)},i(i){e||(P(n,i),e=!0)},o(i){T(n,i),e=!1},d(i){n&&n.d(i)}}}function as(s){let e,t;const n=[{name:"chevron-right"},s[1],{iconNode:s[0]}];let i={$$slots:{default:[cs]},$$scope:{ctx:s}};for(let o=0;o<n.length;o+=1)i=L(i,n[o]);return e=new Je({props:i}),{c(){H(e.$$.fragment)},m(o,r){D(e,o,r),t=!0},p(o,[r]){const l=r&3?ve(n,[n[0],r&2&&Ke(o[1]),r&1&&{iconNode:o[0]}]):{};r&8&&(l.$$scope={dirty:r,ctx:o}),e.$set(l)},i(o){t||(P(e.$$.fragment,o),t=!0)},o(o){T(e.$$.fragment,o),t=!1},d(o){W(e,o)}}}function us(s,e,t){let{$$slots:n={},$$scope:i}=e;const o=[["path",{d:"m9 18 6-6-6-6"}]];return s.$$set=r=>{t(1,e=L(L({},e),G(r))),"$$scope"in r&&t(3,i=r.$$scope)},e=G(e),[o,e,n,i]}class hs extends Z{constructor(e){super(),Q(this,e,us,as,M,{})}}const ds=hs;function fs(s){let e;const t=s[2].default,n=Ie(t,s,s[3],null);return{c(){n&&n.c()},m(i,o){n&&n.m(i,o),e=!0},p(i,o){n&&n.p&&(!e||o&8)&&Ne(n,t,i,i[3],e?Ae(t,i[3],o,null):je(i[3]),null)},i(i){e||(P(n,i),e=!0)},o(i){T(n,i),e=!1},d(i){n&&n.d(i)}}}function ps(s){let e,t;const n=[{name:"download"},s[1],{iconNode:s[0]}];let i={$$slots:{default:[fs]},$$scope:{ctx:s}};for(let o=0;o<n.length;o+=1)i=L(i,n[o]);return e=new Je({props:i}),{c(){H(e.$$.fragment)},m(o,r){D(e,o,r),t=!0},p(o,[r]){const l=r&3?ve(n,[n[0],r&2&&Ke(o[1]),r&1&&{iconNode:o[0]}]):{};r&8&&(l.$$scope={dirty:r,ctx:o}),e.$set(l)},i(o){t||(P(e.$$.fragment,o),t=!0)},o(o){T(e.$$.fragment,o),t=!1},d(o){W(e,o)}}}function ms(s,e,t){let{$$slots:n={},$$scope:i}=e;const o=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}],["polyline",{points:"7 10 12 15 17 10"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3"}]];return s.$$set=r=>{t(1,e=L(L({},e),G(r))),"$$scope"in r&&t(3,i=r.$$scope)},e=G(e),[o,e,n,i]}class gs extends Z{constructor(e){super(),Q(this,e,ms,ps,M,{})}}const bs=gs;function ys(s){let e;const t=s[2].default,n=Ie(t,s,s[3],null);return{c(){n&&n.c()},m(i,o){n&&n.m(i,o),e=!0},p(i,o){n&&n.p&&(!e||o&8)&&Ne(n,t,i,i[3],e?Ae(t,i[3],o,null):je(i[3]),null)},i(i){e||(P(n,i),e=!0)},o(i){T(n,i),e=!1},d(i){n&&n.d(i)}}}function _s(s){let e,t;const n=[{name:"waypoints"},s[1],{iconNode:s[0]}];let i={$$slots:{default:[ys]},$$scope:{ctx:s}};for(let o=0;o<n.length;o+=1)i=L(i,n[o]);return e=new Je({props:i}),{c(){H(e.$$.fragment)},m(o,r){D(e,o,r),t=!0},p(o,[r]){const l=r&3?ve(n,[n[0],r&2&&Ke(o[1]),r&1&&{iconNode:o[0]}]):{};r&8&&(l.$$scope={dirty:r,ctx:o}),e.$set(l)},i(o){t||(P(e.$$.fragment,o),t=!0)},o(o){T(e.$$.fragment,o),t=!1},d(o){W(e,o)}}}function ws(s,e,t){let{$$slots:n={},$$scope:i}=e;const o=[["circle",{cx:"12",cy:"4.5",r:"2.5"}],["path",{d:"m10.2 6.3-3.9 3.9"}],["circle",{cx:"4.5",cy:"12",r:"2.5"}],["path",{d:"M7 12h10"}],["circle",{cx:"19.5",cy:"12",r:"2.5"}],["path",{d:"m13.8 17.7 3.9-3.9"}],["circle",{cx:"12",cy:"19.5",r:"2.5"}]];return s.$$set=r=>{t(1,e=L(L({},e),G(r))),"$$scope"in r&&t(3,i=r.$$scope)},e=G(e),[o,e,n,i]}class Ss extends Z{constructor(e){super(),Q(this,e,ws,_s,M,{})}}const vs=Ss;function ks(s,{from:e,to:t},n={}){const i=getComputedStyle(s),o=i.transform==="none"?"":i.transform,[r,l]=i.transformOrigin.split(" ").map(parseFloat),c=e.left+e.width*r/t.width-(t.left+r),a=e.top+e.height*l/t.height-(t.top+l),{delay:m=0,duration:d=f=>Math.sqrt(f)*120,easing:u=Qt}=n;return{delay:m,duration:ue(d)?d(Math.sqrt(c*c+a*a)):d,easing:u,css:(f,h)=>{const y=h*c,g=h*a,p=f+h*e.width/t.width,w=f+h*e.height/t.height;return`transform: ${o} translate(${y}px, ${g}px) scale(${p}, ${w});`}}}function It(s,e,t){const n=s.slice();return n[21]=e[t],n}function At(s,e,t){const n=s.slice();return n[24]=e[t],n}function Nt(s,e,t){const n=s.slice();return n[24]=e[t],n[28]=t,n}function jt(s){let e=s[2],t,n,i=Lt(s);return{c(){i.c(),t=oe()},m(o,r){i.m(o,r),I(o,t,r),n=!0},p(o,r){r&4&&M(e,e=o[2])?(ne(),T(i,1,1,N),se(),i=Lt(o),i.c(),P(i,1),i.m(t.parentNode,t)):i.p(o,r)},i(o){n||(P(i),n=!0)},o(o){T(i),n=!1},d(o){o&&R(t),i.d(o)}}}function qt(s,e){let t,n,i;return n=new Zn({props:{shapePos:e[24].pos,shapeSkin:e[24].loadSkin()}}),{key:s,first:null,c(){t=oe(),H(n.$$.fragment),this.first=t},m(o,r){I(o,t,r),D(n,o,r),i=!0},p(o,r){e=o;const l={};r&8&&(l.shapePos=e[24].pos),r&8&&(l.shapeSkin=e[24].loadSkin()),n.$set(l)},i(o){i||(P(n.$$.fragment,o),i=!0)},o(o){T(n.$$.fragment,o),i=!1},d(o){o&&R(t),W(n,o)}}}function Lt(s){let e=[],t=new Map,n,i,o=x(s[3]);const r=l=>l[28];for(let l=0;l<o.length;l+=1){let c=Nt(s,o,l),a=r(c);t.set(a,e[l]=qt(a,c))}return{c(){for(let l=0;l<e.length;l+=1)e[l].c();n=oe()},m(l,c){for(let a=0;a<e.length;a+=1)e[a]&&e[a].m(l,c);I(l,n,c),i=!0},p(l,c){c&8&&(o=x(l[3]),ne(),e=lt(e,c,r,1,l,o,t,n.parentNode,rt,qt,n,Nt),se())},i(l){if(!i){for(let c=0;c<o.length;c+=1)P(e[c]);i=!0}},o(l){for(let c=0;c<e.length;c+=1)T(e[c]);i=!1},d(l){l&&R(n);for(let c=0;c<e.length;c+=1)e[c].d(l)}}}function $t(s){let e=[],t=new Map,n,i,o,r,l,c=x(s[10]);const a=d=>d[24].id;for(let d=0;d<c.length;d+=1){let u=At(s,c,d),f=a(u);t.set(f,e[d]=Ut(f,u))}i=new Vn({props:{board:s[11]}});let m=De;return{c(){for(let d=0;d<e.length;d+=1)e[d].c();n=ge(),H(i.$$.fragment),o=ge(),r=oe()},m(d,u){for(let f=0;f<e.length;f+=1)e[f]&&e[f].m(d,u);I(d,n,u),D(i,d,u),I(d,o,u),I(d,r,u),l=!0},p(d,u){u&3329&&(c=x(d[10]),ne(),e=lt(e,u,a,1,d,c,t,n.parentNode,rt,Ut,n,At),se())},i(d){if(!l){for(let u=0;u<c.length;u+=1)P(e[u]);P(i.$$.fragment,d),P(m),l=!0}},o(d){for(let u=0;u<e.length;u+=1)T(e[u]);T(i.$$.fragment,d),T(m),l=!1},d(d){d&&(R(n),R(o),R(r));for(let u=0;u<e.length;u+=1)e[u].d(d);W(i,d)}}}function Ut(s,e){let t,n,i;return n=new In({props:{id:e[24].id,shapePos:e[24].pos,boardPoints:e[11].boardPoints,blockSize:e[8],shapeSkin:e[24].loadSkin(),shape:e[24],hidden:e[0]}}),{key:s,first:null,c(){t=oe(),H(n.$$.fragment),this.first=t},m(o,r){I(o,t,r),D(n,o,r),i=!0},p(o,r){e=o;const l={};r&1024&&(l.id=e[24].id),r&1024&&(l.shapePos=e[24].pos),r&256&&(l.blockSize=e[8]),r&1024&&(l.shapeSkin=e[24].loadSkin()),r&1024&&(l.shape=e[24]),r&1&&(l.hidden=e[0]),n.$set(l)},i(o){i||(P(n.$$.fragment,o),i=!0)},o(o){T(n.$$.fragment,o),i=!1},d(o){o&&R(t),W(n,o)}}}function Bt(s,e){let t,n,i,o,r,l=N,c,a,m;var d=e[21].icon;function u(f,h){return{props:{color:"black",size:"1em"}}}return d&&(n=mt(d,u())),{key:s,first:null,c(){t=Y("button"),n&&H(n.$$.fragment),i=ge(),v(t,"class","svelte-11zwzw8"),B(t,"dev",De),B(t,"active",e[9]),this.first=t},m(f,h){I(f,t,h),n&&D(n,t,null),J(t,i),c=!0,a||(m=le(t,"click",function(){ue(e[21].action)&&e[21].action.apply(this,arguments)}),a=!0)},p(f,h){if(e=f,h&32&&d!==(d=e[21].icon)){if(n){ne();const y=n;T(y.$$.fragment,1,0,()=>{W(y,1)}),se()}d?(n=mt(d,u()),H(n.$$.fragment),P(n.$$.fragment,1),D(n,t,i)):n=null}(!c||h&512)&&B(t,"active",e[9])},r(){r=t.getBoundingClientRect()},f(){gn(t),l(),Jt(t,r)},a(){l(),l=mn(t,r,ks,{})},i(f){c||(n&&P(n.$$.fragment,f),f&&V(()=>{c&&(o||(o=xe(t,ae,{},!0)),o.run(1))}),c=!0)},o(f){n&&T(n.$$.fragment,f),f&&(o||(o=xe(t,ae,{},!1)),o.run(0)),c=!1},d(f){f&&R(t),n&&W(n),f&&o&&o.end(),a=!1,m()}}}function Cs(s){let e,t=s[2]+1+"",n,i,o,r,l,c,a,m,d,u,f,h=[],y=new Map,g,p=!s[0]&&jt(s),w=!s[9]&&$t(s),k=x(s[5]);const E=b=>b[21].icon;for(let b=0;b<k.length;b+=1){let _=It(s,k,b),C=E(_);y.set(C,h[b]=Bt(C,_))}return{c(){e=Y("span"),n=Ce(t),i=Ce("/"),o=Ce(s[4]),r=ge(),l=Y("div"),p&&p.c(),c=ge(),a=Y("div"),w&&w.c(),u=ge(),f=Y("nav");for(let b=0;b<h.length;b+=1)h[b].c();v(e,"class","svelte-11zwzw8"),B(e,"active",s[9]),v(l,"class","preview svelte-11zwzw8"),B(l,"completed",s[9]),F(l,"--board-size",s[11].boardSize),v(a,"class","board svelte-11zwzw8"),B(a,"completed",s[9]),F(a,"--board-size",s[11].boardSize),v(f,"class","svelte-11zwzw8")},m(b,_){I(b,e,_),J(e,n),J(e,i),J(e,o),I(b,r,_),I(b,l,_),p&&p.m(l,null),I(b,c,_),I(b,a,_),w&&w.m(a,null),m=un.observe(a,s[14].bind(a)),I(b,u,_),I(b,f,_);for(let C=0;C<h.length;C+=1)h[C]&&h[C].m(f,null);g=!0},p(b,[_]){if((!g||_&4)&&t!==(t=b[2]+1+"")&&pt(n,t),(!g||_&16)&&pt(o,b[4]),(!g||_&512)&&B(e,"active",b[9]),b[0]?p&&(ne(),T(p,1,1,()=>{p=null}),se()):p?(p.p(b,_),_&1&&P(p,1)):(p=jt(b),p.c(),P(p,1),p.m(l,null)),(!g||_&512)&&B(l,"completed",b[9]),b[9]?w&&(ne(),T(w,1,1,()=>{w=null}),se()):w?(w.p(b,_),_&512&&P(w,1)):(w=$t(b),w.c(),P(w,1),w.m(a,null)),(!g||_&512)&&B(a,"completed",b[9]),_&544){k=x(b[5]),ne();for(let C=0;C<h.length;C+=1)h[C].r();h=lt(h,_,E,1,b,k,y,f,vn,Bt,null,It);for(let C=0;C<h.length;C+=1)h[C].a();se()}},i(b){if(!g){P(p),P(w),d||V(()=>{d=Vt(a,ae,{duration:500}),d.start()});for(let _=0;_<k.length;_+=1)P(h[_]);g=!0}},o(b){T(p),T(w);for(let _=0;_<h.length;_+=1)T(h[_]);g=!1},d(b){b&&(R(e),R(r),R(l),R(c),R(a),R(u),R(f)),p&&p.d(),w&&w.d(),m();for(let _=0;_<h.length;_+=1)h[_].d()}}}function Ps(s,e,t){let n,i,o,r,l,c,a,m=N,d=()=>(m(),m=Qe(o,O=>t(9,a=O)),o),u,f=N,h=()=>(f(),f=Qe(i,O=>t(10,u=O)),i);Ze(s,et,O=>t(15,c=O)),s.$$.on_destroy.push(()=>m()),s.$$.on_destroy.push(()=>f());const y=new Kn("https://db.cubiq.dev/");let g=0,p=!1,w;const k=new Xn(X);let E=[];const b=async()=>{const O=await y.collection("levels").getList(1,1).catch(re=>console.error(re)),{totalItems:$}=O||{totalItems:0};return $},_=async O=>{y.collection("levels").getFirstListItem("levelId="+O).then($=>{ht(o,a=!1,a),k.setupLevel($,O),t(3,E=k.final)}).catch($=>{console.error($)})},C=async()=>{try{const $=(await y.collection("skins").getFullList()).map(({skin:re,path:$e,origin:nn})=>({[re]:{path:$e,origin:nn}}));ht(et,c=Object.assign({},...$),c)}catch(O){console.error(O)}};let A=0;const j=(O=1)=>{t(2,g=(g+O+A)%A),_(g)},S=Se(null);Ze(s,S,O=>t(13,l=O)),st(async()=>{C(),t(4,A=await b()),t(2,g=0),_(g)});function q(){var O;w=(O=Le.entries.get(this))==null?void 0:O.borderBoxSize,t(1,w)}return s.$$.update=()=>{s.$$.dirty&2&&t(8,n=w?w[0].blockSize:0),s.$$.dirty&8193&&t(5,r=[{icon:ls,action:()=>j(-1),cond:!p},{icon:ds,action:()=>j(),cond:!p},{icon:bs,action:()=>k.checkBoardState(!0),cond:De},{icon:vs,action:()=>t(0,p=!p),cond:De}].filter(O=>O.cond===void 0||O.cond))},h(t(7,i=k.boardShapes$)),d(t(6,o=k.levelCompleted$)),[p,w,g,E,A,r,o,i,n,a,u,k,S,l,q]}class Os extends Z{constructor(e){super(),Q(this,e,Ps,Cs,M,{})}}function zt(s){let e,t;return e=new Os({}),{c(){H(e.$$.fragment)},m(n,i){D(e,n,i),t=!0},i(n){t||(P(e.$$.fragment,n),t=!0)},o(n){T(e.$$.fragment,n),t=!1},d(n){W(e,n)}}}function Ts(s){let e,t,n=s[0]&&zt();return{c(){e=Y("main"),n&&n.c(),v(e,"class","svelte-udrhtm")},m(i,o){I(i,e,o),n&&n.m(e,null),t=!0},p(i,[o]){i[0]?n?o&1&&P(n,1):(n=zt(),n.c(),P(n,1),n.m(e,null)):n&&(ne(),T(n,1,1,()=>{n=null}),se())},i(i){t||(P(n),t=!0)},o(i){T(n),t=!1},d(i){i&&R(e),n&&n.d()}}}function Es(s,e,t){let n=!1;return st(()=>{setTimeout(()=>{t(0,n=!0)},300)}),[n]}class Rs extends Z{constructor(e){super(),Q(this,e,Es,Ts,M,{})}}new Rs({target:document.getElementById("app")});
